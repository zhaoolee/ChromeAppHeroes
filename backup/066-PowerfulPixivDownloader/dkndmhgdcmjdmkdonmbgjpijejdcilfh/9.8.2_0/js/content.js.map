{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ts/API.ts","webpack:///./src/ts/Bookmark.ts","webpack:///./src/ts/CenterPanel.ts","webpack:///./src/ts/CheckNewVersion.ts","webpack:///./src/ts/ConvertUgoira/ConvertUgoira.ts","webpack:///./src/ts/ConvertUgoira/ExtractImage.ts","webpack:///./src/ts/ConvertUgoira/ToAPNG.ts","webpack:///./src/ts/ConvertUgoira/ToGIF.ts","webpack:///./src/ts/ConvertUgoira/ToWebM.ts","webpack:///./src/ts/EVT.ts","webpack:///./src/ts/FileName.ts","webpack:///./src/ts/ImageViewer.ts","webpack:///./src/ts/InitPage.ts","webpack:///./src/ts/Lang.ts","webpack:///./src/ts/LangText.ts","webpack:///./src/ts/ListenPageSwitch.ts","webpack:///./src/ts/Loading.ts","webpack:///./src/ts/Log.ts","webpack:///./src/ts/MsgBox.ts","webpack:///./src/ts/OpenCenterPanel.ts","webpack:///./src/ts/PageType.ts","webpack:///./src/ts/SelectWork.ts","webpack:///./src/ts/ShowHowToUse.ts","webpack:///./src/ts/ShowWhatIsNew.ts","webpack:///./src/ts/Theme.ts","webpack:///./src/ts/Tip.ts","webpack:///./src/ts/Toast.ts","webpack:///./src/ts/Token.ts","webpack:///./src/ts/Tools.ts","webpack:///./src/ts/ViewBigImage.ts","webpack:///./src/ts/config/Colors.ts","webpack:///./src/ts/config/Config.ts","webpack:///./src/ts/content.ts","webpack:///./src/ts/crawl/InitPageBase.ts","webpack:///./src/ts/crawl/VipSearchOptimize.ts","webpack:///./src/ts/crawlArtworkPage/InitAreaRankingPage.ts","webpack:///./src/ts/crawlArtworkPage/InitArtworkPage.ts","webpack:///./src/ts/crawlArtworkPage/InitArtworkSeriesPage.ts","webpack:///./src/ts/crawlArtworkPage/InitBookmarkDetailPage.ts","webpack:///./src/ts/crawlArtworkPage/InitBookmarkNewArtworkPage.ts","webpack:///./src/ts/crawlArtworkPage/InitDiscoverPage.ts","webpack:///./src/ts/crawlArtworkPage/InitNewArtworkPage.ts","webpack:///./src/ts/crawlArtworkPage/InitPixivisionPage.ts","webpack:///./src/ts/crawlArtworkPage/InitRankingArtworkPage.ts","webpack:///./src/ts/crawlArtworkPage/InitSearchArtworkPage.ts","webpack:///./src/ts/crawlMixedPage/InitBookmarkLegacyPage.ts","webpack:///./src/ts/crawlMixedPage/InitBookmarkPage.ts","webpack:///./src/ts/crawlMixedPage/InitFollowingPage.ts","webpack:///./src/ts/crawlMixedPage/InitHomePage.ts","webpack:///./src/ts/crawlMixedPage/InitUserPage.ts","webpack:///./src/ts/crawlMixedPage/QuickCrawl.ts","webpack:///./src/ts/crawlNovelPage/InitBookmarkNewNovelPage.ts","webpack:///./src/ts/crawlNovelPage/InitNewNovelPage.ts","webpack:///./src/ts/crawlNovelPage/InitNovelPage.ts","webpack:///./src/ts/crawlNovelPage/InitNovelSeriesPage.ts","webpack:///./src/ts/crawlNovelPage/InitRankingNovelPage.ts","webpack:///./src/ts/crawlNovelPage/InitSearchNovelPage.ts","webpack:///./src/ts/download/BookmarkAfterDL.ts","webpack:///./src/ts/download/Deduplication.ts","webpack:///./src/ts/download/Download.ts","webpack:///./src/ts/download/DownloadControl.ts","webpack:///./src/ts/download/DownloadStates.ts","webpack:///./src/ts/download/ExportLST.ts","webpack:///./src/ts/download/ExportResult.ts","webpack:///./src/ts/download/ExportResult2CSV.ts","webpack:///./src/ts/download/ImportResult.ts","webpack:///./src/ts/download/MakeEPUB.ts","webpack:///./src/ts/download/MakeNovelFile.ts","webpack:///./src/ts/download/ProgressBar.ts","webpack:///./src/ts/download/Resume.ts","webpack:///./src/ts/download/ShowConvertCount.ts","webpack:///./src/ts/download/ShowSkipCount.ts","webpack:///./src/ts/download/showStatusOnTitle.ts","webpack:///./src/ts/filter/BlackandWhiteImage.ts","webpack:///./src/ts/filter/BlockTagsForSpecificUser.ts","webpack:///./src/ts/filter/Filter.ts","webpack:///./src/ts/filter/Mute.ts","webpack:///./src/ts/output/OutputPanel.ts","webpack:///./src/ts/output/PreviewFileName.ts","webpack:///./src/ts/output/ShowURLs.ts","webpack:///./src/ts/pageFunciton/BookmarkAllWorks.ts","webpack:///./src/ts/pageFunciton/BookmarksAddTag.ts","webpack:///./src/ts/pageFunciton/DeleteWorks.ts","webpack:///./src/ts/pageFunciton/DestroyManager.ts","webpack:///./src/ts/pageFunciton/FastScreen.ts","webpack:///./src/ts/pageFunciton/QuickBookmark.ts","webpack:///./src/ts/pageFunciton/SaveAvatarIcon.ts","webpack:///./src/ts/pageFunciton/SaveAvatarImage.ts","webpack:///./src/ts/pageFunciton/SaveUserCover.ts","webpack:///./src/ts/setting/BG.ts","webpack:///./src/ts/setting/ConvertOldSettings.ts","webpack:///./src/ts/setting/Form.ts","webpack:///./src/ts/setting/FormHTML.ts","webpack:///./src/ts/setting/FormSettings.ts","webpack:///./src/ts/setting/InvisibleSettings.ts","webpack:///./src/ts/setting/Options.ts","webpack:///./src/ts/setting/SaveNamingRule.ts","webpack:///./src/ts/setting/Settings.ts","webpack:///./src/ts/store/IdListWithPageNo.ts","webpack:///./src/ts/store/SaveArtworkData.ts","webpack:///./src/ts/store/SaveNovelData.ts","webpack:///./src/ts/store/States.ts","webpack:///./src/ts/store/Store.ts","webpack:///./src/ts/utils/CreateCSV.ts","webpack:///./src/ts/utils/DateFormat.ts","webpack:///./src/ts/utils/IndexedDB.ts","webpack:///./src/ts/utils/SecretSignal.ts","webpack:///./src/ts/utils/Utils.ts","webpack:///./src/ts/utils/imageToIcon.ts"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,uDAAuD,GAAG,GAAG,KAAK,iBAAiB,IAAI,UAAU,OAAO,kBAAkB,uBAAuB,OAAO,cAAc;AACtK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,KAAK;AACxD;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA,uDAAuD,GAAG,oBAAoB,OAAO,SAAS,MAAM,QAAQ,KAAK,OAAO,IAAI,QAAQ,KAAK;AACzI;AACA;AACA;AACA;AACA,uDAAuD,GAAG,kBAAkB,OAAO,SAAS,MAAM,QAAQ,KAAK;AAC/G;AACA;AACA;AACA;AACA,uDAAuD,GAAG,oBAAoB,OAAO,SAAS,MAAM,QAAQ,KAAK;AACjH;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,GAAG;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,GAAG;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,GAAG,GAAG,KAAK,WAAW,IAAI,UAAU,OAAO,SAAS,MAAM;AACjH;AACA;AACA;AACA;AACA,yDAAyD,GAAG;AAC5D;AACA;AACA;AACA;AACA,yDAAyD,GAAG;AAC5D;AACA;AACA;AACA;AACA,wDAAwD,GAAG;AAC3D;AACA;AACA;AACA;AACA;AACA,yDAAyD,GAAG;AAC5D;AACA;AACA;AACA;AACA;AACA,4DAA4D,YAAY,KAAK,SAAS;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,GAAG,uBAAuB,OAAO;AACxG;AACA;AACA;AACA,oEAAoE;AACpE;AACA,uDAAuD,KAAK,GAAG,yBAAyB,QAAQ,yBAAyB,KAAK,EAAE;AAChI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA,8DAA8D,yBAAyB,QAAQ,yBAAyB,KAAK,EAAE;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,cAAc,SAAS,aAAa,QAAQ,YAAY,OAAO,WAAW;AAC5I;AACA;AACA;AACA;AACA,iEAAiE,cAAc,SAAS,aAAa,OAAO,WAAW;AACvH;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK,SAAS,EAAE;AAC3D;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,MAAM;AACjD;AACA;AACA;AACA;AACA,uEAAuE,UAAU,SAAS,MAAM,cAAc,WAAW,YAAY,SAAS;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,UAAU,KAAK,OAAO;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,KAAK;AACjE;AACA;AACA;AACA,kDAAkD;AAClD;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACe;;;;;;;;;;;;;AC3Sf;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACkB;AACd;AACA;AAChC;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,oBAAoB,wCAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4CAAK;AAC5B;AACA;AACA,eAAe,wCAAG,6BAA6B,0DAAQ,kBAAkB,4CAAK;AAC9E;AACA;AACoB;;;;;;;;;;;;;AClCpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8B;AACF;AACY;AACR;AACS;AACP;AACA;AACP;AACmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK;AACb,YAAY,8CAAE;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,qDAAM;AACd;AACA,+DAA+D,0CAAI,mBAAmB;AACtF;AACA;AACA;AACA;AACA,oEAAoE,0CAAI,mBAAmB;AAC3F;AACA;AACA;AACA;AACA,iEAAiE,0CAAI,iBAAiB;AACtF;AACA;AACA;AACA;AACA,6EAA6E,0CAAI,mBAAmB;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,0CAAI,eAAe;AAChD,6BAA6B,0CAAI,eAAe;AAChD,6BAA6B,0CAAI,eAAe;AAChD;;AAEA;;AAEA;;AAEA;AACA,mEAAmE,0CAAI,iBAAiB;AACxF,0FAA0F,0CAAI,iBAAiB;AAC/G,yGAAyG,0CAAI,6BAA6B;AAC1I;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,0CAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC,YAAY,wCAAG;AACf,SAAS;AACT;AACA,0BAA0B,wCAAG,mBAAmB,wCAAG;AACnD;AACA,qBAAqB,oDAAM,gBAAgB,oDAAM;AACjD;AACA;AACA,aAAa;AACb;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,6CAA6C,8CAAM,MAAM,0CAAI;AAC7D,mBAAmB,0CAAI;AACvB,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB,wCAAG;AACnB;AACA,SAAS;AACT;AACA;AACA,2BAA2B,iCAAiC;AAC5D;AACA;AACA;AACA,uDAAuD,0DAAQ;AAC/D;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf;AACA;AACA;AACA,aAAa;AACb;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA;AACA;;;;;;;;;;;;;AC/MA;AAAA;AAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACkB;AACb;AACF;AACE;AAClC;AACA;AACA;AACA,gCAAgC;AAChC,wBAAwB;AACxB,0BAA0B;AAC1B;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,SAAS,wCAAG,qBAAqB,wCAAG;AACpC;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,0DAAQ,2BAA2B,0DAAQ;AACvD;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,4CAAK;AACrC;AACA;AACA,gCAAgC,8CAAM;AACtC;AACA;AACA;AACA,gCAAgC,8CAAM;AACtC;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACyB;;;;;;;;;;;;;AClFzB;AAAA;AAAA;AAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,oBAAoB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,gBAAgB,wCAAG;AACnB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACwB;;;;;;;;;;;;;ACrDxB;AAAA;AAAA;AAAA;AAAA;AAA8C;AACjB;AACU;AACvC;AACA;AACA;AACA;AACA,kCAAkC,0DAAY;AAC9C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,YAAY,wCAAG;AACf;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kDAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACkB;;;;;;;;;;;;;ACtDlB;AAAA;AAAA;AAAA;AAAA;AAA8C;AACjB;AACU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,gBAAgB,wCAAG;AACnB;AACA,aAAa;AACb;AACA,kCAAkC,0DAAY;AAC9C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kDAAK;AACvC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACiB;;;;;;;;;;;;;AChEjB;AAAA;AAAA;AAAA;AAAA;AAA8C;AACjB;AACU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,0DAAY;AAC9C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kDAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACkB;;;;;;;;;;;;;ACzDlB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA,qBAAqB,OAAO;AAC5B,SAAS;AACT;AACA;AACA;AACA;AACe;;;;;;;;;;;;;ACrJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACpB;AACG;AACO;AACV;AACtC;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,kDAAK;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM,IAAI,KAAK,QAAQ,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,IAAI,GAAG,EAAE,KAAK,EAAE,QAAQ,KAAK,iBAAiB;AACzG,sBAAsB;AACtB,qBAAqB,0DAAQ,kBAAkB,GAAG;AAClD;AACA,iBAAiB,kDAAK;AACtB;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAAQ;AAC/B,YAAY,oEAAU;AACtB;AACA;AACA;AACA,cAAc,QAAQ;AACtB,uBAAuB,kDAAK;AAC5B;AACA;AACA,aAAa;AACb,cAAc,MAAM;AACpB,uBAAuB,kDAAK;AAC5B;AACA;AACA,aAAa;AACb,cAAc,GAAG;AACjB;AACA;AACA;AACA,aAAa;AACb,cAAc,OAAO;AACrB;AACA;AACA;AACA,aAAa;AACb,cAAc,MAAM;AACpB;AACA;AACA;AACA,aAAa;AACb,cAAc,KAAK;AACnB;AACA;AACA;AACA,aAAa;AACb,cAAc,MAAM;AACpB;AACA;AACA;AACA,aAAa;AACb,cAAc,KAAK;AACnB;AACA;AACA;AACA,aAAa;AACb,cAAc,OAAO;AACrB;AACA;AACA;AACA,aAAa;AACb,cAAc,QAAQ;AACtB;AACA;AACA;AACA,aAAa;AACb,cAAc,GAAG;AACjB;AACA;AACA;AACA,aAAa;AACb,cAAc,KAAK;AACnB;AACA;AACA;AACA,aAAa;AACb,cAAc,eAAe;AAC7B;AACA;AACA;AACA,aAAa;AACb,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA,aAAa;AACb,cAAc,IAAI;AAClB;AACA;AACA;AACA,aAAa;AACb,cAAc,KAAK;AACnB;AACA;AACA;AACA,aAAa;AACb,cAAc,KAAK;AACnB;AACA;AACA;AACA,aAAa;AACb,cAAc,KAAK;AACnB,uBAAuB,4DAAU,mBAAmB,0DAAQ;AAC5D;AACA;AACA,aAAa;AACb,cAAc,UAAU;AACxB,uBAAuB,4DAAU,QAAQ,kDAAK,oBAAoB,0DAAQ;AAC1E;AACA;AACA,aAAa;AACb,cAAc,KAAK;AACnB,uBAAuB,qDAAM;AAC7B;AACA;AACA,aAAa;AACb,cAAc,aAAa;AAC3B;AACA;AACA;AACA,aAAa;AACb,cAAc,aAAa;AAC3B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,0DAAQ,qBAAqB,MAAM;AAC9D;AACA;AACA;AACA;AACA;AACA,8BAA8B,MAAM;AACpC;AACA,8BAA8B,GAAG,wBAAwB,OAAO;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAK;AAChC;AACA;AACA,oBAAoB,0DAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,MAAM;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAQ;AACpB;AACA;AACA,gBAAgB,0DAAQ;AACxB,gBAAgB,0DAAQ;AACxB,gBAAgB,0DAAQ;AACxB,gBAAgB,0DAAQ;AACxB;AACA;AACA,+BAA+B,qDAAM;AACrC;AACA;AACA;AACA;AACA,YAAY,0DAAQ;AACpB;AACA;AACA;AACA;AACA,YAAY,0DAAQ,sBAAsB,0DAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,0DAAQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAQ;AACpB,+CAA+C,0DAAQ;AACvD;AACA;AACA;AACA,YAAY,0DAAQ,2BAA2B,0DAAQ;AACvD;AACA;AACA;AACA,gBAAgB,0DAAQ;AACxB;AACA;AACA;AACA,qBAAqB,0DAAQ;AAC7B;AACA;AACA,uCAAuC,GAAG;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,MAAM;AAC1C;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAAQ;AAC/B;AACA;AACA;AACA,uBAAuB,0DAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAQ;AACpB,wBAAwB,0DAAQ;AAChC;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoB;;;;;;;;;;;;;ACjTpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAC4B;AACA;AACE;AACE;AACI;AACI;AACR;AACA;AACM;AACtC;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,qDAAqD;AACrD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gDAAO;AACnB;AACA;AACA,8BAA8B,wCAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA,iDAAiD,4CAAK,gDAAgD,cAAc,qCAAqC;AACzJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gDAAO;AACnB;AACA;AACA;AACA,YAAY,4CAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0CAAI;AACnD;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,8CAA8C;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0CAAI;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iCAAiC,0CAAI;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,4CAAK,MAAM,0CAAI;AACvB;AACA;AACA,SAAS;AACT,cAAc,kDAAQ,iCAAiC,4CAAK;AAC5D,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA;AACA;AACA,YAAY,oDAAM;AAClB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA,QAAQ,oDAAM;AACd;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,QAAQ,4CAAK,MAAM,0CAAI;AACvB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACuB;;;;;;;;;;;;;AClZvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC4B;AACU;AACuB;AACQ;AACR;AACoB;AACZ;AACY;AACJ;AACM;AACR;AACQ;AACQ;AACpB;AACI;AACZ;AACY;AACA;AACE;AACQ;AAChB;AACY;AACV;AACvE;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,gBAAgB,kDAAQ;AACxB,iBAAiB,kDAAQ;AACzB,2BAA2B,yEAAY;AACvC,iBAAiB,kDAAQ;AACzB,2BAA2B,iFAAe;AAC1C,iBAAiB,kDAAQ;AACzB,2BAA2B,yEAAY;AACvC,iBAAiB,kDAAQ;AACzB,2BAA2B,6FAAsB;AACjD,iBAAiB,kDAAQ;AACzB,2BAA2B,iFAAgB;AAC3C,iBAAiB,kDAAQ;AACzB,2BAA2B,6FAAqB;AAChD,iBAAiB,kDAAQ;AACzB,2BAA2B,yFAAmB;AAC9C,iBAAiB,kDAAQ;AACzB,2BAA2B,+FAAsB;AACjD,iBAAiB,kDAAQ;AACzB,2BAA2B,wFAAkB;AAC7C,iBAAiB,kDAAQ;AACzB,2BAA2B,gGAAsB;AACjD,iBAAiB,kDAAQ;AACzB,2BAA2B,wGAA0B;AACrD,iBAAiB,kDAAQ;AACzB,2BAA2B,oFAAgB;AAC3C,iBAAiB,kDAAQ;AACzB,2BAA2B,wFAAkB;AAC7C,iBAAiB,kDAAQ;AACzB,2BAA2B,4EAAa;AACxC,iBAAiB,kDAAQ;AACzB,2BAA2B,wFAAmB;AAC9C,iBAAiB,kDAAQ;AACzB,2BAA2B,wFAAmB;AAC9C,iBAAiB,kDAAQ;AACzB,2BAA2B,0FAAoB;AAC/C,iBAAiB,kDAAQ;AACzB,2BAA2B,kGAAwB;AACnD,iBAAiB,kDAAQ;AACzB,2BAA2B,kFAAgB;AAC3C,iBAAiB,kDAAQ;AACzB,2BAA2B,8FAAqB;AAChD,iBAAiB,kDAAQ;AACzB,2BAA2B,oFAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnFA;AAAA;AAAA;AAAA;AAAA;AAAsC;AACV;AACM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8CAAM;AACtB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B,2DAA2D;AAC3D;AACA;AACA;AACA;AACgB;;;;;;;;;;;;;AC3DhB;AAAA;AAAA;AAAyC;AACzC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,uBAAuB;AACvB;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,eAAe;AACf,yBAAyB;AACzB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,oBAAoB;AACpB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB,4BAA4B;AAC5B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,mBAAmB;AACnB,oBAAoB;AACpB,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB,mBAAmB;AACnB,oBAAoB;AACpB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,mBAAmB;AACnB,gDAAgD;AAChD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,eAAe;AACf,yBAAyB;AACzB,cAAc;AACd;AACA;AACA,eAAe;AACf,eAAe;AACf,+BAA+B;AAC/B,cAAc;AACd;AACA;AACA,kBAAkB;AAClB,mBAAmB;AACnB,gBAAgB;AAChB,mBAAmB;AACnB;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB,sCAAsC;AACtC,kBAAkB;AAClB;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB,2BAA2B;AAC3B,kBAAkB;AAClB;AACA;AACA,uBAAuB;AACvB,wBAAwB;AACxB,yDAAyD;AACzD,2BAA2B;AAC3B;AACA;AACA,0BAA0B;AAC1B,2BAA2B;AAC3B,4CAA4C;AAC5C,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,kBAAkB;AAClB,wBAAwB;AACxB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,kBAAkB;AAClB,mBAAmB;AACnB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,kBAAkB;AAClB,qBAAqB;AACrB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,gBAAgB;AAChB,4BAA4B;AAC5B,cAAc;AACd;AACA;AACA,gBAAgB;AAChB,gBAAgB;AAChB,4BAA4B;AAC5B,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,GAAG,KAAK,QAAQ,MAAM,qCAAqC,GAAG,EAAE,OAAO;AACtG,8BAA8B,GAAG,KAAK,QAAQ,MAAM,gCAAgC,GAAG,EAAE,OAAO;AAChG,2CAA2C,GAAG,KAAK,QAAQ,MAAM,4IAA4I,GAAG,EAAE,OAAO;AACzN,gCAAgC,GAAG,MAAM,QAAQ,MAAM,oEAAoE,GAAG,EAAE,OAAO;AACvI;AACA;AACA,+BAA+B,GAAG,KAAK,QAAQ,MAAM;AACrD,8BAA8B,GAAG,KAAK,QAAQ,MAAM;AACpD,2CAA2C,GAAG,KAAK,QAAQ,MAAM;AACjE,gCAAgC,GAAG,MAAM,QAAQ,MAAM;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qDAAM,mBAAmB;AAC3C,kBAAkB,qDAAM,mBAAmB;AAC3C,2CAA2C,qDAAM,mBAAmB;AACpE,0BAA0B,qDAAM,mBAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,oBAAoB;AACpB,kDAAkD;AAClD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA,gBAAgB;AAChB,gBAAgB;AAChB,sBAAsB;AACtB,WAAW;AACX;AACA;AACA;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB,2BAA2B;AAC3B,wBAAwB;AACxB;AACA;AACA,cAAc;AACd,cAAc;AACd,gBAAgB;AAChB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,WAAW;AACX,WAAW;AACX,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,WAAW;AACX,WAAW;AACX,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB,4CAA4C;AAC5C,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,eAAe;AACf,WAAW;AACX,WAAW;AACX;AACA;AACA,WAAW;AACX,WAAW;AACX,WAAW;AACX,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB,mCAAmC;AACnC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,KAAK,IAAI,UAAU;AAC5D,yCAAyC,KAAK,IAAI,UAAU;AAC5D,+FAA+F,KAAK,MAAM,UAAU;AACpH,mDAAmD,KAAK,IAAI,UAAU;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoB;;;;;;;;;;;;;ACrnDpB;AAAA;AAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAG;AACnB,aAAa;AACb,SAAS;AACT;AACA;AACA;;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACmB;;;;;;;;;;;;;AC7CnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgC;AACJ;AACI;AACS;AACzC;AACA;AACA;AACA,qDAAqD;AACrD,4BAA4B;AAC5B,sDAAsD;AACtD;AACA;AACA,YAAY,qDAAM;AAClB,YAAY,qDAAM;AAClB,YAAY,qDAAM;AAClB;AACA,8BAA8B;AAC9B;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4CAAK;AACjB,YAAY,4CAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACe;;;;;;;;;;;;;ACvFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACa;AACT;AACF;AAC9B;AACA;AACA;AACA;AACA,qBAAqB,qDAAM;AAC3B,qBAAqB,qDAAM;AAC3B,mBAAmB,qDAAM;AACzB;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA,oCAAoC,QAAQ,WAAW;AACvD;AACA;AACA,mCAAmC,gCAAgC,QAAQ,WAAW;AACtF;AACA;AACA,mCAAmC,gCAAgC,QAAQ,WAAW;AACtF;AACA;AACA,mCAAmC,8BAA8B,QAAQ,WAAW;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA,2BAA2B,WAAW,GAAG,iBAAiB;AAC1D,6BAA6B,WAAW,GAAG,SAAS;AACpD,4CAA4C,YAAY,0CAAI,eAAe;AAC3E;AACA,QAAQ,4CAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,oCAAoC,wCAAG;AACvC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACkB;;;;;;;;;;;;;ACjElB;AAAA;AAAA;AAAA;AAA4B;AACE;AACQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,0CAAI;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAQ,UAAU,kDAAQ;AAClC;AACA;AACA;;;;;;;;;;;;;ACjDA;AAAA;AAAA;AAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACoB;;;;;;;;;;;;;ACnIpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgC;AACS;AACX;AACF;AACY;AACR;AACE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,+BAA+B;AAC/B,2DAA2D;AAC3D,yDAAyD;AACzD,yDAAyD;AACzD,wDAAwD;AACxD,+DAA+D;AAC/D,yCAAyC,KAAK;AAC9C,kDAAkD,KAAK;AACvD;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gBAAgB,8CAAM,OAAO,0CAAI;AACjC,yBAAyB,0CAAI;AAC7B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,4CAAK,0BAA0B,qDAAM,UAAU,0CAAI;AAC7E;AACA,wBAAwB,4CAAK,0BAA0B,qDAAM,QAAQ,0CAAI;AACzE;AACA;AACA;AACA,SAAS;AACT,wBAAwB,4CAAK,0BAA0B,qDAAM,SAAS,0CAAI;AAC1E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0CAA0C,0CAAI;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,0CAAI;AAClD;AACA;AACA;AACA;AACA;AACA,8CAA8C,0CAAI;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0CAAI,0BAA0B,mBAAmB;AACjE;AACA;AACA,wCAAwC,0CAAI;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAM;AAClB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,8BAA8B,8BAA8B,GAAG;AAC9G;AACA;AACA,+CAA+C,8BAA8B,qBAAqB,GAAG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2BAA2B,YAAY,GAAG;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACxXA;AAAA;AAAA;AAAA;AAA8B;AACW;AACP;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8CAAM,MAAM,0CAAI;AACxB,mBAAmB,qDAAM;AACzB,iBAAiB,0CAAI;AACrB,SAAS;AACT;AACA;AACA;AACA;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAAA;AAA8B;AACW;AACP;AACI;AACtC;AACA;AACA;AACA;AACA,mBAAmB,0CAAI,+BAA+B,0CAAI;AAC1D;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB,YAAY,8CAAM;AAClB,uBAAuB,qDAAM,eAAe,0CAAI,iBAAiB;AACjE,qBAAqB,0CAAI;AACzB,aAAa;AACb;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAA4B;AACU;AACtC;AACA;AACA;AACA;AACA,oCAAoC;AACpC,6BAA6B;AAC7B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,YAAY,kDAAK;AACjB;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiB;;;;;;;;;;;;ACrIjB;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qDAAM;AACzB,qBAAqB,qDAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qDAAM;AACzB,qBAAqB,qDAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qDAAM;AACzB,qBAAqB,qDAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qDAAM;AACzB,qBAAqB,qDAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,sBAAsB;AACtB,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oCAAoC,yBAAyB,WAAW;AACxE;AACA;AACA,oCAAoC,yBAAyB,WAAW;AACxE;AACA;AACA,oCAAoC,yBAAyB,WAAW;AACxE;AACA;AACA,oCAAoC,uBAAuB,WAAW;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiB;;;;;;;;;;;;;ACpLjB;AAAA;AAAA;AAAA;AAA4B;AACU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiB;;;;;;;;;;;;;AC1DjB;AAAA;AAAA;AAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kDAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kDAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,KAAK;AACnE;AACA,6CAA6C,KAAK;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiB;;;;;;;;;;;;;AC5QjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACgB;AACE;AACd;AAChC;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,gCAAgC;AAChC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oBAAoB,wDAAW;AAC/B;AACA;AACA,+BAA+B,0DAAQ;AACvC;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,4CAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACwB;;;;;;;;;;;;;ACvJxB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB;AACP;;;;;;;;;;;;;ACxBlB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACkB;;;;;;;;;;;;;AClBlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,2BAA2B;AAC3B,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACgB;AACC;AACW;AACS;AACT;AACL;AACH;AACiB;AACD;AACE;AACvB;AACS;AACM;AACI;AACP;AACU;AACJ;AACA;AACH;AACH;AACF;AACD;;;;;;;;;;;;;ACtCxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC+B;AACW;AACT;AACJ;AACU;AACV;AACA;AACgB;AACE;AACN;AACkB;AACJ;AACjB;AACf;AACyC;AACR;AACvB;AACE;AACI;AACA;AACvC;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;AAC7B,kCAAkC;AAClC,qCAAqC;AACrC,kDAAkD;AAClD,iCAAiC;AACjC,kCAAkC;AAClC;AACA;AACA;AACA,QAAQ,wDAAO;AACf;AACA;AACA;AACA;AACA;AACA,QAAQ,4EAAc;AACtB;AACA,QAAQ,wCAAG,qCAAqC,wCAAG;AACnD,iBAAiB,oDAAM;AACvB,gBAAgB,wCAAG;AACnB;AACA,SAAS;AACT;AACA,QAAQ,wCAAG,yBAAyB,wCAAG;AACvC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,qBAAqB,0CAAI;AACzB,SAAS;AACT;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,QAAQ,4CAAK;AACb,QAAQ,4CAAK;AACb;AACA;AACA;AACA,QAAQ,wCAAG;AACX,oBAAoB,0CAAI;AACxB,QAAQ,+CAAM;AACd;AACA;AACA;AACA;AACA;AACA,qBAAqB,0DAAQ,aAAa,mDAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG,iCAAiC;AAChD;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,0DAAQ,aAAa,mDAAQ;AAClD;AACA;AACA;AACA,gBAAgB,wCAAG,SAAS,0CAAI;AAChC;AACA;AACA,gBAAgB,wCAAG,SAAS,0CAAI;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,YAAY,0DAAQ;AACpB,YAAY,wCAAG,SAAS,0CAAI,wBAAwB,0DAAQ;AAC5D;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAM;AAClB,YAAY,6CAAK,OAAO,0CAAI;AAC5B;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,wCAAG,SAAS,0CAAI;AACxB,YAAY,mDAAK;AACjB,kBAAkB,kDAAI;AACtB;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAM;AAClB,YAAY,6CAAK,OAAO,0CAAI;AAC5B;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,wCAAG,SAAS,0CAAI;AACxB,YAAY,mDAAK;AACjB,kBAAkB,kDAAI;AACtB;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,kDAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,QAAQ,wCAAG;AACX,YAAY,oDAAM;AAClB;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI,mBAAmB,kDAAK;AAC5C;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB,YAAY,kDAAK;AACjB,8BAA8B,kDAAK;AACnC;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,2BAA2B,kDAAK;AAChC;AACA;AACA;AACA,YAAY,+CAAM;AAClB;AACA;AACA;AACA;AACA,mCAAmC,wCAAG;AACtC,sBAAsB,mEAAa;AACnC;AACA;AACA;AACA,mCAAmC,wCAAG;AACtC,sBAAsB,uEAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,qEAAiB;AAC5C;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,QAAQ,kDAAK;AACb;AACA,YAAY,0DAAQ;AACpB,YAAY,kDAAK,iBAAiB,4CAAK;AACvC,YAAY,kDAAK,aAAa,4CAAK;AACnC;AACA,QAAQ,wCAAG,KAAK,0CAAI,qBAAqB,kDAAK;AAC9C,QAAQ,wCAAG,KAAK,0CAAI,qBAAqB,kDAAK;AAC9C,QAAQ,wCAAG,SAAS,0CAAI;AACxB;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAG,mBAAmB,0CAAI;AAC1C;AACA;AACA,gBAAgB,wCAAG,mBAAmB,0CAAI;AAC1C;AACA;AACA,gBAAgB,wCAAG,mBAAmB,0CAAI;AAC1C;AACA;AACA,gBAAgB,wCAAG,mBAAmB,0CAAI;AAC1C;AACA;AACA,gBAAgB,wCAAG,OAAO,0CAAI;AAC9B;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG,QAAQ,0CAAI,gBAAgB,GAAG,kDAAK,eAAe,IAAI,0CAAI,qBAAqB,kDAAK,+BAA+B;AAC/H;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,wCAAG;AACX,oBAAoB,0CAAI;AACxB,QAAQ,wCAAG;AACX,QAAQ,+CAAM;AACd;AACA;AACA,kBAAkB;AAClB;AACwB;;;;;;;;;;;;;ACvUxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACU;AACQ;AACL;AACH;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0DAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qDAAM;AAClC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kDAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0DAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC6B;;;;;;;;;;;;;ACtG7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACE;AACY;AACH;AACH;AACvC,kCAAkC,gEAAY;AAC9C;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA;AACA,QAAQ,wDAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,2BAA2B,4CAAK;AAChC,gBAAgB,kDAAK;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AAC+B;;;;;;;;;;;;;ACrD/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACb;AACE;AACc;AACN;AACuB;AACjB;AACZ;AACJ;AACA;AACU;AACvC,8BAA8B,gEAAY;AAC1C;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC,gCAAgC,wCAAG;AACnC;AACA;AACA,YAAY,wDAAW;AACvB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,YAAY,yEAAa;AACzB;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD;AACA;AACA,SAAS;AACT,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD;AACA;AACA,SAAS;AACT,+BAA+B,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AAC5E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB;AACA,gBAAgB,0CAAI;AACpB,qBAAqB,0CAAI;AACzB,SAAS;AACT;AACA;AACA,QAAQ,4CAAK;AACb,QAAQ,4CAAK;AACb;AACA,mCAAmC,wCAAG;AACtC,mCAAmC,wCAAG;AACtC;AACA;AACA;AACA;AACA;AACA,kBAAkB,0CAAI;AACtB,kBAAkB,0CAAI;AACtB,uDAAuD,0CAAI;AAC3D;AACA;AACA;AACA,uDAAuD,0CAAI,sBAAsB,0CAAI;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAG,oBAAoB,4CAAK;AACvD;AACA,6BAA6B,4CAAK;AAClC;AACA;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gBAAgB,kDAAK,aAAa,mDAAK;AACvC;AACA;AACA;AACA,gBAAgB,kDAAK,aAAa,mDAAK;AACvC;AACA,YAAY,kDAAK,UAAU,kDAAK;AAChC;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG,gBAAgB,4CAAK;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,aAAa;AACb;AACA,QAAQ,yCAAG,KAAK,0CAAI,qBAAqB,kDAAK;AAC9C;AACA;AACA;AACA,gCAAgC;AAChC,kCAAkC;AAClC;AACA;AAC2B;;;;;;;;;;;;;AC/J3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACb;AACE;AACE;AACY;AACH;AACH;AACV;AACU;AACvC,oCAAoC,gEAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAK;AACvB;AACA;AACA,wBAAwB,wCAAG;AAC3B;AACA;AACA;AACA;AACA,2BAA2B,wCAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,kDAAK;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACiC;;;;;;;;;;;;;ACtGjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACE;AACY;AAChB;AACU;AACvC,qCAAqC,gEAAY;AACjD;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG,oBAAoB,4CAAK;AACrD;AACA,YAAY,kDAAK;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACkC;;;;;;;;;;;;;AC5ClC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACE;AACY;AACH;AACb;AACU;AACV;AACU;AACvC,yCAAyC,gEAAY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,kDAAK;AACrB,0BAA0B,wCAAG;AAC7B;AACA,iBAAiB;AACjB;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACsC;;;;;;;;;;;;;AChGtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACE;AACY;AACa;AACnB;AACvC,+BAA+B,gEAAY;AAC3C;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA,QAAQ,wDAAO;AACf;AACA;AACA,gCAAgC,qEAAW;AAC3C;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4CAAK;AAC5B,YAAY,kDAAK;AACjB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AAC4B;;;;;;;;;;;;;AC9C5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AACH;AACb;AACU;AACV;AACI;AACM;AACvC,iCAAiC,gEAAY;AAC7C;AACA;AACA;AACA,2BAA2B;AAC3B,4BAA4B;AAC5B;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,kDAAK;AACrB,0BAA0B,wCAAG;AAC7B;AACA,iBAAiB;AACjB;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC8B;;;;;;;;;;;;;AC1H9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACE;AACY;AACN;AACA;AACvC,iCAAiC,gEAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACzD;AACA,aAAa;AACb;AACA;AACA;AACA,QAAQ,wDAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ,EAAE,GAAG;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,cAAc,kDAAK;AACnB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AAC8B;;;;;;;;;;;;;AC1I9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACb;AACE;AACE;AACJ;AACgB;AACH;AACH;AACV;AACY;AACF;AACvC,qCAAqC,gEAAY;AACjD;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA;AACA,qBAAqB,mDAAK;AAC1B;AACA,YAAY,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI,kCAAkC,0CAAI;AAC/F,gBAAgB,qDAAM;AACtB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC,YAAY,qDAAM;AAClB,SAAS;AACT;AACA;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,0CAAI,wBAAwB,0CAAI;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mDAAK;AAChC,gCAAgC,mDAAK;AACrC,2BAA2B,mDAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,kDAAK;AACrB,gBAAgB,kDAAK;AACrB,0BAA0B,wCAAG;AAC7B;AACA,iBAAiB;AACjB;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACkC;;;;;;;;;;;;;AClJlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AACa;AAC7B;AACa;AACb;AACU;AACV;AACkB;AACS;AACvB;AACmC;AAC3B;AACF;AACsB;AAC5B;AACE;AACI;AACvC,oCAAoC,gEAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,oCAAoC;AACpC,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,0BAA0B;AAC1B,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAK;AACzB;AACA,oBAAoB,wCAAG;AACvB;AACA;AACA;AACA;AACA;AACA,kCAAkC,kDAAK;AACvC;AACA;AACA;AACA,uCAAuC,wCAAG;AAC1C;AACA,gBAAgB,wCAAG;AACnB,aAAa;AACb;AACA;AACA;AACA,oDAAoD,kDAAK;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mBAAmB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,iBAAiB,qBAAqB,cAAc;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,eAAe,aAAa,WAAW;AACxD;AACA;AACA;AACA,mEAAmE,WAAW;AAC9E;AACA;;AAEA;AACA,cAAc;;AAEd;AACA,cAAc;;AAEd;AACA;AACA;AACA,wBAAwB,WAAW,SAAS,WAAW,2BAA2B,gCAAgC;AAClH;AACA,gBAAgB;AAChB;AACA;AACA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;AACA,2CAA2C,oBAAoB;AAC/D,mFAAmF,eAAe;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,WAAW,IAAI,WAAW;AACvF;AACA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD,oCAAoC,UAAU;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,oBAAoB;AACvE;AACA;AACA;AACA,6BAA6B,QAAQ,kCAAkC,EAAE;AACzE,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,4BAA4B,kDAAK;AACjC;AACA,oBAAoB,mDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,YAAY,oEAAU;AACtB;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA,QAAQ,6CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AACtD,sBAAsB,0CAAI;AAC1B;AACA;AACA,oCAAoC,wCAAG;AACvC;AACA,SAAS;AACT,QAAQ,6CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AACtD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA;AACA,gCAAgC,qEAAW,KAAK,eAAe;AAC/D,4CAA4C,mBAAmB;AAC/D,YAAY,wCAAG;AACf,SAAS;AACT,0CAA0C,iBAAiB;AAC3D,YAAY,wCAAG;AACf,SAAS;AACT;AACA,YAAY,wCAAG;AACf,SAAS;AACT;AACA,+BAA+B,6CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AAC7E,gCAAgC,gFAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,gCAAgC,wCAAG;AACnC,gCAAgC,wCAAG;AACnC,gCAAgC,wCAAG;AACnC,gCAAgC,wCAAG;AACnC,gCAAgC,wCAAG;AACnC;AACA;AACA,QAAQ,6CAAK;AACb,QAAQ,6CAAK;AACb,mCAAmC,wCAAG;AACtC,mCAAmC,wCAAG;AACtC,mCAAmC,wCAAG;AACtC;AACA,QAAQ,qDAAM;AACd;AACA;AACA,mDAAmD,0CAAI,uBAAuB,0CAAI;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+CAAM,UAAU,0CAAI,mBAAmB,GAAG,cAAc;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mDAAK;AACrB;AACA;AACA;AACA;AACA,wBAAwB,mDAAK;AAC7B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG,eAAe,kDAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,yEAAgB;AAChC,0BAA0B,wCAAG;AAC7B;AACA,iBAAiB;AACjB;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAG,KAAK,0CAAI;AAC5B,gBAAgB,yEAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,iBAAiB,mDAAK;AACnC,QAAQ,kDAAK,aAAa,mDAAK;AAC/B;AACA;AACA;AACA,QAAQ,qDAAM,mBAAmB,2DAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uBAAuB,IAAI,eAAe;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6CAAK,OAAO,0CAAI;AAC5B;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,wCAAG;AACX,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK;AACb;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,qDAAM;AAClB,YAAY,6CAAK,OAAO,0CAAI;AAC5B;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qDAAM;AACzB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mDAAK;AACrB;AACA,SAAS;AACT;AACA;AACiC;;;;;;;;;;;;;AC3mBjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACxB;AACa;AACT;AACF;AACc;AACqB;AAC3B;AACV;AACI;AACS;AACH;AACG;AAC1C,qCAAqC,gEAAY;AACjD;AACA;AACA,yBAAyB;AACzB,8BAA8B;AAC9B,4BAA4B;AAC5B,+BAA+B;AAC/B,gCAAgC;AAChC,+BAA+B;AAC/B,wBAAwB;AACxB,sCAAsC;AACtC;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,4CAAK;AACjB,wBAAwB,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI,sCAAsC,0CAAI;AAChH,gBAAgB,6EAAe;AAC/B;AACA;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,qBAAqB,0CAAI;AACzB,SAAS;AACT;AACA;AACA;AACA;AACA,sBAAsB,0CAAI;AAC1B;AACA;AACA,sBAAsB,0CAAI;AAC1B;AACA,mDAAmD,0CAAI;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mDAAK,uCAAuC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG,iBAAiB,4CAAK,yBAAyB,kDAAK;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sDAAM;AAChC;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,4CAA4C;AAC5C,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,UAAU,kDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,4CAAK,eAAe,4CAAK;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,kCAAkC,kDAAK;AACvC;AACA;AACkC;;;;;;;;;;;;;ACvMlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACxB;AACa;AACX;AACc;AACN;AACV;AACI;AACA;AACiC;AACxB;AACH;AACG;AAC1C,+BAA+B,gEAAY;AAC3C;AACA;AACA,yBAAyB;AACzB,8BAA8B;AAC9B,4BAA4B;AAC5B,+BAA+B;AAC/B,gCAAgC;AAChC,+BAA+B;AAC/B,wBAAwB;AACxB;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,qBAAqB,0CAAI;AACzB,SAAS;AACT;AACA;AACA,mDAAmD,0CAAI,uBAAuB,0CAAI;AAClF;AACA;AACA;AACA,YAAY,4CAAK;AACjB,wBAAwB,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI,sCAAsC,0CAAI;AAChH,gBAAgB,6EAAe;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mDAAK,uCAAuC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG,iBAAiB,4CAAK,yBAAyB,kDAAK;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sDAAM;AAChC;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,4CAA4C;AAC5C,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,UAAU,kDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC4B;;;;;;;;;;;;;ACpJ5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AAChB;AACU;AACV;AACI;AACc;AACR;AACvC,gCAAgC,gEAAY;AAC5C;AACA;AACA,4BAA4B;AAC5B,6BAA6B;AAC7B,0BAA0B;AAC1B;AACA;AACA;AACA,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA,uBAAuB;AACvB,+BAA+B;AAC/B,kCAAkC;AAClC,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT,QAAQ,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AACtD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,qBAAqB,0CAAI;AACzB,SAAS;AACT;AACA;AACA,mDAAmD,0CAAI,uBAAuB,0CAAI;AAClF;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oBAAoB,0DAAS;AAC7B;AACA,wBAAwB,4CAAK;AAC7B,QAAQ,kDAAK,sBAAsB,kDAAK;AACxC;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAG;AAC9B;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,UAAU,kDAAK;AAC5B;AACA;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI,mBAAmB,kDAAK;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,aAAa,kDAAK;AAC/B;AACA;AAC6B;;;;;;;;;;;;;AC1M7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AACZ;AACJ;AACa;AACT;AACA;AACjC,2BAA2B,gEAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACzE,6BAA6B,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AAC1E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qDAAqD,0CAAI;AACzD,QAAQ,4CAAK;AACb,QAAQ,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AACtD,YAAY,wCAAG;AACf,SAAS;AACT;AACA;AACA,QAAQ,wDAAO;AACf;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAG;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB,gDAAgD,0CAAI;AACpD;AACA;AACA;AACA,gBAAgB,wCAAG;AACnB,gDAAgD,0CAAI;AACpD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK;AACb,eAAe,4CAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,qDAAM;AACnD,4BAA4B,0CAAI;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,0CAAI,8BAA8B,0CAAI;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4CAAK,OAAO,0CAAI;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,0CAAI;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4CAAK,OAAO,0CAAI;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0CAAI,0BAA0B,MAAM,KAAK,IAAI;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,QAAQ,wCAAG;AACX;AACA;AACA,QAAQ,4CAAK;AACb,QAAQ,4CAAK;AACb;AACA;AACA;AACwB;;;;;;;;;;;;;AC3JxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AAChB;AACU;AACV;AACA;AACI;AACQ;AACD;AACC;AACF;AAC6B;AAC7B;AACG;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AAC7B,2BAA2B,gEAAY;AACvC;AACA;AACA,0CAA0C;AAC1C,6BAA6B;AAC7B,+BAA+B,gFAAgB;AAC/C;AACA,gBAAgB,oDAAM;AACtB;AACA;AACA,mCAAmC,kDAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,gBAAgB,kDAAK,aAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AACtD,YAAY,wCAAG;AACf,SAAS;AACT,QAAQ,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AACtD,YAAY,wCAAG;AACf,SAAS;AACT,QAAQ,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI,kCAAkC,0CAAI;AAC5F,YAAY,wCAAG;AACf,SAAS;AACT;AACA,+BAA+B,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AAC7E,+BAA+B,gFAAgB;AAC/C;AACA;AACA;AACA,YAAY,wCAAG;AACf,YAAY,kDAAK,OAAO,4CAAK;AAC7B,iCAAiC;AACjC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,qBAAqB,0CAAI;AACzB,SAAS;AACT;AACA;AACA,mDAAmD,0CAAI,uBAAuB,0CAAI;AAClF;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,QAAQ,kDAAK;AACb;AACA;AACA,wBAAwB,mDAAK,uCAAuC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sDAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAG,oBAAoB,4CAAK;AACvD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oBAAoB,mDAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,UAAU,kDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG,2BAA2B,4CAAK,oBAAoB,kDAAK;AACrF;AACA;AACA;AACA,2CAA2C,kDAAK;AAChD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,aAAa,mDAAK;AAC/B;AACA;AACA,QAAQ,4CAAK;AACb,QAAQ,4CAAK;AACb,mCAAmC,wCAAG;AACtC;AACA;AACwB;;;;;;;;;;;;;AC/PxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACE;AACQ;AACE;AACR;AACA;AACjC;AACA;AACA;AACA,yBAAyB;AACzB;AACA,+BAA+B,kDAAQ,eAAe,kDAAQ;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,0CAAI;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,oDAAM;AAClB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA,QAAQ,oDAAM;AACd,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAAK;AACzB;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAAK;AACzB;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA,iDAAiD,kDAAQ;AACzD;AACA;AACA;AACA;;;;;;;;;;;;;ACxEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACE;AACY;AACH;AACH;AACV;AACU;AACvC,uCAAuC,gEAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,kDAAK;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoC;;;;;;;;;;;;;ACrHpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AACH;AACb;AACU;AACV;AACI;AACjC,+BAA+B,gEAAY;AAC3C;AACA;AACA;AACA,2BAA2B;AAC3B,4BAA4B;AAC5B;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,kDAAK;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA,YAAY,wCAAG,KAAK,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC4B;;;;;;;;;;;;;AChH5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AACN;AACuB;AAC7B;AACJ;AACA;AACU;AACvC,4BAA4B,gEAAY;AACxC;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,YAAY,yEAAa;AACzB;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD;AACA;AACA,SAAS;AACT,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB;AACA,gBAAgB,0CAAI;AACpB,qBAAqB,0CAAI;AACzB,SAAS;AACT;AACA;AACA,QAAQ,4CAAK;AACb,QAAQ,4CAAK;AACb,mCAAmC,wCAAG;AACtC;AACA;AACA;AACA;AACA,cAAc,0CAAI;AAClB,cAAc,0CAAI;AAClB,mDAAmD,0CAAI;AACvD;AACA;AACA;AACA,2BAA2B,wCAAG,oBAAoB,4CAAK;AACvD;AACA,6BAA6B,4CAAK;AAClC;AACA;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gBAAgB,kDAAK,aAAa,kDAAK;AACvC;AACA;AACA;AACA,gBAAgB,kDAAK,aAAa,kDAAK;AACvC;AACA,YAAY,kDAAK,UAAU,kDAAK;AAChC;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACyB;;;;;;;;;;;;;AC/FzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AACN;AACN;AACJ;AAC7B,kCAAkC,gEAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA,QAAQ,wDAAO;AACf;AACA,mBAAmB;AACnB;AACA,wBAAwB,wCAAG;AAC3B;AACA;AACA;AACA,iCAAiC,wCAAG;AACpC;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC+B;;;;;;;;;;;;;ACtD/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACE;AACY;AACH;AACH;AACV;AAC7B,mCAAmC,gEAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI;AAC1B;AACA;AACA,SAAS;AACT;AACA,eAAe;AACf;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA,mDAAmD,0CAAI,wBAAwB,0CAAI;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,kDAAK;AACrB,gBAAgB,kDAAK;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACgC;;;;;;;;;;;;;AC/HhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACqD;AACX;AACX;AACc;AACH;AACb;AACU;AACV;AAC2B;AACvB;AACmC;AAC7B;AACsB;AAC7D,kCAAkC,gEAAY;AAC9C;AACA;AACA;AACA;AACA,iCAAiC;AACjC,oCAAoC;AACpC,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mEAAU;AACtB;AACA;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,SAAS,0CAAI;AACrD,sBAAsB,0CAAI,mBAAmB,0CAAI;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,4CAAK,qBAAqB,qDAAM,UAAU,0CAAI;AAC7E,gCAAgC,gFAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,wDAAO;AACf,kBAAkB,0CAAI;AACtB,iBAAiB,0CAAI;AACrB,4BAA4B,cAAc;AAC1C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,0CAAI,uBAAuB,0CAAI;AAClF;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wCAAG,oBAAoB,kDAAK;AACrD;AACA;AACA;AACA;AACA,gBAAgB,mDAAK;AACrB;AACA;AACA;AACA;AACA,wBAAwB,mDAAK;AAC7B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM;AAC5B,gBAAgB,yEAAgB;AAChC;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,QAAQ,wCAAG,KAAK,0CAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAG,KAAK,0CAAI;AAC5B,gBAAgB,yEAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAK,iBAAiB,mDAAK;AACnC,QAAQ,kDAAK,aAAa,mDAAK;AAC/B;AACA;AAC+B;;;;;;;;;;;;;ACpN/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuC;AACQ;AAChB;AACF;AACU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oCAAoC,0CAAI,gBAAgB,GAAG,kBAAkB,GAAG,qBAAqB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAK,yBAAyB,kDAAK,cAAc,kDAAK;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,GAAG;AACvD;AACA,kBAAkB,kDAAQ;AAC1B;AACA;AACA;AACA,mCAAmC,aAAa;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AAC2B;;;;;;;;;;;;;ACnG3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACE;AACF;AACkB;AACA;AACR;AACA;AACA;AACN;AACE;AACkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,gCAAgC;AAChC,uBAAuB,0DAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,gBAAgB;AAC9E,mDAAmD,eAAe;AAClE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA,QAAQ,iEAAY;AACpB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0DAAQ;AAC3B;AACA,6BAA6B,kDAAK;AAClC;AACA,uBAAuB,kDAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kDAAK;AAClB;AACA;AACA;AACA;AACA,iBAAiB,0DAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0DAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAK;AAC1B;AACA,QAAQ,kDAAK,6BAA6B,kDAAK,+CAA+C;AAC9F,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA;AACA,QAAQ,wCAAG,SAAS,0CAAI;AACxB;AACA;AACA;AACA,QAAQ,wCAAG,QAAQ,OAAO,GAAG,MAAM;AACnC;AACA,2BAA2B,mCAAmC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG,QAAQ,OAAO,GAAG,MAAM;AACvC;AACA,QAAQ,wCAAG,SAAS,0CAAI;AACxB,QAAQ,4CAAK,SAAS,0CAAI;AAC1B,QAAQ,8CAAM,SAAS,0CAAI;AAC3B,mBAAmB,0CAAI;AACvB,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,kDAAK;AACnC,YAAY,8CAAM;AAClB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,8CAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA,aAAa;AACb;AACA,qBAAqB,kDAAK;AAC1B;AACA,QAAQ,kDAAK,kCAAkC,OAAO;AACtD;AACA;AACA;AACyB;;;;;;;;;;;;;AChRzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC6B;AACA;AACE;AACQ;AACwB;AACnB;AACF;AACM;AACD;AACC;AACT;AACvC;AACA;AACA;AACA;AACA,uBAAuB;AACvB,4BAA4B;AAC5B,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,wCAAG,oBAAoB,wCAAG;AACnC;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,QAAQ,wDAAW;AACnB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG,OAAO,0CAAI;AAC1B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA,gCAAgC,4DAAa;AAC7C;AACA;AACA;AACA;AACA,aAAa,EAAE,0CAAI;AACnB;AACA;AACA,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,4DAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,0DAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qDAAM,QAAQ,oBAAoB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE,0CAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,gBAAgB,wDAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAW;AAC3B;AACA;AACA,4BAA4B,0DAAQ;AACpC;AACA;AACA;AACA,yCAAyC,0EAAa;AACtD;AACA;AACA,yCAAyC,0EAAa;AACtD;AACA;AACA,yCAAyC,0EAAa;AACtD;AACA;AACA;AACA,gEAAgE,eAAe;AAC/E;AACA;AACA;AACA;AACA,wBAAwB,wCAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qDAAM;AAC3C;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB,EAAE,0CAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,mDAAK;AACvC,qCAAqC,qDAAM;AAC3C;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB,EAAE,0CAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoB;;;;;;;;;;;;;AClOpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC6B;AACI;AACM;AACV;AACE;AACW;AACK;AACC;AACJ;AACM;AACF;AACM;AACF;AAClB;AACO;AACC;AACT;AACM;AACJ;AACnC;AACA;AACA,wBAAwB;AACxB;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B,8BAA8B;AAC9B,4BAA4B;AAC5B;AACA;AACA;AACA,0BAA0B;AAC1B,2BAA2B;AAC3B;AACA;AACA;AACA,YAAY,6DAAa;AACzB;AACA,YAAY,mEAAgB;AAC5B;AACA,YAAY,mDAAK;AACjB;AACA,gBAAgB,iEAAe;AAC/B;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAG;AACnB;AACA;AACA;AACA;AACA,gBAAgB,wCAAG,UAAU,YAAY,yBAAyB,QAAQ;AAC1E,gBAAgB,wCAAG;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wCAAG,OAAO,0CAAI;AAC9B;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC,YAAY,wCAAG,SAAS,0CAAI;AAC5B,YAAY,6CAAK,SAAS,0CAAI;AAC9B,SAAS;AACT;AACA,6BAA6B,GAAG,KAAK,QAAQ,MAAM;AACnD;AACA,YAAY,0DAAQ,wBAAwB,GAAG;AAC/C,aAAa,0DAAQ,wBAAwB,OAAO;AACpD,gBAAgB,0DAAQ,wBAAwB,MAAM;AACtD;AACA;AACA;AACA,YAAY,+CAAM,OAAO,0CAAI;AAC7B,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA;AACA,UAAU,0CAAI,+DAA+D;;AAE7E;AACA,oEAAoE,qDAAM,SAAS,KAAK,0CAAI,iBAAiB;AAC7G,oEAAoE,qDAAM,WAAW,KAAK,0CAAI,iBAAiB;AAC/G,mEAAmE,qDAAM,QAAQ,KAAK,0CAAI,iBAAiB;AAC3G,8DAA8D,qDAAM,UAAU,KAAK,0CAAI,kBAAkB;AACzG;AACA;AACA,YAAY,0CAAI,iBAAiB;AACjC,gCAAgC,0CAAI,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA,uBAAuB,4CAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,YAAY,wCAAG;AACf,SAAS;AACT;AACA;AACA;AACA,YAAY,qDAAM;AAClB;AACA;AACA,YAAY,kDAAK;AACjB,mBAAmB,wDAAW;AAC9B;AACA;AACA,yCAAyC,kDAAK;AAC9C;AACA;AACA;AACA,YAAY,qDAAM;AAClB;AACA;AACA;AACA,YAAY,0DAAQ;AACpB,YAAY,qDAAM;AAClB,YAAY,qDAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+CAAM;AAClC;AACA;AACA,YAAY,8DAAc;AAC1B;AACA;AACA;AACA;AACA,YAAY,8DAAc;AAC1B;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,QAAQ,wCAAG;AACX;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA,8BAA8B,0CAAI;AAClC,QAAQ,wCAAG,SAAS,0CAAI;AACxB;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qDAAM;AACtB;AACA,sCAAsC,0CAAI;AAC1C,gBAAgB,wCAAG,SAAS,0CAAI;AAChC,gBAAgB,wCAAG;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA,8BAA8B,0CAAI;AAClC,QAAQ,wCAAG,OAAO,0CAAI;AACtB;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAK;AACnC;AACA;AACA;AACA;AACA;AACA,oDAAoD,kDAAK;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,0DAAQ;AAClC;AACA,wBAAwB,sDAAM;AAC9B;AACA;AACA,0BAA0B,sDAAM;AAChC;AACA;AACA,oCAAoC;AACpC;AACA;AACA,YAAY,kDAAK;AACjB,0BAA0B,kDAAK;AAC/B;AACA;AACA,QAAQ,wDAAW;AACnB;AACA;AACA;AACA,sBAAsB,8DAAc;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAQ;AACxB;AACA;AACA;AACA,0BAA0B,8DAAc;AACxC,wBAAwB,gBAAgB,KAAK,kDAAK,eAAe;AACjE,QAAQ,wCAAG;AACX;AACA,QAAQ,wDAAW;AACnB;AACA,kCAAkC,0CAAI;AACtC;AACA;AACA,gCAAgC,kDAAK;AACrC;AACA;AACA,gBAAgB,wCAAG;AACnB,aAAa;AACb;AACA,kCAAkC,0CAAI,kBAAkB,qDAAM;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,kDAAK;AAC/D;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,mCAAmC,qDAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjYA;AAAA;AAAA;AAAA;AAA6B;AACU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,wCAAG,mBAAmB,wCAAG;AAC9C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,gCAAgC,kDAAK;AACrC;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC0B;;;;;;;;;;;;;ACnE1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiC;AACM;AACA;AACR;AACQ;AACN;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,YAAY,kDAAK;AACjB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA,2BAA2B,kDAAK;AAChC,uDAAuD,kDAAQ;AAC/D;AACA;AACA;AACA;AACA,qBAAqB,4CAAK;AAC1B,QAAQ,kDAAK;AACb;AACA;AACA;;;;;;;;;;;;;ACpCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACI;AACM;AACR;AACQ;AACN;AACjC;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,kDAAK;AACjB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,2BAA2B;AACvE;AACA;AACA,QAAQ,kDAAK,6BAA6B,kDAAK,kBAAkB,4CAAK,iBAAiB,GAAG,kDAAK,6BAA6B;AAC5H,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACI;AACF;AACW;AACH;AACA;AACQ;AACd;AACM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,kDAAK;AACjB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAK;AACzB;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,kCAAkC,kDAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qDAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0DAAS;AAC7B;AACA;AACA,sBAAsB,4CAAK;AAC3B;AACA;AACA;AACA;AACA,4BAA4B,kDAAK,2BAA2B,GAAG,kDAAK,6BAA6B;AACjG,QAAQ,kDAAK;AACb,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA;;;;;;;;;;;;;AC/KA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACE;AACQ;AACE;AACF;AACN;AACE;AACO;AAC1C;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC,gBAAgB,oDAAM;AACtB,gBAAgB,4CAAK,OAAO,0CAAI;AAChC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kCAAkC,kDAAK;AACvC,mBAAmB,8CAAM;AACzB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mBAAmB,4CAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4CAAK;AAC5B;AACA;AACA;AACA;AACA;AACA,gCAAgC,qDAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8CAAM,SAAS,0CAAI;AAC/B;AACA;AACA;AACA;AACA,QAAQ,kDAAK;AACb;AACA,YAAY,kDAAK;AACjB;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,8CAAM,SAAS,0CAAI;AAC3B;AACA;AACA;;;;;;;;;;;;;AC5EA;AAAA;AAAA;AAAuC;AACvC;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAK;AACjC;AACA;AACA;AACA;AACA,aAAa;AACb,+EAA+E,QAAQ;AACvF;AACA;AACA;AACA,aAAa;AACb,2BAA2B,kDAAK;AAChC,+DAA+D,mBAAmB;AAClF;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACoB;;;;;;;;;;;;;ACpCpB;AAAA;AAAA;AAAA;AAA+C;AACT;AACtC;AACA,mCAAmC,0DAAQ;AAC3C;AACA,sCAAsC,0DAAQ;AAC9C;AACA,eAAe,kDAAQ,YAAY,0DAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACyB;;;;;;;;;;;;;ACtBzB;AAAA;AAAA;AAAA;AAAA;AAAA;AACuC;AACN;AACF;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0CAAI,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kDAAK;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kDAAK;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mCAAmC,GAAG,kCAAkC;AAC9F;AACA;AACA;AACA,sBAAsB,kCAAkC,GAAG,iCAAiC;AAC5F;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACuB;;;;;;;;;;;;;ACpHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACA;AACE;AACQ;AACE;AACS;AACH;AACZ;AACI;AACvC;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,mCAAmC;AACnC,mCAAmC;AACnC,uCAAuC;AACvC,uBAAuB;AACvB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,mCAAmC;AACnC,uBAAuB,0DAAS;AAChC;AACA;AACA;AACA,aAAa,kDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,mDAAmD,eAAe;AAClE,qDAAqD,eAAe;AACpE;AACA;AACA;AACA;AACA,iBAAiB;AACjB,mDAAmD,eAAe;AAClE;AACA;AACA;AACA;AACA,iBAAiB;AACjB,qDAAqD,eAAe;AACpE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,YAAY,oDAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG,SAAS,0CAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA;AACA,oBAAoB,kDAAK;AACzB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,8DAAc;AAC1B;AACA,QAAQ,kDAAK;AACb;AACA;AACA,QAAQ,wCAAG,SAAS,0CAAI;AACxB;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA,qBAAqB,wCAAG,mBAAmB,wCAAG;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,8DAAc,uBAAuB,kDAAK;AAC9D;AACA;AACA,gBAAgB,wCAAG,SAAS,0CAAI;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAK;AAC/B;AACA;AACA;AACA;AACA;AACA,4BAA4B,8DAAc;AAC1C;AACA;AACA,gBAAgB,wCAAG,SAAS,0CAAI;AAChC,aAAa;AACb;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA,6BAA6B,wCAAG,wBAAwB,wCAAG;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8DAAc;AAC1C;AACA;AACA;AACA,oBAAoB,8DAAc,uBAAuB,kDAAK;AAC9D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kDAAK;AACzC;AACA;AACA;AACA;AACA,sBAAsB,kDAAK;AAC3B;AACA;AACA;AACA;AACA,iDAAiD;AACjD,6BAA6B;AAC7B;AACA,2CAA2C,kDAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wCAAG;AAC3B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8CAAM,SAAS,0CAAI;AAC3B;AACA;AACA;AACkB;;;;;;;;;;;;;AC9TlB;AAAA;AAAA;AAAA;AAA6B;AACE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA,8BAA8B,0CAAI;AAClC;AACA;AACA,SAAS;AACT;AACA;AAC4B;;;;;;;;;;;;;ACnB5B;AAAA;AAAA;AAAA;AAA6B;AACE;AAC/B;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,0CAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACyB;;;;;;;;;;;;;ACvCzB;AAAA;AAAA;AAAuC;AACV;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB;AACvB;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf;AACA;AACA;AACA,aAAa;AACb;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAQ;AACpB,YAAY,kDAAQ;AACpB,YAAY,kDAAQ;AACpB;AACA;AACA,iCAAiC,kDAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,gCAAgC,IAAI,GAAG,eAAe;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B,+BAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;;;;;;AC5IA;AAAA;AAAA;AAAuC;AACvC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAK;AAC7B;AACA;AACA;AACA;AACA,0DAA0D,IAAI;AAC9D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAK;AAC7B;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC,6BAA6B,aAAa;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,4CAA4C;AAC5C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AAC8B;;;;;;;;;;;;;AC7F9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiC;AACJ;AACE;AACQ;AACqB;AAC/B;AACI;AACA;AACE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wDAAwD,0CAAI,eAAe;AAC3E;AACA,yDAAyD,0CAAI,eAAe;AAC5E;;AAEA;AACA;AACA;AACA,yCAAyC,0CAAI,iBAAiB;AAC9D,qFAAqF,0CAAI,kBAAkB;AAC3G;;AAEA;AACA;AACA,sFAAsF,0CAAI,qBAAqB;AAC/G;;AAEA;AACA,gEAAgE,0CAAI,eAAe;AACnF;AACA;AACA;AACA;;;AAGA,mEAAmE,0CAAI,eAAe;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,oEAAU;AAClB;AACA;AACA,cAAc,0CAAI;AAClB,cAAc,0CAAI;AAClB;AACA;AACA,eAAe,0DAAQ;AACvB;AACA;AACA;AACA,oBAAoB,4CAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4CAAK,OAAO,0CAAI;AAChC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA,yCAAyC,IAAI;AAC7C;AACA,uCAAuC,0CAAI,iBAAiB;AAC5D,yEAAyE,IAAI,WAAW,IAAI;AAC5F;;AAEA;AACA;AACA,0EAA0E,IAAI,WAAW,gBAAgB;AACzG;;AAEA;;AAEA,oEAAoE,IAAI,WAAW,0CAAI,eAAe;AACtG;AACA;AACA;AACA;;AAEA,oEAAoE,IAAI,WAAW,0CAAI,eAAe;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,IAAI;AACtF,kFAAkF,IAAI;AACtF,6EAA6E,IAAI;AACjF,+EAA+E,IAAI;AACnF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,wCAAG;AACjC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gBAAgB,oEAAU;AAC1B;AACA,0FAA0F,SAAS;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAK;AAC1B;AACA,YAAY,8CAAM,OAAO,0CAAI;AAC7B;AACA;AACA;AACA;AACA,YAAY,8CAAM,OAAO,0CAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,oEAAU;AAClB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B;AACA;AACA,QAAQ,oEAAU;AAClB,kFAAkF,OAAO;AACzF;AACA,yBAAyB,sBAAsB;AAC/C;AACA,YAAY,4CAAK,SAAS,0CAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,oEAAU;AAClB,kFAAkF,IAAI;AACtF;AACA;AACA;AACA,yBAAyB,0DAAQ;AACjC;AACA;AACA,kCAAkC,0DAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoC;;;;;;;;;;;;;ACzUpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+B;AACF;AACA;AACY;AACM;AACW;AAC5B;AACwC;AACnC;AACnC;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAM;AAClB,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB,aAAa,0DAAQ;AACrB,aAAa,0DAAQ;AACrB,aAAa,0DAAQ;AACrB,6BAA6B,0CAAI;AACjC;AACA;AACA,SAAS,0DAAQ,wBAAwB,0CAAI;AAC7C,SAAS,0DAAQ,wBAAwB,0CAAI;AAC7C,SAAS,0DAAQ,wBAAwB,0CAAI;AAC7C,SAAS,0DAAQ,wBAAwB,0CAAI;AAC7C;AACA,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA;AACA;AACA;AACA,aAAa,0DAAQ,iBAAiB,0DAAQ,aAAa,0DAAQ;AACnE,6BAA6B,0CAAI;AACjC;AACA;AACA,SAAS,0DAAQ,0BAA0B,0CAAI;AAC/C,SAAS,0DAAQ;AACjB,SAAS,0DAAQ;AACjB;AACA,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA;AACA;AACA;AACA,SAAS,0DAAQ,4BAA4B,0CAAI;AACjD,SAAS,0DAAQ,2BAA2B,0CAAI;AAChD;AACA,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ,kBAAkB,0DAAQ;AAC/C,6BAA6B,0CAAI;AACjC;AACA;AACA,SAAS,0DAAQ,2BAA2B,0CAAI;AAChD,SAAS,0DAAQ,gCAAgC,0CAAI;AACrD;AACA,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ,uBAAuB,0DAAQ;AACpD,6BAA6B,0CAAI;AACjC;AACA;AACA,SAAS,0DAAQ,gCAAgC,0CAAI;AACrD,SAAS,0DAAQ,6BAA6B,0CAAI;AAClD;AACA,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,YAAY,0DAAQ;AACpB,YAAY,wCAAG,SAAS,0CAAI,4BAA4B,0DAAQ;AAChE;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,YAAY,0DAAQ;AACpB,YAAY,wCAAG,SAAS,0CAAI,4BAA4B,0DAAQ;AAChE;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,YAAY,0DAAQ,aAAa,0DAAQ;AACzC,0BAA0B,0DAAQ;AAClC,8BAA8B,0CAAI;AAClC,8BAA8B,0CAAI;AAClC,4BAA4B,0CAAI,eAAe,GAAG,0DAAQ,kBAAkB,GAAG,0DAAQ,UAAU,GAAG,MAAM,GAAG,0CAAI,eAAe,GAAG,0DAAQ,kBAAkB,GAAG,0DAAQ,WAAW;AACnL,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,oBAAoB,0DAAQ;AAC5B,oBAAoB,0DAAQ;AAC5B,wBAAwB,0DAAQ;AAChC;AACA,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA;AACA,YAAY,wCAAG,SAAS,0CAAI;AAC5B;AACA,4BAA4B,0DAAQ;AACpC,YAAY,wCAAG,YAAY,0CAAI,mBAAmB,MAAM,QAAQ;AAChE;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,qBAAqB,0DAAQ;AAC7B;AACA,YAAY,wCAAG,SAAS,0CAAI,wBAAwB,0CAAI;AACxD;AACA;AACA,YAAY,wCAAG,SAAS,0CAAI,wBAAwB,0CAAI;AACxD;AACA;AACA,YAAY,wCAAG,SAAS,0CAAI,wBAAwB,0CAAI;AACxD;AACA;AACA;AACA,YAAY,wCAAG,SAAS,0CAAI,oBAAoB,0DAAQ;AACxD;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,QAAQ,wCAAG,eAAe,0DAAQ,SAAS,GAAG,0DAAQ,cAAc;AACpE;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,kBAAkB,0DAAQ,yBAAyB,0DAAQ;AAC3D;AACA;AACA;AACA;AACA,mCAAmC,0DAAQ;AAC3C,iCAAiC,0DAAQ;AACzC,YAAY,wCAAG,YAAY,0CAAI,iBAAiB,IAAI,MAAM,KAAK,IAAI;AACnE;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,QAAQ,wCAAG,kBAAkB,0DAAQ,SAAS,QAAQ,0DAAQ,SAAS;AACvE;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,0BAA0B,0DAAQ;AAClC;AACA,wCAAwC,0CAAI;AAC5C;AACA;AACA,YAAY,0DAAQ;AACpB,YAAY,wCAAG,SAAS,0CAAI,4BAA4B,0DAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAAQ;AAC/B;AACA,uBAAuB,0DAAQ;AAC/B;AACA,uBAAuB,0DAAQ;AAC/B;AACA,uBAAuB,0DAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAAQ;AAC/B;AACA,uBAAuB,0DAAQ;AAC/B;AACA,uBAAuB,0DAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0DAAQ;AAC3B;AACA;AACA,mBAAmB,0DAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,0DAAQ,iBAAiB,0DAAQ;AACzD;AACA;AACA;AACA,6BAA6B,sEAAkB;AAC/C,2BAA2B,0DAAQ;AACnC,wBAAwB,0DAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAQ,sBAAsB,0DAAQ;AAClD;AACA;AACA,aAAa,0DAAQ,sBAAsB,0DAAQ;AACnD;AACA;AACA;AACA,iBAAiB,0DAAQ,uBAAuB,0DAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,0DAAQ;AAC1C;AACA;AACA;AACA,mCAAmC,0DAAQ,qBAAqB,0DAAQ;AACxE;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,wCAAwC,0DAAQ;AAChD;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB,YAAY,0DAAQ;AACpB;AACA;AACA;AACA;AACA;AACA,yBAAyB,0DAAQ;AACjC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0DAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB,YAAY,0DAAQ;AACpB;AACA;AACA;AACA;AACA,4BAA4B,0DAAQ;AACpC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,0DAAQ;AACjC,0BAA0B,0DAAQ;AAClC;AACA;AACA;AACA;AACA,YAAY,0DAAQ;AACpB;AACA,gBAAgB,0DAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,0DAAQ;AACzB;AACA,gBAAgB,0DAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0DAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAQ;AACpB;AACA;AACA,iBAAiB,0DAAQ;AACzB;AACA;AACA,iBAAiB,0DAAQ;AACzB;AACA;AACA;AACA,qCAAqC,0DAAQ;AAC7C;AACA;AACA;AACA;AACA,iCAAiC,0DAAQ;AACzC;AACA;AACA,sBAAsB,0DAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA,qCAAqC,0DAAQ;AAC7C,iCAAiC,0DAAQ;AACzC;AACA;AACA;AACA;AACA,aAAa,oDAAM;AACnB;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA,gBAAgB,0DAAQ;AACxB;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA,wBAAwB,0DAAQ,+BAA+B,0DAAQ;AACvE;AACA;AACA;AACA;AACA;AACA,uBAAuB,0CAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,0CAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,gBAAgB,kFAAwB;AACxC;AACA;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,8CAAM;AACd;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACkB;;;;;;;;;;;;;AC1mBlB;AAAA;AAAA;AAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,wCAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACgB;;;;;;;;;;;;;AC9ChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACE;AACQ;AACA;AACG;AACT;AACA;AACjC;AACA;AACA;AACA;AACA,QAAQ,4CAAK;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,0CAAI;AAC3C;AACA;AACA,2CAA2C,0CAAI;AAC/C,aAAa;AACb,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,sCAAsC,0CAAI,eAAe;AACzD,+BAA+B,0CAAI,iBAAiB;AACpD;AACA;AACA,0CAA0C,0CAAI,eAAe;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK,iBAAiB,qDAAM;AACxC,4DAA4D;AAC5D;AACA;AACA,aAAa;AACb;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,2BAA2B,0CAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,4CAAK,OAAO,0CAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuC;AACV;AACU;AACR;AACW;AACT;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA,YAAY,kDAAK;AACjB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA;AACA,uBAAuB,kDAAK;AAC5B,uBAAuB,YAAY;AACnC,yBAAyB,kDAAK;AAC9B;AACA;AACA;AACA,6BAA6B,kDAAQ;AACrC;AACA;AACA;AACA,+BAA+B,YAAY,IAAI,SAAS;AACxD;AACA;AACA;AACA,+BAA+B,SAAS;AACxC;AACA,yBAAyB,qDAAM;AAC/B;AACA,kEAAkE,YAAY;AAC9E;AACA;AACA,+BAA+B,YAAY;AAC3C;AACA;AACA;AACA,4DAA4D,IAAI;AAChE;AACA;AACA;AACA,4DAA4D,IAAI;AAChE;AACA;AACA;AACA;AACA,qDAAqD,gBAAgB,IAAI,aAAa;AACtF;AACA;AACA,qDAAqD,aAAa;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA,mBAAmB,0CAAI;AACvB,SAAS;AACT;AACA;AACA;;;;;;;;;;;;;AC1EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuC;AACV;AACE;AACgB;AACd;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA,YAAY,kDAAK;AACjB,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA,qBAAqB,0DAAQ;AAC7B,6BAA6B,kDAAK;AAClC;AACA;AACA,QAAQ,wCAAG;AACX;AACA,mBAAmB,0CAAI;AACvB,SAAS;AACT;AACA;AACA;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACE;AACF;AACI;AACM;AACN;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4CAAK,OAAO,0CAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,yBAAyB,KAAK,mBAAmB;AACxG;AACA;AACA,iCAAiC,wCAAG;AACpC;AACA;AACA,iCAAiC,wCAAG;AACpC;AACA;AACA;AACA;AACA,0BAA0B,4CAAK;AAC/B;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,MAAM,KAAK,yBAAyB;AAC/F,sBAAsB,kDAAQ;AAC9B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX,QAAQ,4CAAK;AACb;AACA;AAC4B;;;;;;;;;;;;;ACvG5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACI;AACA;AACA;AACjC;AACA;AACA;AACA,8BAA8B;AAC9B,6BAA6B;AAC7B,0BAA0B;AAC1B,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,YAAY,wCAAG,iBAAiB,4CAAK;AACrC,YAAY,wCAAG,iBAAiB,4CAAK;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,wCAAG,2DAA2D,4CAAK;AACjF;AACA;AACA,sCAAsC,cAAc,KAAK,uBAAuB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4CAAK;AACjB;AACA;AACA;AAC2B;;;;;;;;;;;;;AClG3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC6B;AACE;AACW;AACT;AACQ;AACZ;AACM;AACI;AACvC;AACA;AACA,gCAAgC;AAChC,mCAAmC;AACnC,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,yCAAyC,GAAG;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,EAAE;AACtD;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,QAAQ,0CAAI;AACpD,sBAAsB,0CAAI;AAC1B;AACA,gBAAgB,oDAAM;AACtB,gBAAgB,8CAAM,OAAO,0CAAI;AACjC;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA,SAAS;AACT;AACA;AACA,kDAAkD,EAAE;AACpD;AACA,QAAQ,4CAAK,qBAAqB,qDAAM,QAAQ,0CAAI;AACpD,sBAAsB,0CAAI;AAC1B;AACA,gBAAgB,oDAAM;AACtB,gBAAgB,8CAAM,OAAO,0CAAI;AACjC;AACA;AACA,YAAY,wCAAG;AACf;AACA;AACA,SAAS;AACT;AACA;AACA,2CAA2C,EAAE;AAC7C;AACA,sBAAsB,4CAAK,qBAAqB,qDAAM,QAAQ,0CAAI,+BAA+B,0CAAI;AACrG;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,0CAAI;AAC1C;AACA,gBAAgB,wCAAG;AACnB,aAAa;AACb;AACA;AACA,sCAAsC,0CAAI;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oDAAM;AAC9B,wBAAwB,8CAAM,OAAO,0CAAI;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,QAAQ,wCAAG,SAAS,0CAAI,iBAAiB,kDAAK;AAC9C;AACA;AACuB;;;;;;;;;;;;;ACrKvB;AAAA;AAAA;AAAA;AAAuC;AACV;AAC7B;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,4BAA4B,kDAAQ;AACpC,SAAS;AACT;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA;AACA;AAC0B;;;;;;;;;;;;;ACvB1B;AAAA;AAAA;AAAA;AAAA;AAA6B;AACI;AACA;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ,4CAAK;AACb;AACA;AACA;AACA;AACA;AACA,uBAAuB,4CAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACsB;;;;;;;;;;;;;ACjEtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC6B;AACI;AACF;AACE;AACM;AACA;AACvC;AACA;AACA,+CAA+C;AAC/C,uCAAuC;AACvC,0CAA0C;AAC1C,uCAAuC;AACvC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,aAAa,4CAAK;AAClB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0CAAI;AACxB;AACA;AACA;AACA,kCAAkC,4CAAK,gBAAgB,4CAAK;AAC5D;AACA,oBAAoB,wCAAG;AACvB,oBAAoB,wCAAG;AACvB;AACA;AACA;AACA,kCAAkC,4CAAK,gBAAgB,4CAAK;AAC5D;AACA;AACA;AACA;AACA,cAAc,kDAAQ,eAAe,4CAAK;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG,mBAAmB,4CAAK;AACnC;AACA;AACA;AACA;AACA;AACA,iDAAiD,kBAAkB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,4CAAK,cAAc;AACpE;AACA;AACA,8DAA8D,4CAAK,eAAe;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,cAAc;AACrB;AACA,KAAK;AACL,QAAQ,kDAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACyB;;;;;;;;;;;;;AClMzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+B;AACF;AACA;AACI;AACJ;AACkB;AACR;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA,uBAAuB,4CAAK;AAC5B,kCAAkC,wCAAG;AACrC,iDAAiD;AACjD,uDAAuD;AACvD;AACA;AACA,2BAA2B,0DAAO;AAClC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wBAAwB,sBAAsB,GAAG,OAAO;AACxD,QAAQ,kDAAK;AACb,QAAQ,wCAAG,gBAAgB,0CAAI;AAC/B,QAAQ,wCAAG;AACX;AACA;AACA;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+B;AACF;AACA;AACI;AACJ;AACU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA,uBAAuB,4CAAK;AAC5B,kCAAkC,wCAAG;AACrC,iDAAiD;AACjD,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sBAAsB,GAAG,OAAO,UAAU,IAAI;AACtE,QAAQ,kDAAK;AACb,QAAQ,wCAAG,gBAAgB,0CAAI;AAC/B,QAAQ,wCAAG;AACX;AACA;AACA;;;;;;;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+B;AACF;AACA;AACI;AACJ;AACU;AACN;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA,uBAAuB,4CAAK;AAC5B,kCAAkC,wCAAG;AACrC;AACA;AACA,mBAAmB,4CAAK,OAAO,0CAAI;AACnC;AACA;AACA;AACA,mBAAmB,4CAAK,OAAO,0CAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sBAAsB,GAAG,OAAO,SAAS,IAAI;AACrE,QAAQ,kDAAK;AACb,QAAQ,wCAAG,gBAAgB,0CAAI;AAC/B,QAAQ,wCAAG;AACX;AACA;AACA;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACU;AACQ;AACT;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,uBAAuB,0DAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,kDAAK;AACnB,+CAA+C,IAAI;AACnD;AACA;AACA;AACA;AACA,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA;AACA,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA,iCAAiC,kDAAQ;AACzC;AACA;AACA,4CAA4C,kDAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACc;;;;;;;;;;;;;AC/Gd;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC8B;;;;;;;;;;;;;ACrD9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACI;AACS;AACX;AACO;AACY;AACjB;AACa;AACP;AACvC;AACA;AACA;AACA,mDAAmD;AACnD,qDAAqD;AACrD,mDAAmD;AACnD,oBAAoB,4CAAK,iBAAiB,kDAAQ;AAClD,QAAQ,4CAAK;AACb;AACA;AACA;AACA;AACA,YAAY,8DAAc;AAC1B,gCAAgC,0DAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,QAAQ,4CAAK,sBAAsB,qDAAM,UAAU,0CAAI;AACvD,YAAY,wCAAG;AACf,SAAS;AACT;AACA,YAAY,kDAAK;AACjB;AACA,YAAY,4CAAK,wBAAwB,qDAAM,UAAU,0CAAI;AAC7D,gBAAgB,wCAAG;AACnB,aAAa;AACb;AACA,YAAY,4CAAK,wBAAwB,qDAAM,UAAU,0CAAI;AAC7D,gBAAgB,wCAAG;AACnB,aAAa;AACb;AACA,YAAY,4CAAK,wBAAwB,qDAAM,UAAU,0CAAI;AAC7D,gBAAgB,wCAAG;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,0CAAI;AACtD;AACA,wBAAwB,wCAAG;AAC3B;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6CAA6C,kDAAK;AAClD;AACA;AACA;AACA,6CAA6C,kDAAK;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,SAAS;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,aAAa;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACgB;;;;;;;;;;;;;ACxOhB;AAAA;AAAA;AAAA;AAA0C;AACX;AACxB;AACP;AACA;AACA;AACA,0DAA0D,0CAAI,eAAe,kCAAkC,0CAAI,eAAe;AAClI;AACA;AACA;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,sBAAsB,IAAI,0CAAI,mBAAmB;AAC/G;AACA;AACA,mCAAmC,0CAAI,eAAe,MAAM;AAC5D;AACA;AACA,mCAAmC,0CAAI,eAAe,MAAM;AAC5D;AACA;AACA,mCAAmC,0CAAI,eAAe,MAAM;AAC5D;AACA;AACA,mCAAmC,0CAAI,eAAe,MAAM;AAC5D;;AAEA;AACA,0DAA0D,0CAAI,sBAAsB,IAAI,0CAAI,mBAAmB;AAC/G;AACA;AACA,kCAAkC,0CAAI,gBAAgB,MAAM;AAC5D;AACA;AACA,sCAAsC;AACtC;AACA;AACA,wCAAwC;AACxC;;AAEA;AACA,0DAA0D,0CAAI,sBAAsB,IAAI,0CAAI,mBAAmB;AAC/G;AACA;AACA,2CAA2C,0CAAI,gBAAgB,MAAM;AACrE;AACA;AACA,wCAAwC,0CAAI,gBAAgB,MAAM;AAClE;;AAEA;AACA,0DAA0D,0CAAI,sBAAsB,IAAI,0CAAI,mBAAmB;AAC/G;AACA;AACA,sCAAsC,0CAAI,iBAAiB,MAAM;AACjE;AACA;AACA,2CAA2C,0CAAI,iBAAiB,MAAM;AACtE;;AAEA;AACA,0DAA0D,0CAAI,sBAAsB,IAAI,0CAAI,mBAAmB;AAC/G;AACA;AACA,uCAAuC,0CAAI,iBAAiB,MAAM;AAClE;AACA;AACA,sCAAsC,0CAAI,iBAAiB,MAAM;AACjE;;AAEA;AACA,0DAA0D,0CAAI,+BAA+B,0CAAI,kBAAkB,KAAK,0CAAI,mBAAmB;AAC/I;AACA;AACA;AACA,QAAQ,0CAAI,oBAAoB;AAChC;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,sBAAsB,IAAI,0CAAI,mBAAmB;AAC/G;AACA;AACA;AACA,cAAc,0CAAI,gBAAgB,MAAM;AACxC;AACA,cAAc,0CAAI,gBAAgB,MAAM;AACxC,uFAAuF,qDAAM,oBAAoB;AACjH,cAAc,0CAAI,eAAe;AACjC,0DAA0D,0CAAI,sBAAsB;AACpF,QAAQ,0CAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,wBAAwB,IAAI,0CAAI,mBAAmB;AACjH;AACA;AACA;AACA;AACA;AACA,6BAA6B,0CAAI,eAAe,MAAM;;AAEtD;AACA;AACA,6BAA6B,0CAAI,eAAe,MAAM;;AAEtD;AACA;AACA,6BAA6B,0CAAI,gBAAgB,MAAM;;AAEvD;AACA;AACA,6BAA6B,0CAAI,kBAAkB;AACnD;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,yBAAyB,GAAG,0CAAI,sBAAsB,IAAI,0CAAI,sBAAsB;AAClJ;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,OAAO;;AAEhD;AACA;AACA,4CAA4C;;AAE5C;AACA;AACA,yCAAyC,OAAO;;AAEhD;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,qBAAqB,IAAI,0CAAI,mBAAmB,MAAM,MAAM;AAC1H;AACA;AACA;AACA;AACA;AACA,gCAAgC,0CAAI,eAAe,MAAM;AACzD;AACA;AACA,gCAAgC,0CAAI,eAAe,MAAM;AACzD;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,qBAAqB,IAAI,0CAAI,mBAAmB;AAC9G;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,uBAAuB,IAAI,0CAAI,oBAAoB;AACjH;AACA;AACA;AACA;AACA;AACA,oCAAoC,0CAAI,eAAe,MAAM;AAC7D;AACA;AACA,oCAAoC,0CAAI,eAAe,MAAM;AAC7D;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,uBAAuB,IAAI,0CAAI,oBAAoB;AACjH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,0CAAI,mCAAmC,KAAK,EAAE,GAAG,EAAE,IAAI,0CAAI,iBAAiB;AACtI,8FAA8F,GAAG;AACjG;AACA;AACA;AACA,wBAAwB,GAAG,GAAG,GAAG;AACjC,wBAAwB,KAAK,GAAG,KAAK;AACrC,wBAAwB,QAAQ,GAAG,QAAQ;AAC3C,wBAAwB,MAAM,GAAG,MAAM;AACvC,wBAAwB,QAAQ,GAAG,QAAQ;AAC3C,wBAAwB,KAAK,GAAG,KAAK;AACrC,wBAAwB,eAAe,GAAG,eAAe;AACzD,wBAAwB,iBAAiB,GAAG,iBAAiB;AAC7D,wBAAwB,MAAM,GAAG,MAAM;AACvC,wBAAwB,KAAK,GAAG,KAAK;AACrC,wBAAwB,KAAK,GAAG,KAAK;AACrC,wBAAwB,IAAI,GAAG,IAAI;AACnC,wBAAwB,KAAK,GAAG,KAAK;AACrC,wBAAwB,KAAK,GAAG,KAAK;AACrC,wBAAwB,KAAK,GAAG,KAAK;AACrC,wBAAwB,UAAU,GAAG,UAAU;AAC/C,wBAAwB,GAAG,GAAG,GAAG;AACjC,wBAAwB,aAAa,GAAG,aAAa;AACrD,wBAAwB,aAAa,GAAG,aAAa;AACrD,wBAAwB,OAAO,GAAG,OAAO;AACzC,wBAAwB,MAAM,GAAG,MAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,0CAAI,sBAAsB,SAAS,KAAK,EAAE,GAAG;AACvD;AACA;AACA;AACA,WAAW,0CAAI;AACf;AACA;AACA;AACA;AACA,QAAQ,0CAAI,sBAAsB,SAAS,KAAK,EAAE,GAAG;AACrD;AACA,QAAQ,0CAAI;AACZ;AACA,0BAA0B,GAAG;AAC7B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,KAAK;AAC/B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,QAAQ;AAClC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,MAAM;AAChC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,QAAQ;AAClC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,KAAK;AAC/B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,eAAe;AACzC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,iBAAiB;AAC3C,QAAQ,0CAAI;AACZ;AACA,0BAA0B,MAAM;AAChC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,KAAK;AAC/B,QAAQ,0CAAI,qBAAqB,GAAG,qDAAM;AAC1C;AACA,0BAA0B,KAAK;AAC/B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,IAAI;AAC9B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,KAAK;AAC/B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,KAAK;AAC/B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,KAAK;AAC/B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,UAAU;AACpC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,GAAG;AAC7B,QAAQ,0CAAI;AACZ;AACA,0BAA0B,aAAa;AACvC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,aAAa;AACvC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,OAAO;AACjC,QAAQ,0CAAI;AACZ;AACA,0BAA0B,MAAM;AAChC,QAAQ,0CAAI;AACZ;;AAEA;AACA,0DAA0D,0CAAI,qBAAqB,IAAI,0CAAI,qBAAqB;AAChH;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,uBAAuB,IAAI,0CAAI,qBAAqB;AAClH;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,0BAA0B;AACtE;AACA;;AAEA;AACA;AACA;AACA,wEAAwE,qDAAM,kBAAkB,KAAK,0CAAI,eAAe,MAAM;;AAE9H;AACA;AACA,uEAAuE,qDAAM,kBAAkB,KAAK,0CAAI,eAAe,MAAM;;AAE7H;AACA;AACA,wEAAwE,qDAAM,kBAAkB,KAAK,0CAAI,eAAe,MAAM;;AAE9H;AACA;AACA,uEAAuE,qDAAM,kBAAkB,KAAK,0CAAI,eAAe,MAAM;AAC7H;AACA;;AAEA;AACA,0DAA0D,0CAAI,6BAA6B,IAAI,0CAAI,6BAA6B;AAChI;AACA;AACA;AACA,4BAA4B,0CAAI,qBAAqB;AACrD;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,4BAA4B;AACxE;AACA;AACA;AACA,cAAc,0CAAI,gBAAgB;AAClC,8FAA8F,iBAAiB;AAC/G;AACA;;AAEA;AACA,wCAAwC,0CAAI,wBAAwB;AACpE;AACA;AACA;AACA,cAAc,0CAAI,mBAAmB;AACrC,2GAA2G,gBAAgB;AAC3H,kBAAkB;AAClB,cAAc,0CAAI,kBAAkB;AACpC;AACA;AACA,yCAAyC;AACzC;AACA;AACA,mCAAmC,0CAAI,iBAAiB,MAAM;AAC9D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,iBAAiB,IAAI,0CAAI,mBAAmB;AAC1G;AACA;;AAEA;AACA,0DAA0D,0CAAI,oBAAoB,IAAI,0CAAI,mBAAmB;AAC7G;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,wBAAwB;AACtF,QAAQ,0CAAI,qBAAqB;AACjC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,0DAA0D,0CAAI,wBAAwB,IAAI,0CAAI,mBAAmB;AACjH;AACA;AACA,oCAAoC,0CAAI,sBAAsB,OAAO;AACrE;AACA;AACA,mCAAmC,0CAAI,gBAAgB,OAAO;AAC9D;AACA;AACA,6DAA6D,0CAAI,eAAe,IAAI,0CAAI,iBAAiB,OAAO;AAChH;AACA;AACA,mCAAmC,0CAAI,oBAAoB,OAAO;AAClE;;AAEA;AACA,0DAA0D,0CAAI,wBAAwB,IAAI,0CAAI,sBAAsB;AACpH;AACA,8CAA8C,0CAAI,wBAAwB,KAAK,0CAAI,eAAe;AAClG;;AAEA;AACA,wCAAwC,0CAAI,mBAAmB,2BAA2B;AAC1F;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,4CAA4C;AAC5C;;AAEA;AACA,0DAA0D,0CAAI,wBAAwB,IAAI,0CAAI,sBAAsB;AACpH;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,oBAAoB;AAChE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,iBAAiB;AAC7D;AACA;AACA,iCAAiC,0CAAI,eAAe;AACpD;AACA;AACA;AACA,iCAAiC,0CAAI,eAAe;AACpD;AACA;AACA;AACA;AACA,iCAAiC,0CAAI,eAAe;AACpD;AACA;;AAEA;AACA,0DAA0D,0CAAI,0BAA0B;AACxF,QAAQ,0CAAI,mBAAmB;AAC/B;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA,0DAA0D,0CAAI,uBAAuB;AACrF,QAAQ,0CAAI,oBAAoB;AAChC;AACA;AACA;AACA,kBAAkB,GAAG,0CAAI,eAAe;AACxC;AACA;AACA,8DAA8D,0CAAI,mBAAmB,IAAI,0CAAI,eAAe;AAC5G;AACA;AACA;AACA,8DAA8D,0CAAI,mBAAmB,IAAI,0CAAI,eAAe;AAC5G;AACA,iFAAiF,0CAAI,eAAe;AACpG,iFAAiF,0CAAI,eAAe;AACpG,gFAAgF,0CAAI,eAAe;AACnG;AACA;;AAEA;AACA,0DAA0D,0CAAI,sBAAsB,IAAI,0CAAI,mBAAmB;AAC/G;AACA;AACA;AACA,mGAAmG,0CAAI,sBAAsB;AAC7H;AACA;;AAEA;AACA,wCAAwC,0CAAI,wBAAwB;AACpE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,iBAAiB;;AAE7D;AACA;AACA,+BAA+B,0CAAI,kBAAkB,MAAM;AAC3D;AACA;AACA,+BAA+B,0CAAI,mBAAmB;;AAEtD;;AAEA;AACA;AACA,+BAA+B,0CAAI,eAAe,MAAM;AACxD;AACA;AACA,+BAA+B,0CAAI,gBAAgB;AACnD;;AAEA;AACA,0DAA0D,0CAAI,qBAAqB,IAAI,0CAAI,mBAAmB;AAC9G;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,0BAA0B;AACtE;AACA;;AAEA;AACA,wCAAwC,0CAAI,iBAAiB;AAC7D;AACA;AACA,qCAAqC,0CAAI,eAAe;AACxD;AACA;AACA;AACA,qCAAqC,0CAAI,eAAe;AACxD;AACA;;AAEA;AACA,wCAAwC,0CAAI,iBAAiB;AAC7D,2FAA2F;AAC3F,mEAAmE,0CAAI,eAAe;AACtF;AACA;AACA,cAAc,0CAAI,mBAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,iBAAiB;AAC7D;AACA;AACA,4BAA4B,0CAAI,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,iBAAiB;AAC7D;AACA;;AAEA;;AAEA,qEAAqE,0CAAI,iBAAiB;AAC1F,oEAAoE,0CAAI,eAAe;;AAEvF;AACA,cAAc,0CAAI,iBAAiB,MAAM;AACzC;AACA;AACA,iCAAiC,0CAAI,eAAe;AACpD;AACA;AACA,iCAAiC,0CAAI,eAAe;;AAEpD;AACA,cAAc,0CAAI,iBAAiB,MAAM;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC,0CAAI,iBAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,0CAAI,iBAAiB;AAC7D,2EAA2E,0CAAI,iBAAiB;AAChG,2EAA2E,0CAAI,iBAAiB;AAChG,0EAA0E,0CAAI,iBAAiB;AAC/F;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACU;AACW;AACD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kDAAQ;AACpD,yBAAyB,kDAAQ;AACjC,oBAAoB,4DAAU;AAC9B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,oBAAoB,4DAAU;AAC9B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4DAAU;AACtB,YAAY,4DAAU;AACtB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,YAAY,4DAAU;AACtB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4DAAU;AAC1B,aAAa;AACb;AACA;AACA;AACA;AACA,YAAY,kDAAQ;AACpB,sCAAsC,kDAAQ;AAC9C;AACA;AACA;AACA;AACA,YAAY,kDAAQ;AACpB,oCAAoC,kDAAQ;AAC5C;AACA;AACA;AACA;AACA,YAAY,kDAAQ;AACpB;AACA,yBAAyB,kDAAQ;AACjC,oCAAoC,4DAAU;AAC9C;AACA;AACA;AACA;AACA,qBAAqB,kDAAQ,aAAa,kDAAQ;AAClD;AACA;AACA;AACA;AACA;AACwB;;;;;;;;;;;;;AC1NxB;AAAA;AAAA;AAAA;AAAA;AAAkD;AACG;AACxB;AACI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,YAAY,gEAAY;AACxB;AACA,aAAa;AACb;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC,QAAQ,4DAAU;AAClB;AACA,YAAY,kDAAQ;AACpB;AACA,YAAY,wCAAG;AACf,YAAY,4CAAK;AACjB;AACA;AACA;AACA,YAAY,wCAAG;AACf,YAAY,4CAAK;AACjB;AACA;AACA;AACA;;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAA8B;AAC9B;AACA;AACA;AACA;AACA,yBAAyB,0CAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,GAAG;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACmB;;;;;;;;;;;;;ACpDnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACI;AACF;AACE;AACiB;AACjB;AACjC;AACA;AACA;AACA,wBAAwB;AACxB,2BAA2B;AAC3B;AACA;AACA,wEAAwE,0CAAI,4CAA4C,IAAI,0CAAI,eAAe;AAC/I,sDAAsD,0CAAI,eAAe;AACzE;AACA;AACA;AACA,QAAQ,4CAAK;AACb,qBAAqB,4CAAK;AAC1B,QAAQ,4CAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,gCAAgC,wCAAG;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,YAAY,kDAAQ;AACpB;AACA;AACA;AACA,aAAa,kDAAQ;AACrB,oCAAoC,kDAAQ;AAC5C;AACA,YAAY,4DAAU;AACtB;AACA,QAAQ,4CAAK,SAAS,0CAAI;AAC1B;AACA;AACA,gCAAgC,kDAAQ;AACxC;AACA,QAAQ,4DAAU;AAClB;AACA;AACA;AACA,QAAQ,4DAAU;AAClB;AACA;AACA;AACA,uBAAuB,KAAK,kDAAQ,uBAAuB;AAC3D;AACA,2BAA2B,kDAAQ,mBAAmB;AACtD,oEAAoE,EAAE;AACtE;AACA;AACA;AACA,YAAY,kDAAQ;AACpB,uCAAuC,MAAM,MAAM,MAAM;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC0B;;;;;;;;;;;;;AC5G1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,qEAAqE;AACrE;AAC6B;AACU;AACmB;AACvB;AACO;AACW;AACpB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qDAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAK;AAC7B;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAG;AACnC,iCAAiC,qDAAM;AACvC,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,gEAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAAK;AACzB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mDAAmD,qDAAM;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAK;AAC1B;AACA,QAAQ,kDAAK,mBAAmB,qDAAM;AACtC;AACA;AACA,kCAAkC,kDAAK;AACvC,mBAAmB,8CAAM;AACzB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mBAAmB,8CAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA,QAAQ,8CAAM,UAAU,IAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sEAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG,wBAAwB,0BAA0B;AAC7D;AACA;AACA;AACA;AACA;AACgC;;;;;;;;;;;;;AC5UhC;AAAA;AAAA;AAAA;AAAgC;AACO;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kDAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4CAAK;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC4B;;;;;;;;;;;;;ACrD5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACa;AACK;AACf;AACC;AACjC;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,uCAAuC;AACvC,uCAAuC;AACvC,qBAAqB,4CAAK,mBAAmB;AAC7C,6BAA6B,4CAAK,2BAA2B;AAC7D,6BAA6B,4CAAK,6BAA6B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qDAAM;AACxB;AACA,qCAAqC;AACrC,uCAAuC;AACvC,uCAAuC;AACvC;AACA;AACA;AACA,6BAA6B,4CAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,gBAAgB,4CAAK;AACrB;AACA;AACA;AACA;AACA,0BAA0B,4CAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,mCAAmC,wCAAG;AACtC;AACA;AACA;AACA;AACA;AACA,4BAA4B,0DAAQ;AACpC,gBAAgB,4CAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AAC2B;;;;;;;;;;;;;ACrI3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACV;AACe;AACd;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,qBAAqB,4CAAK,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qDAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,4CAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,GAAG;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4CAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,0DAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,eAAe,GAAG,eAAe;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,eAAe,GAAG,eAAe;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,eAAe;AAC7D,sEAAsE,IAAI,oBAAoB,IAAI;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACyB;;;;;;;;;;;;;ACpJzB;AAAA;AAAA;AAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT;AACA;AACA,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf,YAAY,wCAAG;AACf;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACkB;;;;;;;;;;;;;AC5ElB;AAAA;AAAA;AAAA;AAAA;AAA6B;AACkB;AACd;AACjC;AACA;AACA;AACA,yBAAyB;AACzB,6BAA6B;AAC7B;AACA,gCAAgC;AAChC,8BAA8B;AAC9B,yBAAyB;AACzB,2BAA2B;AAC3B,sBAAsB;AACtB,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAQ,yBAAyB,0DAAQ;AACrD,mBAAmB,0DAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wCAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;AACrD,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,4CAAK;AACxB,qBAAqB,4CAAK;AAC1B;AACA;AACA,gCAAgC,wCAAG;AACnC;AACA,SAAS;AACT,gCAAgC,wCAAG;AACnC,uBAAuB,4CAAK;AAC5B,yBAAyB,4CAAK;AAC9B,SAAS;AACT;AACA;AACA;AACiB;;;;;;;;;;;;;AC7IjB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,2BAA2B;AAC3B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACqB;;;;;;;;;;;;;ACjGrB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACsB;;;;;;;;;;;;;ACxEtB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACqB;;;;;;;;;;;;;AChPrB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACwB;;;;;;;;;;;;;ACjDxB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mCAAmC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,IAAI;AAC/D;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,sCAAsC,2BAA2B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiB;;;;;;;;;;;;;ACpPjB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,gCAAgC;AAChC,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,kCAAkC;AAClC,6BAA6B;AAC7B,6BAA6B;AAC7B,oCAAoC;AACpC,qCAAqC;AACrC,sDAAsD;AACtD,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACmB","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/ts/content.ts\");\n","class API {\r\n    //  get  json \r\n    static sendGetRequest(url) {\r\n        return new Promise((resolve, reject) => {\r\n            fetch(url, {\r\n                method: 'get',\r\n                credentials: 'same-origin',\r\n            })\r\n                .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                else {\r\n                    // \r\n                    reject({\r\n                        status: response.status,\r\n                        statusText: response.statusText,\r\n                    });\r\n                }\r\n            })\r\n                .then((data) => {\r\n                resolve(data);\r\n            })\r\n                .catch((error) => {\r\n                // \r\n                reject(error);\r\n            });\r\n        });\r\n    }\r\n    // \r\n    //  api \r\n    static async getBookmarkData(id, type = 'illusts', tag, offset, hide = false) {\r\n        const url = `https://www.pixiv.net/ajax/user/${id}/${type}/bookmarks?tag=${tag}&offset=${offset}&limit=100&rest=${hide ? 'hide' : 'show'}&rdm=${Math.random()}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static async addBookmark(type, id, tags, hide, token) {\r\n        const restrict = hide ? 1 : 0;\r\n        let body = {};\r\n        if (type === 'illusts') {\r\n            body = {\r\n                comment: '',\r\n                illust_id: id,\r\n                restrict: restrict,\r\n                tags: tags,\r\n            };\r\n        }\r\n        else {\r\n            body = {\r\n                comment: '',\r\n                novel_id: id,\r\n                restrict: restrict,\r\n                tags: tags,\r\n            };\r\n        }\r\n        return fetch(`https://www.pixiv.net/ajax/${type}/bookmarks/add`, {\r\n            method: 'POST',\r\n            credentials: 'same-origin',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json; charset=utf-8',\r\n                'x-csrf-token': token,\r\n            },\r\n            body: JSON.stringify(body),\r\n        });\r\n    }\r\n    // \r\n    static getFollowingList(id, rest = 'show', offset = 0, limit = 100, tag = '', lang = 'zh') {\r\n        const url = `https://www.pixiv.net/ajax/user/${id}/following?offset=${offset}&limit=${limit}&rest=${rest}&tag=${tag}&lang=${lang}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    //  P \r\n    static getMyPixivList(id, offset = 0, limit = 100, lang = 'zh') {\r\n        const url = `https://www.pixiv.net/ajax/user/${id}/mypixiv?offset=${offset}&limit=${limit}&lang=${lang}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getFollowersList(id, offset = 0, limit = 100, lang = 'zh') {\r\n        const url = `https://www.pixiv.net/ajax/user/${id}/followers?offset=${offset}&limit=${limit}&lang=${lang}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getUserProfile(id) {\r\n        // full=1 \r\n        // full=0 \r\n        const url = `https://www.pixiv.net/ajax/user/${id}?full=1`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    //  id \r\n    static async getUserWorksByType(id, type = ['illusts', 'manga', 'novels']) {\r\n        let typeSet = new Set(type);\r\n        let result = [];\r\n        const url = `https://www.pixiv.net/ajax/user/${id}/profile/all`;\r\n        let data = await this.sendGetRequest(url);\r\n        for (const type of typeSet.values()) {\r\n            const idList = Object.keys(data.body[type]);\r\n            for (const id of idList) {\r\n                result.push({\r\n                    type,\r\n                    id,\r\n                });\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    //  tag \r\n    // \r\n    //  tag  tag \r\n    static getUserWorksByTypeWithTag(id, type, tag, offset = 0, limit = 999999) {\r\n        // https://www.pixiv.net/ajax/user/2369321/illusts/tag?tag=Fate/GrandOrder&offset=0&limit=9999999\r\n        const url = `https://www.pixiv.net/ajax/user/${id}/${type}/tag?tag=${tag}&offset=${offset}&limit=${limit}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    //    \r\n    static getArtworkData(id) {\r\n        const url = `https://www.pixiv.net/ajax/illust/${id}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getUgoiraMeta(id) {\r\n        const url = `https://www.pixiv.net/ajax/illust/${id}/ugoira_meta`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getNovelData(id) {\r\n        const url = `https://www.pixiv.net/ajax/novel/${id}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getRelatedData(id) {\r\n        //  18 \r\n        const url = `https://www.pixiv.net/ajax/illust/${id}/recommend/init?limit=18`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    //  50 \r\n    static getRankingData(option) {\r\n        let url = `https://www.pixiv.net/ranking.php?mode=${option.mode}&p=${option.p}&format=json`;\r\n        //  url \r\n        let temp = new URL(url);\r\n        // \r\n        if (option.worksType) {\r\n            temp.searchParams.set('content', option.worksType);\r\n        }\r\n        if (option.date) {\r\n            temp.searchParams.set('date', option.date);\r\n        }\r\n        url = temp.toString();\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    //  id \r\n    static getRecommenderData(id, number) {\r\n        const url = `/rpc/recommender.php?type=illust&sample_illusts=${id}&num_recommendations=${number}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getSearchData(word, type = 'artworks', p = 1, option = {}) {\r\n        //  url\r\n        let url = `https://www.pixiv.net/ajax/search/${type}/${encodeURIComponent(word)}?word=${encodeURIComponent(word)}&p=${p}`;\r\n        //  url \r\n        let temp = new URL(url);\r\n        for (const [key, value] of Object.entries(option)) {\r\n            if (value) {\r\n                temp.searchParams.set(key, value);\r\n            }\r\n        }\r\n        url = temp.toString();\r\n        return this.sendGetRequest(url);\r\n    }\r\n    static getNovelSearchData(word, p = 1, option = {}) {\r\n        //  url\r\n        let url = `https://www.pixiv.net/ajax/search/novels/${encodeURIComponent(word)}?word=${encodeURIComponent(word)}&p=${p}`;\r\n        //  url \r\n        let temp = new URL(url);\r\n        for (const [key, value] of Object.entries(option)) {\r\n            if (value) {\r\n                temp.searchParams.set(key, value);\r\n            }\r\n        }\r\n        url = temp.toString();\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getNewIllustData(option) {\r\n        let url = `https://www.pixiv.net/ajax/illust/new?lastId=${option.lastId}&limit=${option.limit}&type=${option.type}&r18=${option.r18}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getNewNovleData(option) {\r\n        let url = `https://www.pixiv.net/ajax/novel/new?lastId=${option.lastId}&limit=${option.limit}&r18=${option.r18}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static getBookmarkNewIllustData(p = 1, r18 = false) {\r\n        let path = r18 ? 'bookmark_new_illust_r18' : 'bookmark_new_illust';\r\n        let url = `https://www.pixiv.net/${path}.php?p=${p}`;\r\n        return new Promise((resolve, reject) => {\r\n            fetch(url, {\r\n                method: 'get',\r\n                credentials: 'same-origin',\r\n            })\r\n                .then((response) => {\r\n                if (response.ok) {\r\n                    return response.text();\r\n                }\r\n                else {\r\n                    throw new Error(response.status.toString());\r\n                }\r\n            })\r\n                .then((data) => {\r\n                let listPageDocument = new DOMParser().parseFromString(data, 'text/html');\r\n                // \r\n                let lastPage = false;\r\n                if (!listPageDocument.querySelector('span.next a')) {\r\n                    lastPage = true;\r\n                }\r\n                let worksInfoText = listPageDocument.querySelector('#js-mount-point-latest-following').dataset.items;\r\n                resolve({\r\n                    lastPage,\r\n                    data: JSON.parse(worksInfoText),\r\n                });\r\n            })\r\n                .catch((error) => {\r\n                reject(error);\r\n            });\r\n        });\r\n    }\r\n    //  illustType\r\n    //  idList\r\n    static getWorkType(illustType) {\r\n        switch (parseInt(illustType.toString())) {\r\n            case 0:\r\n                return 'illusts';\r\n            case 1:\r\n                return 'manga';\r\n            case 2:\r\n                return 'ugoira';\r\n            case 3:\r\n                return 'novels';\r\n            default:\r\n                return 'unknown';\r\n        }\r\n    }\r\n    //  URL  RESTful API \r\n    //  https://www.pixiv.net/novel/series/1090654\r\n    //  /  key  value\r\n    static getURLPathField(query) {\r\n        const pathArr = location.pathname.split('/');\r\n        const index = pathArr.indexOf(query);\r\n        if (index > 0) {\r\n            return pathArr[index + 1];\r\n        }\r\n        throw new Error(`getURLPathField ${query} failed!`);\r\n    }\r\n    // \r\n    //  api  30 \r\n    static getNovelSeriesData(series_id, limit = 30, last_order, order_by = 'asc') {\r\n        const url = `https://www.pixiv.net/ajax/novel/series_content/${series_id}?limit=${limit}&last_order=${last_order}&order_by=${order_by}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    //  illust  novel \r\n    // \r\n    static getSeriesData(series_id, pageNo) {\r\n        const url = `https://www.pixiv.net/ajax/series/${series_id}?p=${pageNo}`;\r\n        return this.sendGetRequest(url);\r\n    }\r\n    // \r\n    static async addLike(id, type, token) {\r\n        let data = {};\r\n        if (type === 'illusts') {\r\n            data = {\r\n                illust_id: id,\r\n            };\r\n        }\r\n        else {\r\n            data = {\r\n                novel_id: id,\r\n            };\r\n        }\r\n        const r = await fetch(`https://www.pixiv.net/ajax/${type}/like`, {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json; charset=utf-8',\r\n                'x-csrf-token': token,\r\n            },\r\n            credentials: 'same-origin',\r\n            body: JSON.stringify(data),\r\n        });\r\n        const json = (await r.json());\r\n        return json;\r\n    }\r\n    static async getMuteSettings() {\r\n        return this.sendGetRequest(`https://www.pixiv.net/ajax/mute/items?context=setting`);\r\n    }\r\n}\r\nexport { API };\r\n","import { API } from './API';\r\nimport { settings } from './setting/Settings';\r\nimport { token } from './Token';\r\nimport { Tools } from './Tools';\r\nclass Bookmark {\r\n    static async getWorkData(type, id) {\r\n        return type === 'illusts'\r\n            ? await API.getArtworkData(id)\r\n            : await API.getNovelData(id);\r\n    }\r\n    //  API.addBookmark \r\n    /**\r\n     *\r\n     *  tags tag \r\n     *\r\n     *  tags tags\r\n     */\r\n    static async add(id, type, tags) {\r\n        if (!settings.widthTagBoolean) {\r\n            //  tag\r\n            tags = [];\r\n        }\r\n        else {\r\n            //  tag\r\n            if (!tags) {\r\n                tags = [];\r\n                //  tag tag\r\n                const data = await this.getWorkData(type, id);\r\n                tags = Tools.extractTags(data);\r\n            }\r\n        }\r\n        return API.addBookmark(type, id, tags, settings.restrictBoolean, token.token);\r\n    }\r\n}\r\nexport { Bookmark };\r\n","import { lang } from './Lang';\r\nimport { EVT } from './EVT';\r\nimport { states } from './store/States';\r\nimport { theme } from './Theme';\r\nimport { Config } from './config/Config';\r\nimport { msgBox } from './MsgBox';\r\nimport { BG } from './setting/BG';\r\nimport './OpenCenterPanel';\r\nimport { settings } from './setting/Settings';\r\n// \r\nvar Tabbar;\r\n(function (Tabbar) {\r\n    Tabbar[Tabbar[\"Crawl\"] = 0] = \"Crawl\";\r\n    Tabbar[Tabbar[\"Download\"] = 1] = \"Download\";\r\n    Tabbar[Tabbar[\"Other\"] = 2] = \"Other\";\r\n})(Tabbar || (Tabbar = {}));\r\n// \r\nclass CenterPanel {\r\n    constructor() {\r\n        this.updateActiveClass = 'updateActiveClass';\r\n        this.activeClass = 'active';\r\n        this.addCenterPanel();\r\n        this.activeTab(Tabbar.Crawl);\r\n        theme.register(this.centerPanel);\r\n        new BG(this.centerPanel);\r\n        this.bindEvents();\r\n    }\r\n    // \r\n    addCenterPanel() {\r\n        const centerPanelHTML = `\n      <div class=\"centerWrap\">\n\n      <div class=\"centerWrap_head\">\n      <div class=\"centerWrap_title blue\">\n      ${Config.appName}\n      <div class=\"btns\">\n      <a class=\"has_tip centerWrap_top_btn update\" data-tip=\"${lang.transl('_newver')}\" href=\"https://github.com/xuejianxianzun/PixivBatchDownloader/releases/latest\" target=\"_blank\">\n        <svg class=\"icon\" aria-hidden=\"true\">\n          <use xlink:href=\"#icon-gengxin\"></use>\n        </svg>\n      </a>\n      <a class=\"has_tip centerWrap_top_btn github_icon\" data-tip=\"${lang.transl('_github')}\" href=\"https://github.com/xuejianxianzun/PixivBatchDownloader\" target=\"_blank\">\n      <svg class=\"icon\" aria-hidden=\"true\">\n        <use xlink:href=\"#icon-github\"></use>\n      </svg>\n      </a>\n      <a class=\"has_tip centerWrap_top_btn wiki_url\" data-tip=\"${lang.transl('_wiki')}\" href=\"https://xuejianxianzun.github.io/PBDWiki\" target=\"_blank\">\n        <svg class=\"icon\" aria-hidden=\"true\">\n          <use xlink:href=\"#icon-help\"></use>\n        </svg>\n      </a>\n        <div class=\"has_tip centerWrap_top_btn centerWrap_close\" data-tip=\"${lang.transl('_')}\">\n        <svg class=\"icon\" aria-hidden=\"true\">\n          <use xlink:href=\"#icon-guanbi\"></use>\n        </svg>\n        </div>\n      </div>\n      </div>\n      </div>\n\n      <div class=\"centerWrap_tabs tabsTitle\">\n        <div class=\"title\">${lang.transl('_')}</div>\n        <div class=\"title\">${lang.transl('_')}</div>\n        <div class=\"title\">${lang.transl('_')}</div>\n      </div>\n\n      <div class=\"centerWrap_con beautify_scrollbar\">\n\n      <slot data-name=\"form\"></slot>\n\n      <div class=\"help_bar gray1\"> \n      <button class=\"textButton gray1 showDownTip\" type=\"button\">${lang.transl('_')}</button>\n      <a class=\"gray1\" href=\"https://xuejianxianzun.github.io/PBDWiki\" target=\"_blank\"> ${lang.transl('_wiki')}</a>\n      <a class=\"gray1\" href=\"https://github.com/xuejianxianzun/PixivFanboxDownloader\" target=\"_blank\"> ${lang.transl('_fanboxDownloader')}</a>\n      <a id=\"zanzhu\" class=\"gray1 patronText\" href=\"https://afdian.net/@xuejianxianzun\" target=\"_blank\"></a>\n      <a id=\"patreon\" class=\"gray1 patronText\" href=\"https://www.patreon.com/xuejianxianzun\" target=\"_blank\">Become a patron</a>\n      <a class=\"gray1\" href=\"https://discord.gg/eW9JtTK\" target=\"_blank\">Discord</a>\n      <br>\n      </div>\n\n      </div>\n\n      </div>\n      `;\r\n        document.body.insertAdjacentHTML('beforeend', centerPanelHTML);\r\n        this.centerPanel = document.querySelector('.centerWrap');\r\n        this.updateLink = this.centerPanel.querySelector('.update');\r\n        const donateId = lang.type === 'zh-cn' ? 'zanzhu' : 'patreon';\r\n        document.getElementById(donateId).style.display = 'inline-block';\r\n        this.allTabTitle = this.centerPanel.querySelectorAll('.tabsTitle .title');\r\n    }\r\n    bindEvents() {\r\n        // \r\n        chrome.runtime.onMessage.addListener((msg) => {\r\n            if (msg.msg === 'click_icon') {\r\n                this.toggle();\r\n            }\r\n        });\r\n        //  Alt + x \r\n        window.addEventListener('keydown', (ev) => {\r\n            if (ev.altKey && ev.code === 'KeyX') {\r\n                this.toggle();\r\n            }\r\n        }, false);\r\n        // \r\n        document\r\n            .querySelector('.centerWrap_close')\r\n            .addEventListener('click', () => {\r\n            EVT.fire('closeCenterPanel');\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            EVT.fire('closeCenterPanel');\r\n        });\r\n        // \r\n        for (const ev of [EVT.list.crawlFinish, EVT.list.resume]) {\r\n            window.addEventListener(ev, () => {\r\n                if (!states.quickCrawl && !states.downloadFromViewer) {\r\n                    this.show();\r\n                }\r\n            });\r\n        }\r\n        window.addEventListener(EVT.list.openCenterPanel, () => {\r\n            this.show();\r\n        });\r\n        window.addEventListener(EVT.list.closeCenterPanel, () => {\r\n            this.close();\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.hasNewVer, () => {\r\n            this.updateLink.classList.add(this.updateActiveClass);\r\n            this.updateLink.style.display = 'inline-block';\r\n        });\r\n        // \r\n        this.centerPanel\r\n            .querySelector('.showDownTip')\r\n            .addEventListener('click', () => msgBox.show(lang.transl('_'), {\r\n            title: lang.transl('_'),\r\n        }));\r\n        this.centerPanel.addEventListener('click', (e) => {\r\n            const ev = e || window.event;\r\n            ev.stopPropagation();\r\n        });\r\n        document.addEventListener('click', () => {\r\n            if (getComputedStyle(this.centerPanel)['display'] !== 'none') {\r\n                EVT.fire('closeCenterPanel');\r\n            }\r\n        });\r\n        // \r\n        const eventList = ['click', 'mouseenter'];\r\n        for (let index = 0; index < this.allTabTitle.length; index++) {\r\n            eventList.forEach((eventName) => {\r\n                this.allTabTitle[index].addEventListener(eventName, () => {\r\n                    // \r\n                    if (eventName === 'mouseenter' && !settings.mouseEnterSwitchTabbar) {\r\n                        return;\r\n                    }\r\n                    this.activeTab(index);\r\n                });\r\n            });\r\n        }\r\n        // \r\n        for (const ev of [\r\n            EVT.list.crawlFinish,\r\n            EVT.list.resultChange,\r\n            EVT.list.resume,\r\n        ]) {\r\n            window.addEventListener(ev, () => {\r\n                this.activeTab(Tabbar.Download);\r\n            });\r\n        }\r\n        window.addEventListener(EVT.list.crawlEmpty, () => {\r\n            this.activeTab(Tabbar.Crawl);\r\n        });\r\n    }\r\n    // \r\n    activeTab(no = 0) {\r\n        for (const title of this.allTabTitle) {\r\n            title.classList.remove(this.activeClass);\r\n        }\r\n        this.allTabTitle[no].classList.add(this.activeClass);\r\n        const allTabCon = this.centerPanel.querySelectorAll('.tabsContnet');\r\n        for (let index = 0; index < allTabCon.length; index++) {\r\n            allTabCon[index].style.display = index === no ? 'block' : 'none';\r\n        }\r\n    }\r\n    // \r\n    show() {\r\n        this.centerPanel.style.display = 'block';\r\n        EVT.fire('centerPanelOpened');\r\n    }\r\n    // \r\n    close() {\r\n        this.centerPanel.style.display = 'none';\r\n        EVT.fire('centerPanelClosed');\r\n    }\r\n    toggle() {\r\n        const nowDisplay = this.centerPanel.style.display;\r\n        nowDisplay === 'block' ? this.close() : this.show();\r\n        if (nowDisplay === 'block') {\r\n            EVT.fire('closeCenterPanel');\r\n        }\r\n        else {\r\n            EVT.fire('openCenterPanel');\r\n        }\r\n    }\r\n}\r\nnew CenterPanel();\r\n","import { EVT } from './EVT';\r\n// \r\nclass CheckNewVersion {\r\n    constructor() {\r\n        this.checkNew();\r\n    }\r\n    async checkNew() {\r\n        //  GitHub \r\n        const timeName = 'xzUpdateTime';\r\n        const verName = 'xzGithubVer';\r\n        const interval = 1000 * 60 * 30; // 30 \r\n        const lastTime = localStorage.getItem(timeName);\r\n        if (!lastTime || new Date().getTime() - parseInt(lastTime) > interval) {\r\n            //  releases \r\n            const latest = await fetch('https://api.github.com/repos/xuejianxianzun/PixivBatchDownloader/releases/latest');\r\n            const latestJson = await latest.json();\r\n            const latestVer = latestJson.name;\r\n            //  GitHub \r\n            localStorage.setItem(verName, latestVer);\r\n            // \r\n            localStorage.setItem(timeName, new Date().getTime().toString());\r\n        }\r\n        // \r\n        const manifest = await fetch(chrome.extension.getURL('manifest.json'));\r\n        const manifestJson = await manifest.json();\r\n        const manifestVer = manifestJson.version;\r\n        // \r\n        const latestVer = localStorage.getItem(verName);\r\n        if (!latestVer) {\r\n            return;\r\n        }\r\n        if (this.bigger(latestVer, manifestVer)) {\r\n            EVT.fire('hasNewVer');\r\n        }\r\n    }\r\n    // \r\n    bigger(a, b) {\r\n        const _a = a.split('.');\r\n        const _b = b.split('.');\r\n        //  a > b  true\r\n        for (let i = 0; i < _a.length; i++) {\r\n            if (_b[i] === undefined) {\r\n                break;\r\n            }\r\n            if (Number.parseInt(_a[i]) > Number.parseInt(_b[i])) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nnew CheckNewVersion();\r\n","import { EVT } from '../EVT';\r\nimport { settings } from '../setting/Settings';\r\nimport { toWebM } from './ToWebM';\r\nimport { toGIF } from './ToGIF';\r\nimport { toAPNG } from './ToAPNG';\r\n// \r\nclass ConvertUgoira {\r\n    constructor() {\r\n        this.downloading = true; // \r\n        this._count = 0; // \r\n        this.maxCount = 1; // \r\n        this.setMaxCount();\r\n        window.addEventListener(EVT.list.downloadStart, () => {\r\n            this.downloading = true;\r\n        });\r\n        [EVT.list.downloadPause, EVT.list.downloadStop].forEach((event) => {\r\n            window.addEventListener(event, () => {\r\n                this.downloading = false;\r\n            });\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.settingChange, (ev) => {\r\n            const data = ev.detail.data;\r\n            if (data.name === 'convertUgoiraThread') {\r\n                this.setMaxCount();\r\n            }\r\n        });\r\n        window.addEventListener(EVT.list.convertSuccess, () => {\r\n            this.complete();\r\n        });\r\n        window.addEventListener(EVT.list.readZipError, () => {\r\n            this.complete();\r\n        });\r\n    }\r\n    setMaxCount() {\r\n        this.maxCount =\r\n            settings.convertUgoiraThread > 0 ? settings.convertUgoiraThread : 1;\r\n    }\r\n    set count(num) {\r\n        this._count = num;\r\n        EVT.fire('convertChange', this._count);\r\n    }\r\n    async start(file, info, type) {\r\n        return new Promise(async (resolve, reject) => {\r\n            const t = window.setInterval(async () => {\r\n                if (this._count < this.maxCount) {\r\n                    window.clearInterval(t);\r\n                    if (!this.downloading) {\r\n                        return;\r\n                    }\r\n                    this.count = this._count + 1;\r\n                    if (type === 'gif') {\r\n                        resolve(toGIF.convert(file, info));\r\n                    }\r\n                    else if (type === 'png') {\r\n                        resolve(toAPNG.convert(file, info));\r\n                    }\r\n                    else {\r\n                        //  type  webm\r\n                        resolve(toWebM.convert(file, info));\r\n                    }\r\n                }\r\n            }, 200);\r\n        });\r\n    }\r\n    complete() {\r\n        this.count = this._count - 1;\r\n    }\r\n    //  WebM\r\n    async webm(file, info) {\r\n        return await this.start(file, info, 'webm');\r\n    }\r\n    //  GIF\r\n    async gif(file, info) {\r\n        return await this.start(file, info, 'gif');\r\n    }\r\n    //  APNG\r\n    async apng(file, info) {\r\n        return await this.start(file, info, 'png');\r\n    }\r\n}\r\nconst convertUgoira = new ConvertUgoira();\r\nexport { convertUgoira };\r\n","import { EVT } from '../EVT';\r\n//  zip \r\nclass ExtractImage {\r\n    constructor() {\r\n        this.loadWorkerJS();\r\n    }\r\n    async loadWorkerJS() {\r\n        if ('zip' in window === false) {\r\n            return;\r\n        }\r\n        //  zip  worker \r\n        let zipWorker = await fetch(chrome.extension.getURL('lib/z-worker.js'));\r\n        const zipWorkerBolb = await zipWorker.blob();\r\n        const zipWorkerUrl = URL.createObjectURL(zipWorkerBolb);\r\n        zip.workerScripts = {\r\n            inflater: [zipWorkerUrl],\r\n        };\r\n    }\r\n    //  zip  DataURL\r\n    async extractImageAsDataURL(zipFile, ugoiraInfo) {\r\n        return new Promise(function (resolve, reject) {\r\n            zip.createReader(new zip.BlobReader(zipFile), (zipReader) => {\r\n                // files \r\n                zipReader.getEntries((files) => {\r\n                    // \r\n                    const imgFile = new Array(files.length);\r\n                    // \r\n                    files.forEach((file) => {\r\n                        file.getData(new zip.Data64URIWriter(ugoiraInfo.mime_type), (data) => {\r\n                            const fileNo = parseInt(file.filename);\r\n                            imgFile[fileNo] = data;\r\n                            //  zip.Data64URIWriter  push \r\n                            for (let i = 0; i < imgFile.length; i++) {\r\n                                // \r\n                                if (!imgFile[i]) {\r\n                                    break;\r\n                                }\r\n                                // \r\n                                if (i === imgFile.length - 1) {\r\n                                    resolve(imgFile);\r\n                                }\r\n                            }\r\n                        });\r\n                    });\r\n                });\r\n            }, (message) => {\r\n                EVT.fire('readZipError');\r\n                reject(new Error('ReadZIP error: ' + message));\r\n            });\r\n        });\r\n    }\r\n}\r\nconst extractImage = new ExtractImage();\r\nexport { extractImage };\r\n","import { extractImage } from './ExtractImage';\r\nimport { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\nclass ToAPNG {\r\n    async convert(file, info) {\r\n        return new Promise(async (resolve, reject) => {\r\n            // \r\n            let base64Arr = await extractImage\r\n                .extractImageAsDataURL(file, info)\r\n                .catch(() => {\r\n                reject(new Error('Start error'));\r\n            });\r\n            if (!base64Arr) {\r\n                return;\r\n            }\r\n            // \r\n            let arrayBuffList = await this.getFrameData(base64Arr);\r\n            // \r\n            const delayList = [];\r\n            for (const d of info.frames) {\r\n                delayList.push(d.delay);\r\n            }\r\n            // \r\n            const img = await Utils.loadImg(base64Arr[0]);\r\n            // \r\n            const png = UPNG.encode(arrayBuffList, img.width, img.height, 0, delayList);\r\n            base64Arr = null;\r\n            arrayBuffList = null;\r\n            const blob = new Blob([png], {\r\n                type: 'image/vnd.mozilla.apng',\r\n            });\r\n            EVT.fire('convertSuccess');\r\n            resolve(blob);\r\n        });\r\n    }\r\n    // \r\n    async getFrameData(imgFile) {\r\n        const resultList = [];\r\n        return new Promise(async (resolve, reject) => {\r\n            for (const base64 of imgFile) {\r\n                const img = await Utils.loadImg(base64);\r\n                const canvas = document.createElement('canvas');\r\n                const ctx = canvas.getContext('2d');\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n                ctx.drawImage(img, 0, 0);\r\n                const buff = ctx.getImageData(0, 0, img.width, img.height).data.buffer;\r\n                resultList.push(buff);\r\n            }\r\n            resolve(resultList);\r\n        });\r\n    }\r\n}\r\nconst toAPNG = new ToAPNG();\r\nexport { toAPNG };\r\n","import { extractImage } from './ExtractImage';\r\nimport { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\nclass ToGIF {\r\n    constructor() {\r\n        this.gifWorkerUrl = '';\r\n        this.loadWorkerJS();\r\n    }\r\n    async loadWorkerJS() {\r\n        //  gif  worker \r\n        let gifWorker = await fetch(chrome.extension.getURL('lib/gif.worker.js'));\r\n        const gifWorkerBolb = await gifWorker.blob();\r\n        this.gifWorkerUrl = URL.createObjectURL(gifWorkerBolb);\r\n    }\r\n    //  GIF\r\n    async convert(file, info) {\r\n        return new Promise(async (resolve, reject) => {\r\n            //  gif.js\r\n            let gif = new GIF({\r\n                workers: 4,\r\n                quality: 10,\r\n                workerScript: this.gifWorkerUrl,\r\n            });\r\n            // \r\n            gif.on('finished', (file) => {\r\n                EVT.fire('convertSuccess');\r\n                resolve(file);\r\n            });\r\n            // \r\n            let base64Arr = await extractImage\r\n                .extractImageAsDataURL(file, info)\r\n                .catch(() => {\r\n                reject(new Error('Start error'));\r\n            });\r\n            if (!base64Arr) {\r\n                return;\r\n            }\r\n            // \r\n            let imgList = await this.getFrameData(base64Arr);\r\n            // \r\n            for (let index = 0; index < imgList.length; index++) {\r\n                gif.addFrame(imgList[index], {\r\n                    delay: info.frames[index].delay,\r\n                });\r\n            }\r\n            base64Arr = null;\r\n            imgList = null;\r\n            //  gif\r\n            gif.render();\r\n        });\r\n    }\r\n    // \r\n    async getFrameData(imgFile) {\r\n        const resultList = [];\r\n        return new Promise(async (resolve, reject) => {\r\n            for (const base64 of imgFile) {\r\n                const img = await Utils.loadImg(base64);\r\n                resultList.push(img);\r\n            }\r\n            resolve(resultList);\r\n        });\r\n    }\r\n}\r\nconst toGIF = new ToGIF();\r\nexport { toGIF };\r\n","import { extractImage } from './ExtractImage';\r\nimport { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\nclass ToWebM {\r\n    async convert(file, info) {\r\n        return new Promise(async (resolve, reject) => {\r\n            // \r\n            const encoder = new Whammy.Video();\r\n            // \r\n            let base64Arr = await extractImage\r\n                .extractImageAsDataURL(file, info)\r\n                .catch(() => {\r\n                reject(new Error('Start error'));\r\n            });\r\n            if (!base64Arr) {\r\n                return;\r\n            }\r\n            // \r\n            let canvasList = await this.getFrameData(base64Arr);\r\n            // \r\n            for (let index = 0; index < canvasList.length; index++) {\r\n                encoder.add(canvasList[index], info.frames[index].delay);\r\n            }\r\n            base64Arr = null;\r\n            canvasList = null;\r\n            // \r\n            file = await this.encodeVideo(encoder);\r\n            EVT.fire('convertSuccess');\r\n            resolve(file);\r\n        });\r\n    }\r\n    // \r\n    async getFrameData(imgFile) {\r\n        const resultList = [];\r\n        return new Promise(async (resolve, reject) => {\r\n            for (const base64 of imgFile) {\r\n                const img = await Utils.loadImg(base64);\r\n                const canvas = document.createElement('canvas');\r\n                const ctx = canvas.getContext('2d');\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n                ctx.drawImage(img, 0, 0);\r\n                resultList.push(canvas);\r\n            }\r\n            resolve(resultList);\r\n        });\r\n    }\r\n    // \r\n    async encodeVideo(encoder) {\r\n        return new Promise(function (resolve, reject) {\r\n            encoder.compile(false, function (video) {\r\n                resolve(video);\r\n            });\r\n        });\r\n    }\r\n}\r\nconst toWebM = new ToWebM();\r\nexport { toWebM };\r\n","// \r\nclass EVENT {\r\n    constructor() {\r\n        this.bindOnceFlagList = [];\r\n        this.list = {\r\n            // \r\n            crawlStart: 'crawlStart',\r\n            // \r\n            wrongSetting: 'wrongSetting',\r\n            //  id \r\n            getIdListFinished: 'getIdListFinished',\r\n            //  id  id \r\n            crawlIdList: 'crawlIdList',\r\n            // \r\n            crawlFinish: 'crawlFinish',\r\n            //  crawlFinish\r\n            crawlEmpty: 'crawlEmpty',\r\n            // store \r\n            addResult: 'addResult',\r\n            // \r\n            resultChange: 'resultChange',\r\n            // \r\n            quickCrawl: 'quickCrawl',\r\n            // \r\n            downloadCancel: 'downloadCancel',\r\n            // \r\n            downloadStart: 'downloadStart',\r\n            // \r\n            downloadPause: 'downloadPause',\r\n            // \r\n            downloadStop: 'downloadStop',\r\n            // \r\n            // \r\n            downloadError: 'downloadError',\r\n            // \r\n            skipDownload: 'skipDownload',\r\n            // \r\n            saveFileError: 'saveFileError',\r\n            // \r\n            // skipDownload \r\n            downloadSuccess: 'downloadSuccess',\r\n            // \r\n            downloadComplete: 'downloadComplete',\r\n            // \r\n            pageSwitch: 'pageSwitch',\r\n            // \r\n            pageSwitchedTypeChange: 'pageSwitchedTypeChange',\r\n            // \r\n            pageSwitchedTypeNotChange: 'pageSwitchedTypeNotChange',\r\n            // \r\n            resetSettings: 'resetSettings',\r\n            // \r\n            resetSettingsEnd: 'resetSettingsEnd',\r\n            // \r\n            exportSettings: 'exportSettings',\r\n            // \r\n            importSettings: 'importSettings',\r\n            // \r\n            convertChange: 'convertChange',\r\n            // / zip \r\n            readZipError: 'readZipError',\r\n            // \r\n            convertSuccess: 'convertSuccess',\r\n            // \r\n            openCenterPanel: 'openCenterPanel',\r\n            // \r\n            closeCenterPanel: 'closeCenterPanel',\r\n            // \r\n            centerPanelOpened: 'centerPanelOpened',\r\n            // \r\n            centerPanelClosed: 'centerPanelClosed',\r\n            // \r\n            clearMultiple: 'clearMultiple',\r\n            // \r\n            clearUgoira: 'clearUgoira',\r\n            // \r\n            deleteWork: 'deleteWork',\r\n            // \r\n            worksUpdate: 'worksUpdate',\r\n            // \r\n            clearDownloadRecord: 'clearDownloadRecord',\r\n            // \r\n            exportDownloadRecord: 'exportDownloadRecord',\r\n            // \r\n            importDownloadRecord: 'importDownloadRecord',\r\n            // \r\n            clearSavedCrawl: 'clearSavedCrawl',\r\n            // \r\n            resume: 'resume',\r\n            //  csv \r\n            outputCSV: 'outputCSV',\r\n            // \r\n            exportResult: 'exportResult',\r\n            // \r\n            importResult: 'importResult',\r\n            // \r\n            saveAvatarImage: 'saveAvatarImage',\r\n            // \r\n            saveAvatarIcon: 'saveAvatarIcon',\r\n            // \r\n            saveUserCover: 'saveUserCover',\r\n            // \r\n            previewFileName: 'previewFileName',\r\n            //  url \r\n            showURLs: 'showURLs',\r\n            // \r\n            output: 'output',\r\n            // \r\n            settingChange: 'settingChange',\r\n            // \r\n            hasNewVer: 'hasNewVer',\r\n            // \r\n            bookmarkModeStart: 'bookmarkModeStart',\r\n            // \r\n            bookmarkModeEnd: 'bookmarkModeEnd',\r\n            // \r\n            showMsg: 'showMsg',\r\n            // \r\n            sendToast: 'sendToast',\r\n            // \r\n            clearLog: 'clearLog',\r\n            // \r\n            selectBG: 'selectBG',\r\n            // \r\n            clearBG: 'clearBG',\r\n        };\r\n    }\r\n    // \r\n    //  flag \r\n    // \r\n    bindOnce(flag, targetEvt, evtFun) {\r\n        const query = this.bindOnceFlagList.includes(flag);\r\n        if (!query) {\r\n            this.bindOnceFlagList.push(flag);\r\n            window.addEventListener(targetEvt, function (ev) {\r\n                evtFun(ev);\r\n            });\r\n        }\r\n    }\r\n    // \r\n    //  ev.detail.data \r\n    fire(type, data = {}) {\r\n        const event = new CustomEvent(type, {\r\n            detail: { data },\r\n        });\r\n        window.dispatchEvent(event);\r\n    }\r\n}\r\nconst EVT = new EVENT();\r\nexport { EVT };\r\n","import { setSetting, settings } from './setting/Settings';\r\nimport { store } from './store/Store';\r\nimport { Config } from './config/Config';\r\nimport { DateFormat } from './utils/DateFormat';\r\nimport { Utils } from './utils/Utils';\r\n// \r\nclass FileName {\r\n    constructor() {\r\n        this.addStr = '[downloader_add]';\r\n    }\r\n    //  {rank} \r\n    handleRank(rank) {\r\n        // \r\n        if (rank === null) {\r\n            return '';\r\n        }\r\n        // string  rank  '#1' \r\n        if (typeof rank === 'string') {\r\n            return rank;\r\n        }\r\n        // \r\n        return '#' + rank;\r\n    }\r\n    // \r\n    appendFolder(fullPath, folderName) {\r\n        const allPart = fullPath.split('/');\r\n        allPart.splice(allPart.length - 1, 0, Utils.replaceUnsafeStr(folderName));\r\n        return allPart.join('/');\r\n    }\r\n    // \r\n    getFileName(data) {\r\n        // 1 \r\n        // \r\n        // /{p_tag}/|/{user}////<//{rank}/{px}/{sl}/{p_tag}///{id}-{user}-{user_id}\"\"-?{tags_transl_only}////\r\n        //  {id}\r\n        let result = settings.userSetName || '{id}';\r\n        // \r\n        result = Utils.replaceUnsafeStr(result);\r\n        // replaceUnsafeStr  /  \r\n        // \r\n        result = result.replace(//g, '/');\r\n        // \r\n        // \r\n        if (result !== settings.userSetName) {\r\n            setSetting('userSetName', result);\r\n        }\r\n        // 2 \r\n        const cfg = {\r\n            '{p_title}': {\r\n                value: store.title,\r\n                prefix: '',\r\n                safe: false,\r\n            },\r\n            '{p_tag}': {\r\n                value: store.tag,\r\n                prefix: '',\r\n                safe: false,\r\n            },\r\n            '{id}': {\r\n                value: data.id,\r\n                prefix: '',\r\n                safe: true,\r\n            },\r\n            '{id_num}': {\r\n                value: data.idNum || parseInt(data.id),\r\n                prefix: '',\r\n                safe: true,\r\n            },\r\n            '{p_num}': {\r\n                value: parseInt(/\\d*$/.exec(data.id)[0]),\r\n                prefix: '',\r\n                safe: true,\r\n            },\r\n            '{rank}': {\r\n                value: this.handleRank(data.rank),\r\n                prefix: '',\r\n                safe: true,\r\n            },\r\n            '{title}': {\r\n                value: data.title,\r\n                prefix: 'title_',\r\n                safe: false,\r\n            },\r\n            '{user}': {\r\n                value: data.user,\r\n                prefix: 'user_',\r\n                safe: false,\r\n            },\r\n            '{userid}': {\r\n                value: data.userId,\r\n                prefix: 'uid_',\r\n                safe: true,\r\n            },\r\n            '{user_id}': {\r\n                value: data.userId,\r\n                prefix: 'uid_',\r\n                safe: true,\r\n            },\r\n            '{px}': {\r\n                value: data.fullWidth ? data.fullWidth + 'x' + data.fullHeight : '',\r\n                prefix: '',\r\n                safe: true,\r\n            },\r\n            '{tags}': {\r\n                value: data.tags.join(','),\r\n                prefix: 'tags_',\r\n                safe: false,\r\n            },\r\n            '{tags_translate}': {\r\n                value: data.tagsWithTransl.join(','),\r\n                prefix: 'tags_',\r\n                safe: false,\r\n            },\r\n            '{tags_transl_only}': {\r\n                value: data.tagsTranslOnly.join(','),\r\n                prefix: 'tags_',\r\n                safe: false,\r\n            },\r\n            '{bmk}': {\r\n                value: data.bmk,\r\n                prefix: 'bmk_',\r\n                safe: true,\r\n            },\r\n            '{like}': {\r\n                value: data.likeCount,\r\n                prefix: 'like_',\r\n                safe: true,\r\n            },\r\n            '{view}': {\r\n                value: data.viewCount,\r\n                prefix: 'view_',\r\n                safe: true,\r\n            },\r\n            '{date}': {\r\n                value: DateFormat.format(data.date, settings.dateFormat),\r\n                prefix: '',\r\n                safe: false,\r\n            },\r\n            '{task_date}': {\r\n                value: DateFormat.format(store.crawlCompleteTime, settings.dateFormat),\r\n                prefix: '',\r\n                safe: false,\r\n            },\r\n            '{type}': {\r\n                value: Config.worksTypeName[data.type],\r\n                prefix: '',\r\n                safe: true,\r\n            },\r\n            '{series_title}': {\r\n                value: data.seriesTitle || '',\r\n                prefix: '',\r\n                safe: false,\r\n            },\r\n            '{series_order}': {\r\n                value: data.seriesOrder || '',\r\n                prefix: '',\r\n                safe: true,\r\n            },\r\n        };\r\n        // 3 \r\n        // \r\n        const noSerialNo = settings.noSerialNo && cfg['{p_num}'].value === 0;\r\n        for (const [key, val] of Object.entries(cfg)) {\r\n            if (result.includes(key)) {\r\n                // \r\n                if (noSerialNo) {\r\n                    //  p_num \r\n                    key === '{p_num}' && (val.value = '');\r\n                    //  id  idNum \r\n                    key === '{id}' && (val.value = cfg['{id_num}'].value);\r\n                }\r\n                // \r\n                const value = val.value === undefined || val.value === null ? '' : val.value;\r\n                // \r\n                let once = typeof value !== 'string' ? value.toString() : value;\r\n                // \r\n                if (!val.safe) {\r\n                    once = Utils.replaceUnsafeStr(once);\r\n                }\r\n                // \r\n                if (settings.tagNameToFileName) {\r\n                    once = val.prefix + once;\r\n                }\r\n                // \r\n                result = result.replace(new RegExp(key, 'g'), once);\r\n            }\r\n        }\r\n        //  /\r\n        result = result.replace(/\\/{2,100}/g, '/');\r\n        //  / \r\n        if (result.startsWith('/')) {\r\n            result = result.replace('/', '');\r\n        }\r\n        if (result.endsWith('/')) {\r\n            result = result.substr(0, result.length - 1);\r\n        }\r\n        // 4 \r\n        // \r\n        // appendFolder  tags  /\r\n        // \r\n        if (settings.createFolderByType) {\r\n            // \r\n            const allSwitch = [\r\n                settings.createFolderByTypeIllust,\r\n                settings.createFolderByTypeManga,\r\n                settings.createFolderByTypeUgoira,\r\n                settings.createFolderByTypeNovel,\r\n            ];\r\n            if (allSwitch[data.type]) {\r\n                const folder = Config.worksTypeName[data.type];\r\n                result = this.appendFolder(result, folder);\r\n            }\r\n        }\r\n        //  sl \r\n        if (settings.createFolderBySl && data.sl !== null) {\r\n            const folder = 'sl' + data.sl.toString();\r\n            result = this.appendFolder(result, folder);\r\n        }\r\n        //  tag \r\n        if (settings.createFolderByTag && settings.createFolderTagList.length > 0) {\r\n            const workTags = data.tagsWithTransl.map((val) => val.toLowerCase());\r\n            //  tag  tag \r\n            //  tag \r\n            //  tag \r\n            //   \r\n            //  tag  \r\n            for (const tag of settings.createFolderTagList) {\r\n                // \r\n                const nowTag = tag.toLowerCase();\r\n                if (workTags.includes(nowTag)) {\r\n                    //  tag\r\n                    result = this.appendFolder(result, tag);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        //  R18(G) \r\n        if (settings.r18Folder && (data.xRestrict === 1 || data.xRestrict === 2)) {\r\n            result = this.appendFolder(result, settings.r18FolderName);\r\n        }\r\n        // \r\n        // \r\n        if (settings.workDir && data.dlCount > settings.workDirFileNumber) {\r\n            const allPart = result.split('/');\r\n            const name = allPart[allPart.length - 1];\r\n            let folder = '';\r\n            if (settings.workDirName === 'id') {\r\n                //  id \r\n                folder = data.idNum.toString();\r\n            }\r\n            else if (settings.workDirName === 'rule') {\r\n                // \r\n                //  id  id \r\n                //  {id} \r\n                folder = name.replace(data.id, data.idNum.toString());\r\n            }\r\n            result = this.appendFolder(result, folder);\r\n        }\r\n        // 5 \r\n        //  / \r\n        result = result.replace(/\\/{2,100}/g, '/');\r\n        // \r\n        const pathArray = result.split('/');\r\n        for (let index = 0; index < pathArray.length; index++) {\r\n            let str = pathArray[index];\r\n            // \r\n            //  .  Chrome  .\r\n            str = str.trim().replace(/^\\./g, '').replace(/\\.$/g, '');\r\n            //  Windows \r\n            str = Utils.handleWindowsReservedName(str, this.addStr);\r\n            pathArray[index] = str;\r\n        }\r\n        result = pathArray.join('/');\r\n        // 6 \r\n        // \r\n        const ugoiraExt = ['zip', 'webm', 'gif', 'png'];\r\n        if (ugoiraExt.includes(data.ext) && data.ugoiraInfo) {\r\n            data.ext = settings.ugoiraSaveAs;\r\n        }\r\n        // \r\n        if (data.type === 3) {\r\n            data.ext = settings.novelSaveAs;\r\n        }\r\n        const extResult = '.' + data.ext;\r\n        // 7 \r\n        //  + \r\n        // \r\n        if (settings.fileNameLengthLimitSwitch) {\r\n            let limit = settings.fileNameLengthLimit;\r\n            if (limit < 1) {\r\n                limit = 200; //  200\r\n            }\r\n            const allPart = result.split('/');\r\n            const lastIndex = allPart.length - 1;\r\n            if (allPart[lastIndex].length + extResult.length > limit) {\r\n                allPart[lastIndex] = allPart[lastIndex].substr(0, limit - extResult.length);\r\n            }\r\n            result = allPart.join('/');\r\n        }\r\n        // 8 \r\n        result += extResult;\r\n        return result;\r\n    }\r\n}\r\nconst fileName = new FileName();\r\nexport { fileName };\r\n","// \r\n/// <reference path = \"./ImageViewer.d.ts\" />\r\nimport { API } from './API';\r\nimport { EVT } from './EVT';\r\nimport { lang } from './Lang';\r\nimport { theme } from './Theme';\r\nimport { loading } from './Loading';\r\nimport { states } from './store/States';\r\nimport { toast } from './Toast';\r\nimport { Tools } from './Tools';\r\nimport { Bookmark } from './Bookmark';\r\n//  Viewer \r\n//  id \r\nclass ImageViewer {\r\n    constructor(cfg) {\r\n        this.viewerWarpper = document.createElement('div'); // \r\n        this.viewerUl = document.createElement('ul'); //  ul \r\n        this.show = false; // \r\n        // \r\n        this.scrollX = 0;\r\n        this.scrollY = 0;\r\n        // \r\n        this.cfg = {\r\n            workId: Tools.getIllustId(),\r\n            showImageList: false,\r\n            imageListId: '',\r\n            insertTarget: '',\r\n            insertPostion: 'beforeend',\r\n            imageNumber: 2,\r\n            imageSize: 'original',\r\n            showDownloadBtn: true,\r\n            showBookmarkBtn: true,\r\n            autoStart: false,\r\n            showLoading: false,\r\n        };\r\n        this.viewerWarpperFlag = 'viewerWarpperFlag';\r\n        this.addBtnClass = 'viewer-add-btn';\r\n        this.cfg = Object.assign(this.cfg, cfg);\r\n        this.init();\r\n    }\r\n    init() {\r\n        // \r\n        // \r\n        const oldViewerWarpper = document.querySelector('.' + this.viewerWarpperFlag);\r\n        oldViewerWarpper && oldViewerWarpper.remove();\r\n        //  DOM \r\n        const oldViewerContainer = document.querySelector('.viewer-container');\r\n        oldViewerContainer && oldViewerContainer.remove();\r\n        this.createImageList();\r\n        this.bindEvents();\r\n    }\r\n    // \r\n    bindEvents() {\r\n        //  F /\r\n        document.addEventListener('keydown', (event) => {\r\n            if (event.code === 'KeyF') {\r\n                if (this.show) {\r\n                    this.isFullscreen()\r\n                        ? document.exitFullscreen()\r\n                        : this.enterFullScreenMode();\r\n                }\r\n            }\r\n        });\r\n        //  Alt + B \r\n        //  Pixiv  B  B  Pixiv \r\n        document.addEventListener('keydown', (event) => {\r\n            if (event.altKey && event.code === 'KeyB') {\r\n                if (this.show) {\r\n                    this.addBookmark();\r\n                }\r\n            }\r\n        });\r\n        //  D \r\n        document.addEventListener('keydown', (event) => {\r\n            if (event.code === 'KeyD') {\r\n                if (this.show) {\r\n                    this.download();\r\n                }\r\n            }\r\n        });\r\n        //  Pixiv \r\n        window.addEventListener('keydown', (event) => {\r\n            if (event.code === 'ArrowLeft' || event.code === 'ArrowRight') {\r\n                if (this.show) {\r\n                    // \r\n                    event.stopPropagation();\r\n                    // \r\n                    // true \r\n                    event.code === 'ArrowLeft'\r\n                        ? this.myViewer.prev(true)\r\n                        : this.myViewer.next(true);\r\n                }\r\n            }\r\n        }, true);\r\n        [\r\n            'fullscreenchange',\r\n            'webkitfullscreenchange',\r\n            'mozfullscreenchange',\r\n        ].forEach((arg) => {\r\n            //  esc \r\n            document.addEventListener(arg, () => {\r\n                // \r\n                if (this.myViewer && !this.isFullscreen()) {\r\n                    this.showViewerOther();\r\n                }\r\n            });\r\n        });\r\n    }\r\n    // \r\n    async createImageList() {\r\n        if (this.cfg.showImageList) {\r\n            // \r\n            if (!document.querySelector(this.cfg.insertTarget)) {\r\n                window.setTimeout(() => {\r\n                    this.createImageList();\r\n                }, 300);\r\n                return;\r\n            }\r\n        }\r\n        let useBigURL = ''; //  url\r\n        //  div > ul > li > img\r\n        // \r\n        this.viewerWarpper = document.createElement('div');\r\n        this.viewerWarpper.classList.add(this.viewerWarpperFlag);\r\n        this.viewerUl = document.createElement('ul');\r\n        this.viewerWarpper.appendChild(this.viewerUl);\r\n        this.viewerWarpper.style.display = 'none';\r\n        if (this.cfg.imageListId) {\r\n            this.viewerWarpper.id = this.cfg.imageListId;\r\n        }\r\n        if (this.cfg.showLoading) {\r\n            loading.show = true;\r\n        }\r\n        // \r\n        this.workData = await API.getArtworkData(this.cfg.workId);\r\n        const body = this.workData.body;\r\n        // \r\n        if (body.illustType === 0 ||\r\n            body.illustType === 1 ||\r\n            body.illustType === 2) {\r\n            // \r\n            if (body.pageCount >= this.cfg.imageNumber) {\r\n                //  url\r\n                useBigURL = body.urls[this.cfg.imageSize] || body.urls.original;\r\n                // \r\n                let html = [];\r\n                for (let index = 0; index < body.pageCount; index++) {\r\n                    //  thumb url p0  404  issues/140  url  url 404\r\n                    // https://i.pximg.net/c/250x250_80_a2/custom-thumb/img/2021/03/03/06/29/53/88179809_p1_custom1200.jpg\r\n                    // https://i.pximg.net/c/128x128/img-master/img/2021/03/03/06/29/53/88179809_p1_square1200.jpg\r\n                    const str = `<li><img src=\"${Tools.convertArtworkThumbURL(body.urls.thumb, index)}\" data-src=\"${useBigURL.replace('p0', 'p' + index)}\"></li>`;\r\n                    html.push(str);\r\n                }\r\n                this.viewerUl.innerHTML = html.join('');\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        if (this.cfg.showLoading) {\r\n            loading.show = false;\r\n        }\r\n        if (this.cfg.showImageList) {\r\n            // \r\n            theme.register(this.viewerWarpper);\r\n            this.viewerWarpper.style.display = 'block';\r\n            const target = document.querySelector(this.cfg.insertTarget);\r\n            if (target) {\r\n                target.insertAdjacentElement('beforebegin', this.viewerWarpper);\r\n            }\r\n        }\r\n        this.configureViewer(body.pageCount, useBigURL);\r\n    }\r\n    // \r\n    async configureViewer(pageCount, firstBigImgURL) {\r\n        // \r\n        this.viewerUl.addEventListener('shown', () => {\r\n            this.show = true;\r\n            this.scrollX = window.scrollX;\r\n            this.scrollY = window.scrollY;\r\n            if (this.cfg.showDownloadBtn) {\r\n                this.addDownloadBtn();\r\n            }\r\n            if (this.cfg.showBookmarkBtn) {\r\n                this.addBookmarkBtn();\r\n            }\r\n            // \r\n            this.showViewerOther();\r\n            //  11 \r\n            const oneToOne = document.querySelector('.viewer-one-to-one');\r\n            if (oneToOne) {\r\n                oneToOne.setAttribute('title', lang.transl('_') + ' (F)');\r\n                oneToOne.addEventListener('click', () => {\r\n                    this.enterFullScreenMode();\r\n                });\r\n            }\r\n        });\r\n        // \r\n        this.viewerUl.addEventListener('hide', () => {\r\n            this.show = false;\r\n            // \r\n            window.scrollTo(this.scrollX, this.scrollY);\r\n        });\r\n        //  100%\r\n        // viewed \r\n        this.viewerUl.addEventListener('viewed', () => {\r\n            if (this.isFullscreen()) {\r\n                this.myViewer.zoomTo(1);\r\n            }\r\n        });\r\n        // \r\n        this.viewerUl.addEventListener('hidden', () => {\r\n            if (this.isFullscreen()) {\r\n                document.exitFullscreen();\r\n            }\r\n        });\r\n        // \r\n        // \r\n        // if (this.myViewer) {\r\n        //   this.myViewer.destroy()\r\n        // }\r\n        //  size \r\n        let ToolbarButtonSize;\r\n        (function (ToolbarButtonSize) {\r\n            ToolbarButtonSize[\"Small\"] = \"small\";\r\n            ToolbarButtonSize[\"Medium\"] = \"medium\";\r\n            ToolbarButtonSize[\"Large\"] = \"large\";\r\n        })(ToolbarButtonSize || (ToolbarButtonSize = {}));\r\n        // \r\n        this.myViewer = new Viewer(this.viewerUl, {\r\n            toolbar: {\r\n                zoomIn: 0,\r\n                zoomOut: 0,\r\n                oneToOne: 1,\r\n                reset: 0,\r\n                prev: 1,\r\n                play: {\r\n                    show: 0,\r\n                    size: ToolbarButtonSize.Large,\r\n                },\r\n                next: 1,\r\n                rotateLeft: 0,\r\n                rotateRight: 0,\r\n                flipHorizontal: 0,\r\n                flipVertical: 0,\r\n            },\r\n            url(image) {\r\n                return image.dataset.src;\r\n            },\r\n            viewed(ev) {\r\n                // \r\n                let index = ev.detail.index;\r\n                if (index < pageCount - 1) {\r\n                    index++;\r\n                }\r\n                const nextImg = firstBigImgURL.replace('p0', 'p' + index);\r\n                const img = new Image();\r\n                img.src = nextImg;\r\n            },\r\n            // \r\n            transition: false,\r\n            keyboard: true,\r\n            //  title\r\n            title: false,\r\n            // \r\n            tooltip: false,\r\n        });\r\n        // \r\n        const img = new Image();\r\n        img.src = firstBigImgURL;\r\n        if (this.cfg.autoStart) {\r\n            // \r\n            this.myViewer.show();\r\n        }\r\n    }\r\n    // \r\n    enterFullScreenMode() {\r\n        this.hideViewerOther();\r\n        document.body.requestFullscreen();\r\n        [150, 300].forEach((time) => {\r\n            window.setTimeout(() => {\r\n                this.myViewer.zoomTo(1);\r\n            }, time);\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     *  id \r\n     */\r\n    addBtn(btn) {\r\n        // \r\n        const allContainer = document.querySelectorAll('.viewer-container');\r\n        const last = allContainer[allContainer.length - 1];\r\n        const test = last.querySelector('#' + btn.id);\r\n        if (test) {\r\n            return;\r\n        }\r\n        const one2one = last.querySelector('.viewer-one-to-one');\r\n        if (one2one) {\r\n            return one2one.insertAdjacentElement('afterend', btn);\r\n        }\r\n        else {\r\n            console.error('Add btn failed');\r\n        }\r\n    }\r\n    // \r\n    addDownloadBtn() {\r\n        const li = document.createElement('li');\r\n        li.setAttribute('role', 'button');\r\n        li.setAttribute('title', lang.transl('_') + ' (D)');\r\n        li.classList.add(this.addBtnClass);\r\n        li.textContent = '';\r\n        li.id = 'imageViewerDownloadBtn';\r\n        this.addBtn(li);\r\n        li.addEventListener('click', () => {\r\n            this.download();\r\n        });\r\n    }\r\n    // \r\n    addBookmarkBtn() {\r\n        const li = document.createElement('li');\r\n        li.setAttribute('role', 'button');\r\n        li.setAttribute('title', lang.transl('_') + ' (Alt + B)');\r\n        li.classList.add(this.addBtnClass);\r\n        li.style.fontSize = '14px';\r\n        li.textContent = '';\r\n        li.id = 'imageViewerBookmarkBtn';\r\n        this.addBtn(li);\r\n        li.addEventListener('click', async () => {\r\n            this.addBookmark();\r\n        });\r\n    }\r\n    async addBookmark() {\r\n        // \r\n        toast.show(lang.transl('_'), {\r\n            bgColor: '#333',\r\n            position: 'mouse',\r\n        });\r\n        await Bookmark.add(this.cfg.workId, 'illusts', Tools.extractTags(this.workData));\r\n        toast.success(lang.transl('_'));\r\n    }\r\n    // \r\n    download() {\r\n        //  downloadFromViewer  busy \r\n        if (states.busy) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        states.downloadFromViewer = true;\r\n        //  id\r\n        EVT.fire('crawlIdList', [\r\n            {\r\n                id: this.cfg.workId,\r\n                type: 'unknown',\r\n            },\r\n        ]);\r\n        // \r\n        toast.show(lang.transl('_'), {\r\n            bgColor: '#333',\r\n            position: 'mouse',\r\n        });\r\n    }\r\n    // \r\n    isFullscreen() {\r\n        return !!document.fullscreenElement;\r\n    }\r\n    // \r\n    hideViewerOther() {\r\n        document\r\n            .querySelector('.viewer-container')\r\n            .classList.add('black-background');\r\n        // \r\n        const close = document.querySelector('.viewer-close');\r\n        const oneToOne = document.querySelector('.viewer-one-to-one');\r\n        const navbar = document.querySelector('.viewer-navbar');\r\n        const addBtns = document.querySelectorAll('.' + this.addBtnClass);\r\n        for (const element of [close, oneToOne, navbar, ...addBtns]) {\r\n            if (element) {\r\n                element.style.display = 'none';\r\n            }\r\n        }\r\n    }\r\n    // \r\n    showViewerOther() {\r\n        document\r\n            .querySelector('.viewer-container')\r\n            .classList.remove('black-background');\r\n        // \r\n        const close = document.querySelector('.viewer-close');\r\n        const oneToOne = document.querySelector('.viewer-one-to-one');\r\n        const navbar = document.querySelector('.viewer-navbar');\r\n        const addBtns = document.querySelectorAll('.' + this.addBtnClass);\r\n        for (const element of [close, oneToOne, navbar, ...addBtns]) {\r\n            if (element) {\r\n                element.style.display = 'block';\r\n            }\r\n        }\r\n    }\r\n}\r\nexport { ImageViewer };\r\n","// \r\nimport { EVT } from './EVT';\r\nimport { pageType } from './PageType';\r\nimport { InitHomePage } from './crawlMixedPage/InitHomePage';\r\nimport { InitArtworkPage } from './crawlArtworkPage/InitArtworkPage';\r\nimport { InitUserPage } from './crawlMixedPage/InitUserPage';\r\nimport { InitBookmarkLegacyPage } from './crawlMixedPage/InitBookmarkLegacyPage';\r\nimport { InitBookmarkPage } from './crawlMixedPage/InitBookmarkPage';\r\nimport { InitSearchArtworkPage } from './crawlArtworkPage/InitSearchArtworkPage';\r\nimport { InitAreaRankingPage } from './crawlArtworkPage/InitAreaRankingPage';\r\nimport { InitRankingArtworkPage } from './crawlArtworkPage/InitRankingArtworkPage';\r\nimport { InitPixivisionPage } from './crawlArtworkPage/InitPixivisionPage';\r\nimport { InitBookmarkDetailPage } from './crawlArtworkPage/InitBookmarkDetailPage';\r\nimport { InitBookmarkNewArtworkPage } from './crawlArtworkPage/InitBookmarkNewArtworkPage';\r\nimport { InitDiscoverPage } from './crawlArtworkPage/InitDiscoverPage';\r\nimport { InitNewArtworkPage } from './crawlArtworkPage/InitNewArtworkPage';\r\nimport { InitNovelPage } from './crawlNovelPage/InitNovelPage';\r\nimport { InitNovelSeriesPage } from './crawlNovelPage/InitNovelSeriesPage';\r\nimport { InitSearchNovelPage } from './crawlNovelPage/InitSearchNovelPage';\r\nimport { InitRankingNovelPage } from './crawlNovelPage/InitRankingNovelPage';\r\nimport { InitBookmarkNewNovelPage } from './crawlNovelPage/InitBookmarkNewNovelPage';\r\nimport { InitNewNovelPage } from './crawlNovelPage/InitNewNovelPage';\r\nimport { InitArtworkSeriesPage } from './crawlArtworkPage/InitArtworkSeriesPage';\r\nimport { InitFollowingPage } from './crawlMixedPage/InitFollowingPage';\r\nclass InitPage {\r\n    constructor() {\r\n        this.initPage();\r\n        // \r\n        window.addEventListener(EVT.list.pageSwitchedTypeChange, () => {\r\n            setTimeout(() => {\r\n                this.initPage();\r\n            }, 0);\r\n        });\r\n    }\r\n    initPage() {\r\n        switch (pageType.type) {\r\n            case pageType.list.Home:\r\n                return new InitHomePage();\r\n            case pageType.list.Artwork:\r\n                return new InitArtworkPage();\r\n            case pageType.list.UserHome:\r\n                return new InitUserPage();\r\n            case pageType.list.BookmarkLegacy:\r\n                return new InitBookmarkLegacyPage();\r\n            case pageType.list.Bookmark:\r\n                return new InitBookmarkPage();\r\n            case pageType.list.ArtworkSerach:\r\n                return new InitSearchArtworkPage();\r\n            case pageType.list.AreaRanking:\r\n                return new InitAreaRankingPage();\r\n            case pageType.list.ArtworkRanking:\r\n                return new InitRankingArtworkPage();\r\n            case pageType.list.Pixivision:\r\n                return new InitPixivisionPage();\r\n            case pageType.list.BookmarkDetail:\r\n                return new InitBookmarkDetailPage();\r\n            case pageType.list.NewArtworkBookmark:\r\n                return new InitBookmarkNewArtworkPage();\r\n            case pageType.list.Discover:\r\n                return new InitDiscoverPage();\r\n            case pageType.list.NewArtwork:\r\n                return new InitNewArtworkPage();\r\n            case pageType.list.Novel:\r\n                return new InitNovelPage();\r\n            case pageType.list.NovelSeries:\r\n                return new InitNovelSeriesPage();\r\n            case pageType.list.NovelSearch:\r\n                return new InitSearchNovelPage();\r\n            case pageType.list.NovelRanking:\r\n                return new InitRankingNovelPage();\r\n            case pageType.list.NewNovelBookmark:\r\n                return new InitBookmarkNewNovelPage();\r\n            case pageType.list.NewNovel:\r\n                return new InitNewNovelPage();\r\n            case pageType.list.ArtworkSeries:\r\n                return new InitArtworkSeriesPage();\r\n            case pageType.list.Following:\r\n                return new InitFollowingPage();\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\nnew InitPage();\r\n","import { langText } from './LangText';\r\nimport { EVT } from './EVT';\r\nimport { msgBox } from './MsgBox';\r\n// \r\nclass Lang {\r\n    constructor() {\r\n        this.type = undefined;\r\n        this.flagIndex = {\r\n            'zh-cn': 0,\r\n            'zh-tw': 1,\r\n            en: 2,\r\n            ja: 3,\r\n        };\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        //  Settings \r\n        //  Settings  Settings \r\n        window.addEventListener(EVT.list.settingChange, (ev) => {\r\n            const data = ev.detail.data;\r\n            if (data.name !== 'userSetLang') {\r\n                return;\r\n            }\r\n            const old = this.type;\r\n            this.type = this.getType(data.value);\r\n            if (old !== undefined && this.type !== old) {\r\n                msgBox.show(this.transl('_'));\r\n            }\r\n        });\r\n    }\r\n    getType(flag) {\r\n        return flag === 'auto' ? this.getLangType() : flag;\r\n    }\r\n    //  flag\r\n    getLangType() {\r\n        const userLang = document.documentElement.lang;\r\n        switch (userLang) {\r\n            case 'zh':\r\n            case 'zh-CN':\r\n            case 'zh-Hans':\r\n                return 'zh-cn'; // \r\n            case 'ja':\r\n                return 'ja'; // \r\n            case 'zh-Hant':\r\n            case 'zh-tw':\r\n            case 'zh-TW':\r\n                return 'zh-tw'; // \r\n            default:\r\n                return 'en'; // English\r\n        }\r\n    }\r\n    // translate \r\n    transl(name, ...arg) {\r\n        let content = langText[name][this.flagIndex[this.type]];\r\n        arg.forEach((val) => (content = content.replace('{}', val)));\r\n        return content;\r\n    }\r\n}\r\nconst lang = new Lang();\r\nexport { lang };\r\n","import { Config } from './config/Config';\r\n// \r\n// \r\n// {} \r\n// <br> \r\nconst langText = {\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download only bookmarked works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download work type',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Which types of works to download',\r\n        '',\r\n    ],\r\n    _p: [\r\n        '',\r\n        '',\r\n        'Number of images downloaded per work',\r\n        '',\r\n    ],\r\n    _p: [\r\n        ' 0 ',\r\n        ' 0 ',\r\n        'Download the first few images of each piece. The default value of 0 means all downloads.',\r\n        '  0 ',\r\n    ],\r\n    _tag: [\r\n        ' tag&nbsp;',\r\n        ' tag&nbsp;',\r\n        'Exclude specified tag',\r\n        ' tag ',\r\n    ],\r\n    _tag: [\r\n        'tagtagtagtagtag',\r\n        ' tag tag  tag, tag  tag',\r\n        'Before downloading, you can set the tag you want to exclude. Not case sensitive; If you need to set multiple tags, you can use comma (,) separated. The excluded tag takes precedence over the included tag',\r\n        ' tag  tag , tag  tag ',\r\n    ],\r\n    _tag: [\r\n        ' tag',\r\n        ' tag',\r\n        'Excludes tag: ',\r\n        ' tag ',\r\n    ],\r\n    _tag: [\r\n        ' tag&nbsp;',\r\n        ' tag&nbsp;',\r\n        'Must contain tag',\r\n        ' tag&nbsp;',\r\n    ],\r\n    _tag: [\r\n        'tagtag',\r\n        ' tag tag,',\r\n        'Before downloading, you can set the tag that must be included. Not case sensitive; If you need to set multiple tags, you can use comma (,) separated. ',\r\n        ' tag  tag ,',\r\n    ],\r\n    _tag: [\r\n        ' tag',\r\n        ' tag',\r\n        'Include tag: ',\r\n        ' tag ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set the width and height',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Before downloading, you can set the width and height conditions of the images you want to download.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set the aspect ratio',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Set the aspect ratio, or manually type the aspect ratio',\r\n        '',\r\n    ],\r\n    _: ['', '', 'not limited', ''],\r\n    _: ['', '', 'Horizontal', ''],\r\n    _: ['', '', 'Vertical', ''],\r\n    _: ['', '', 'Square', ''],\r\n    _: [' >=', ' >=', 'Aspect ratio >=', ' >='],\r\n    _: [\r\n        '{}',\r\n        '{}',\r\n        'Aspect ratio: {}',\r\n        '{}',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'The aspect ratio must be a number',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Please type the minimum width and minimum height. Will not download images that do not meet the requirements',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Invalid input',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Width', ''],\r\n    _: ['  ', '  ', ' or ', '  '],\r\n    _: ['  ', '  ', ' and ', '  '],\r\n    _: ['', '', 'height', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set the number of works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set the number of pages',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set the bookmarkCount conditions',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Before downloading, You can set the requirements for the number of bookmarks.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set the number of bookmarks',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'If the number of bookmarks of the work is less than the set number, the work will not be downloaded.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Please type a number. If the number of bookmarks of the work is less than this number, the work will not be downloaded.',\r\n        ' ',\r\n    ],\r\n    _: [\r\n        ' >= ',\r\n        ' >= ',\r\n        'Number of bookmarks >= ',\r\n        ' >= ',\r\n    ],\r\n    _: [\r\n        ' <= ',\r\n        ' <= ',\r\n        'Number of bookmarks <= ',\r\n        ' <= ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'This task has been completed.',\r\n        '',\r\n    ],\r\n    _: [\r\n        ': ',\r\n        '',\r\n        'This task condition: ',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Parameter is not legal, this operation has been canceled.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'download all the work from this page.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '<br>11',\r\n        '<br> 1 1 ',\r\n        'Download from this page<br>If you want to set the number of pages to download, type a number starting at 1. This page is 1.',\r\n        '<br>1 1',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'download all pages',\r\n        '',\r\n    ],\r\n    _x: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'download {} related works.',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'download all related works.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'download recommend works',\r\n        '',\r\n    ],\r\n    _x: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'download the top {} works in the ranking list',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'The number you set exceeds the maximum',\r\n        '',\r\n    ],\r\n    _x: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'download {} pages from this page',\r\n        ' {} ',\r\n    ],\r\n    _x: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Download {} works from this page.',\r\n        ' {} ',\r\n    ],\r\n    _0: ['', '', 'Task starts', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Excludes these types of works: ',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Multi-image works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download multi-image works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'First few images',\r\n        '',\r\n    ],\r\n    _: ['', '', 'No', ''],\r\n    _: ['', '', 'Yes', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'First few images:',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Do not download multi-image works',\r\n        '',\r\n    ],\r\n    _n: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Multi-image works download the first {} images',\r\n        ' {} ',\r\n    ],\r\n    _: ['', '', 'Illustrations', ''],\r\n    _: ['', '', 'Manga', ''],\r\n    _: ['', '', 'Ugoira', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Save the ugoira work as',\r\n        '',\r\n    ],\r\n    _title: [\r\n        '',\r\n        '',\r\n        'When you download a ugoira work, you can convert it to a video file.',\r\n        '',\r\n    ],\r\n    _webmVideo: ['WebM ', 'WebM', 'WebM video', 'WebM '],\r\n    _gif: ['GIF ', 'GIF', 'GIF picture', 'GIF '],\r\n    _apng: ['APNG ', 'APNG', 'APNG picture', 'APNG '],\r\n    _zipFile: ['Zip ', 'Zip', 'Zip file', 'ZIP '],\r\n    _: [\r\n        ' {}  ',\r\n        ' {}  ',\r\n        'There are now {} works ',\r\n        '{} ',\r\n    ],\r\n    _x: [\r\n        ' {}  ',\r\n        ' {}  ',\r\n        'There are currently {} users ',\r\n        ' {}  ',\r\n    ],\r\n    _: [\r\n        '{}',\r\n        ' {} ',\r\n        'Part {} of this page has been crawled',\r\n        '{}',\r\n    ],\r\n    _: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'This page has been crawled {} works',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Crawl this page {} works',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        '{}',\r\n        ' {} ',\r\n        'The related works have been crawled. Contains {} works and starts getting information about the work.',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        '<br>{}',\r\n        '<br> {} ',\r\n        'This page is crawled and now has {} works.<br> Start getting the works for more information.',\r\n        '<br>{} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Start getting work data',\r\n        '',\r\n    ],\r\n    _: [\r\n        '{}',\r\n        ' {} ',\r\n        'Has acquired {} list pages',\r\n        '{} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'The list page is crawled',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl finished but did not find works that match the filter criteria.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'The current task has not yet been completed',\r\n        '',\r\n    ],\r\n    _2: [\r\n        '',\r\n        '',\r\n        'The current task has not yet been completed',\r\n        '',\r\n    ],\r\n    _: [\r\n        '{}',\r\n        ' {} ',\r\n        'Now has {} works. Start getting the works for more information.',\r\n        '{}  ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Start getting the works page',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' {}',\r\n        ' {}',\r\n        'No access {}, skip.',\r\n        '{} ',\r\n    ],\r\n    _0: [\r\n        'url',\r\n        ' url ',\r\n        'The requested url is not accessible',\r\n        ' URL ',\r\n    ],\r\n    _400: [\r\n        '',\r\n        '',\r\n        'The work has been deleted',\r\n        '',\r\n    ],\r\n    _403: [\r\n        'url 403',\r\n        ' url 403',\r\n        'Have no access to the requested url 403',\r\n        ' url  403',\r\n    ],\r\n    _404: [\r\n        '404 not found',\r\n        '404 not found',\r\n        '404 not found',\r\n        '404 not found',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Getting, please wait...',\r\n        '...',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Get all bookmarked works, the time may be longer, please wait.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '!',\r\n        '',\r\n        'The current task has been interrupted.',\r\n        '',\r\n    ],\r\n    _: ['', '', 'close', ''],\r\n    _: ['', '', 'Output information', ''],\r\n    _: ['', '', 'Copy', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Has been copied to the clipboard',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Download settings', ''],\r\n    _: [\r\n        '/',\r\n        '/',\r\n        'Collapse/expand settings',\r\n        '/',\r\n    ],\r\n    _github: [\r\n        'Github  star',\r\n        'Github  star',\r\n        'Github page, if you like, please star it',\r\n        'Github star ',\r\n    ],\r\n    _wiki: ['', 'Wiki', 'Wiki', ''],\r\n    _: [\r\n        ' Alt + X',\r\n        'Alt + X ',\r\n        'Use Alt + X to show and hide the download panel',\r\n        'Alt + X ',\r\n    ],\r\n    _: [\r\n        'Alt + X',\r\n        'Alt + X',\r\n        'Hide the download panel (Alt + X)',\r\n        'Alt + X',\r\n    ],\r\n    _n: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Crawl a total of {} files',\r\n        ' {} ',\r\n    ],\r\n    _n: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Crawl a total of {} works',\r\n        ' {} ',\r\n    ],\r\n    _: ['', '', 'Naming rule', ''],\r\n    _: [\r\n        \" '/' \",\r\n        '/',\r\n        \"You can create a directory with '/'. Example\",\r\n        \" '/' \",\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Add named tag prefix',\r\n        ' tag ',\r\n    ],\r\n    _: [\r\n        'user_',\r\n        'user_',\r\n        'For example, add the \"user_\" tag in front of the username',\r\n        ' user_ tag ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'View the meaning of the tag',\r\n        ' tag ',\r\n    ],\r\n    _id: [\r\n        ' 44920385_p0',\r\n        '44920385_p0',\r\n        'Default file name, for example 44920385_p0',\r\n        ' 44920385_p0',\r\n    ],\r\n    _title: ['', '', 'Works title', ''],\r\n    _tags: [\r\n        ' tag ',\r\n        ' tag ',\r\n        'The tags of the work',\r\n        ' tags',\r\n    ],\r\n    _user: ['', '', 'User name', ''],\r\n    _id: [' ID', ' ID', 'User ID', ' ID'],\r\n    _px: ['', '', 'Width and height', ''],\r\n    _bmk: [\r\n        'Bookmark count',\r\n        'Bookmark count',\r\n        'Bookmark count, bookmarks number of works.',\r\n        'Bookmark count',\r\n    ],\r\n    _like: [\r\n        'Like count',\r\n        'Like count',\r\n        'Like count.',\r\n        'Like count',\r\n    ],\r\n    _view: [\r\n        'View count',\r\n        'View count',\r\n        'View count.',\r\n        'View count',\r\n    ],\r\n    _id_num: [\r\n        ' id 44920385',\r\n        ' id44920385',\r\n        'Number id, for example 44920385',\r\n        '44920385  ID',\r\n    ],\r\n    _p_num: [\r\n        ' 012  ',\r\n        '012',\r\n        'The serial number of the picture in the work, such as 0, 1, 2 ... Each work will be recounted.',\r\n        '012 ',\r\n    ],\r\n    _tags_trans: [\r\n        ' tag  tag',\r\n        ' tag  tag',\r\n        'The tags of the work, with the translated tag (if any)',\r\n        ' tag  tag ()',\r\n    ],\r\n    _tags_transl_only: [\r\n        ' tag ',\r\n        ' tag ',\r\n        'Translated tags',\r\n        ' tag ',\r\n    ],\r\n    _date: [\r\n        ' 2019-08-29',\r\n        '2019-08-29',\r\n        'The time the creation of the work. Such as 2019-08-29',\r\n        ' 2019-08-29',\r\n    ],\r\n    _rank: [\r\n        ' #1#2  ',\r\n        '#1#2',\r\n        'The ranking of the work in the ranking pages. Such as #1, #2 ... Can only be used in ranking pages.',\r\n        '#1#2  ',\r\n    ],\r\n    _type: [\r\n        '',\r\n        '',\r\n        'The type of work, divided into',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' {id}  {id_num}{p_num}<br>{id}-{userid}<br>* ',\r\n        ' {id}  {id_num}{p_num}{id}-{userid}<br><br>',\r\n        'To prevent duplicate file names, {id} or {id_num}{p_num} must be included in the naming rules.<br>You can use multiple tags, and you can add a separate character between different tags. Example: {id}-{userid}<br>* In some cases, some tags will not be available.',\r\n        ' {id}  {id_num}{p_num} <br>{id}-{userid}<br>*  tag ',\r\n    ],\r\n    _id: [\r\n        ' {id}  {id_num}{p_num}',\r\n        ' {id}  {id_num}{p_num}',\r\n        'To prevent duplicate file names, {id} or {id_num}{p_num} must be included in the naming rules.',\r\n        ' {id}  {id_num}{p_num} ',\r\n    ],\r\n    _PTag: [\r\n        ' tag tag ',\r\n        ' tag tag ',\r\n        'The tag of the current page. Not available if the current page has no tag.',\r\n        ' tag tag ',\r\n    ],\r\n    _seriesTitle: [\r\n        '',\r\n        '',\r\n        'Series title (may be empty)',\r\n        '',\r\n    ],\r\n    _seriesOrder: [\r\n        ' #1 #2',\r\n        ' #1 #2',\r\n        'The number of the work in the series, such as #1 #2',\r\n        ' #1 #2',\r\n    ],\r\n    _PTitle: [\r\n        '',\r\n        '',\r\n        'The title of this page',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Preview file name',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set the download thread',\r\n        '',\r\n    ],\r\n    _: [\r\n        ` 1-${Config.downloadThreadMax} `,\r\n        ` 1-${Config.downloadThreadMax} `,\r\n        `You can type a number between 1-${Config.downloadThreadMax} to set the number of concurrent downloads`,\r\n        `1-${Config.downloadThreadMax} `,\r\n    ],\r\n    _: ['', '', 'start download', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'pause download',\r\n        '',\r\n    ],\r\n    _: ['', '', 'stop download', ''],\r\n    _url: [' url', '', 'copy urls', 'URL '],\r\n    _: [' ', '', 'State ', ' '],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Not yet started downloading',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Total progress: ',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Thread: ', ''],\r\n    _: ['', '', 'Help', ''],\r\n    _uuid: [\r\n        '',\r\n        '',\r\n        'If the file name after downloading is abnormal, disable other browser extensions that have download capabilities.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '<br><br><br> ssrv2ray <br>QQ1160156511',\r\n        '<br><br>',\r\n        'The downloaded file is saved in the browser`s download directory. <br>It is recommended to turn off \"Ask where to save each file before downloading\" in the browser`s download settings.<br>If the file name after downloading is abnormal, disable other browser extensions that have download capabilities.',\r\n        '<br>    <br>',\r\n    ],\r\n    _: ['', '', 'Downloading', ''],\r\n    _: [\r\n        ' ',\r\n        ' ',\r\n        ' Download finished',\r\n        ' ',\r\n    ],\r\n    _2: [\r\n        '',\r\n        '',\r\n        'Download finished',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download is paused',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download stopped',\r\n        '',\r\n    ],\r\n    _: ['', '', 'downloaded', 'downloaded'],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl finished!',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download this work quickly',\r\n        '',\r\n    ],\r\n    _new: [\r\n        '',\r\n        '',\r\n        'Crawl the new works from this page',\r\n        '',\r\n    ],\r\n    _old: [\r\n        '',\r\n        '',\r\n        'Crawl the old works from this page',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl the recommend works',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Crawl the recommended works at the bottom of the page',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl the related works',\r\n        '',\r\n    ],\r\n    _0: [\r\n        '  0',\r\n        '  0',\r\n        '  (Download related works must be greater than 0)',\r\n        ' 0',\r\n    ],\r\n    _: [\r\n        ', ',\r\n        '',\r\n        ', If there are multiple pages, the default will be downloaded.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '{}',\r\n        ' {} ',\r\n        'The adjustment is complete and now has {} works.',\r\n        '{} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl the current work',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Crawl all the works in the current list',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Remove multi-drawing works',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'If you do not need it, you can delete multiple graphs',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Remove ugoira work',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'If you do not need it, you can delete the ugoira work',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Manually delete the work',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'You can manually delete unwanted work before downloading',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Exit manually delete',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl this page works',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Crawl this page works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl the works in this list',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Crawl all of the works in this list, including those that are not yet loaded.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl the debut works',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'Download only debut works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl the picture of the page',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl similar works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'How many works do you want to download?',\r\n        '',\r\n    ],\r\n    _1: [\r\n        '-1,  0',\r\n        '-1  0',\r\n        '-1, or greater than 0',\r\n        '-1 0 ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download everyone`s new work',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Mute settings', ''],\r\n    _: ['', '', 'Report', ''],\r\n    _id: [\r\n        ' id ',\r\n        ' id ',\r\n        'Type id to crawl',\r\n        'id',\r\n    ],\r\n    _id: [\r\n        ' id idid',\r\n        ' id id id',\r\n        'Please type the illustration id. If there is more than one id, one id per line.',\r\n        'ID  id 1  1  id ',\r\n    ],\r\n    _: ['', '', 'Start crawl', ''],\r\n    _tag: [\r\n        ' tag',\r\n        ' tag',\r\n        'Add tag to unclassified work',\r\n        ' tag ',\r\n    ],\r\n    _id: ['id', 'id ', 'id is illegal', 'id '],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Quick bookmarks',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Enable', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download starts automatically',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'When the &quot;Start Downloa&quot; status is available, the download starts automatically and no need to click the download button.',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Converting {} files',\r\n        '{} ',\r\n    ],\r\n    _: ['', '', 'What`s new', ''],\r\n    _: ['', '', 'Ok', ''],\r\n    _file404: [\r\n        '404  {} ',\r\n        '404  {} ',\r\n        '404 error: File {} does not exist.',\r\n        '404  {} ',\r\n    ],\r\n    _: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'File {} download failed',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Do you want to reset the settings?',\r\n        '',\r\n    ],\r\n    _newver: [\r\n        '',\r\n        '',\r\n        'A new version is available',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Always create folder when downloading quickly',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'When downloading quickly, if there is only one picture, a folder is also created',\r\n        '',\r\n    ],\r\n    _id: [\r\n        ' id ',\r\n        ' id ',\r\n        'Set id range',\r\n        'id ',\r\n    ],\r\n    _id: [\r\n        ' id',\r\n        ' id',\r\n        'You can type a work id and crawl works that are newer or older than it',\r\n        '1  id ',\r\n    ],\r\n    _: ['', '', 'Bigger than', ''],\r\n    _: ['', '', 'Less than', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Set posting date',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'You can download works posted in a specified period of time',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Time range', ''],\r\n    _0: [\r\n        ' 0',\r\n        ' 0',\r\n        'must be greater than 0',\r\n        '0 ',\r\n    ],\r\n    _: ['', '', 'Start screening', ''],\r\n    _Title: [\r\n        ' tag ',\r\n        ' tag ',\r\n        'Screen the works in the current tag.',\r\n        ' tag ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Screen in results',\r\n        '',\r\n    ],\r\n    _Title: [\r\n        '',\r\n        '',\r\n        'You can change the settings and screen again in the results.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl the screening results',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Screening has not started',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'No data is available.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Preview filter results on search page',\r\n        '',\r\n    ],\r\n    _: [\r\n        '<br>',\r\n        '<br>',\r\n        'The downloader can display the qualified works on the current page. If too many crawling results cause the page to crash, turn off this feature.<br>When the preview feature is enabled, the downloader does not start downloading automatically.',\r\n        '<br>',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Name: ',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Name: ', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Enable quick bookmark',\r\n        '',\r\n    ],\r\n    _: [\r\n        '() tag',\r\n        ' tag',\r\n        'When you click the favorite button () added by the downloader to bookmark a work, the tag of the work is automatically added.',\r\n        ' tag ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Added setting items',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Crawl', ''],\r\n    _: ['', '', 'Download', ''],\r\n    _: ['', '', 'Other', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'The first picture without a serial number',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' 80036479_p0  80036479',\r\n        '80036479_p0  80036479',\r\n        'Remove the serial number of the first picture of each work. For example 80036479_p0 becomes 80036479.',\r\n        ' 80036479_p0  80036479 ',\r\n    ],\r\n    _: ['', '', 'Minimum', ''],\r\n    _: ['', '', 'Maximum', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Single image works',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Color picture', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Black and white pictures',\r\n        '',\r\n    ],\r\n    _: [\r\n        '{} ',\r\n        '{} ',\r\n        '{} was not saved because its colors do not match the settings.',\r\n        '{} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'How many animations are converted at the same time',\r\n        '',\r\n    ],\r\n    _: [\r\n        '<br>',\r\n        '<br>',\r\n        'Converting multiple animations at the same time will increase resource consumption. <br> Please keep the tab active when converting animation, otherwise the browser will reduce the conversion speed.',\r\n        '<br>',\r\n    ],\r\n    _: ['', '', 'tip', ''],\r\n    _fanboxDownloader: [\r\n        'Fanbox ',\r\n        'Fanbox ',\r\n        'Fanbox Downloader',\r\n        'Fanbox ',\r\n    ],\r\n    _: [\r\n        '{} ',\r\n        '{} ',\r\n        '{} was not saved because its size do not match the settings.',\r\n        '{} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'File size limit',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Files that do not meet the requirements will not be saved.',\r\n        ' ',\r\n    ],\r\n    _: ['', '', 'Novel', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl series of novels',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Save the novel as',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        'metadata',\r\n        'Save metadata in the novel',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Save the author, url and other information in the file',\r\n        'URL',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Bookmark all works on this page',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Because the output is too much, it has been saved to a file.',\r\n        'txt ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Don`t download duplicate files',\r\n        '',\r\n    ],\r\n    _: [\r\n        '<br> Cookie ',\r\n        '<br> Cookie ',\r\n        `The downloader will save its download record to avoid downloading duplicate files.<br>When you clear cookies and other site data, the downloader's records will also be cleared.`,\r\n        '<br>cookie ',\r\n    ],\r\n    _: ['', '', 'Strategy:', ''],\r\n    _: ['', '', 'Strict', ''],\r\n    _: ['', '', 'Loose', ''],\r\n    _: [\r\n        ' id ',\r\n        ' id ',\r\n        'When the file id and file name are the same, it is considered a duplicate file',\r\n        ' ID ',\r\n    ],\r\n    _: [\r\n        ' id ',\r\n        ' id ',\r\n        'As long as the id of the file is the same, it is considered a duplicate file',\r\n        ' ID ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Clear download record',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download record has been cleared',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Skip downloading duplicate files {}',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Save user avatar as icon',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' ico ',\r\n        ' ico ',\r\n        'Save user avatar as icon',\r\n        ' ico ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Saving crawl results',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl results saved',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Restoring crawl results',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl results resumed',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Clear saved crawl results',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Data cleared',\r\n        '',\r\n    ],\r\n    _n: [\r\n        ' {} ',\r\n        ' {} ',\r\n        '{} files skipped',\r\n        '{} ',\r\n    ],\r\n    _: [\r\n        '{} ',\r\n        '{} ',\r\n        '{} was not saved because its width and height do not match the settings.',\r\n        '{} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Show download panel',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Save', ''],\r\n    _: ['', '', 'Load', ''],\r\n    _: [\r\n        ' {} ',\r\n        ' {} ',\r\n        'Save naming rule, up to {}',\r\n        ' {} ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Naming rule saved',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Lossless', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'File name length limit',\r\n        '',\r\n    ],\r\n    _csv: [\r\n        ' CSV ',\r\n        ' CSV ',\r\n        'Export CSV file',\r\n        'CSV ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Export crawl results',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Import crawl results',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Import successfully', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        ' successfully',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Image size', ''],\r\n    _: ['', '', 'Original', 'Original'],\r\n    _: ['', '', 'Regular', 'Regular'],\r\n    _: ['', '', 'Small', 'Small'],\r\n    _: ['', '', 'Export', ''],\r\n    _: ['', '', 'Import', ''],\r\n    _: ['', '', 'Clear', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Import download record',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Completed', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Date and time format',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' {date}  {task_date}<br> 2021-04-30T06:40:08',\r\n        ' {date}  {task_date}<br>2021-04-30T06:40:08',\r\n        'You can use the following notation to set the date and time format. This will affect {date} and {task_date} in the naming rules. <br>For time such as 2021-04-30T06:40:08',\r\n        '  {date}  {task_date}  <br> 2021-04-30T06:40:08',\r\n    ],\r\n    _taskDate: [\r\n        '2020-10-21',\r\n        '2020-10-21',\r\n        'The time when the task was crawl completed. For example: 2020-10-21',\r\n        ' 2020-10-21',\r\n    ],\r\n    _: ['', '', 'Auto', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Please refresh the page after changing the language.',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Public', ''],\r\n    _: ['', '', 'Private', ''],\r\n    _: ['', '', 'Bookmarked', ''],\r\n    _: ['', '', 'Not bookmarked', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Bookmark works after downloading',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'After you download a file, the downloader will automatically bookmark the work.',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Bookmark settings', ' '],\r\n    _tag: [' tag', ' tag', 'Add tag', 'tag '],\r\n    _tag: [' tag', ' tag', \"Don't add tag\", 'tag '],\r\n    _: [\r\n        '',\r\n        '',\r\n        'User block list',\r\n        '',\r\n    ],\r\n    _: [\r\n        ' id id,',\r\n        ' id id,',\r\n        'The works of these users will not be downloaded. Need to type the user ID. If there are multiple user ID, use comma (,) separated.',\r\n        ' ID  ID  \",\" ',\r\n    ],\r\n    _: ['', '', 'All', ''],\r\n    _: ['', '', 'One', ''],\r\n    _: ['', '', 'Color theme', ''],\r\n    _: ['', '', 'Manage settings', ''],\r\n    _: ['', '', 'Export settings', ''],\r\n    _: ['', '', 'Import settings', ''],\r\n    _: ['', '', 'Reset settings', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Average number of daily bookmarks',\r\n        '1 ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'You can set the average daily bookmarks number of works. Works that meet the conditions will be downloaded.',\r\n        ' 1 ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download users list',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Manually select works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Crawl selected works',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Clear selected works',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Pause select', ''],\r\n    _: ['', '', 'Continue select', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'The selected work has not been crawled. Leaving this page now will cause your selected work to be cleared.',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Number of images >',\r\n        ' >',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Excluded all work types',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Create a separate folder for each work',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Number of files >',\r\n        ' >',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Save user avatar',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Save user cover',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Pending', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Maximum page number exceeded:',\r\n        '',\r\n    ],\r\n    _tag: [\r\n        ' tag',\r\n        ' tag',\r\n        'Block tags for specific users',\r\n        ' tag ',\r\n    ],\r\n    _: ['/', '/', 'Expand/Collapse', '/'],\r\n    _: ['', '', 'Expand', ''],\r\n    _: ['', '', 'Collapse', ''],\r\n    _r18: [\r\n        ' R-18(G) ',\r\n        ' R-18(G) ',\r\n        'Save the R-18(G) works in the designated folder',\r\n        'R-18(G) ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Required fields cannot be empty',\r\n        '',\r\n    ],\r\n    _ID: [\r\n        ' ID ',\r\n        ' ID ',\r\n        'User ID must be a number',\r\n        ' ID ',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Must be a number',\r\n        '',\r\n    ],\r\n    _tag: [\r\n        ' tag ,',\r\n        ' tag ,',\r\n        'Multiple tags use comma (,) split',\r\n        ' tag ,',\r\n    ],\r\n    _: ['', '', 'Add', ''],\r\n    _: ['', '', 'Cancel', ''],\r\n    _: ['', '', 'Update', ''],\r\n    _: ['', '', 'Delete', ''],\r\n    _: ['', '', 'Added successfully', ''],\r\n    _: ['', '', 'update completed', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Show zoom icon on thumbnail',\r\n        '',\r\n    ],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Download request sent',\r\n        '',\r\n    ],\r\n    _HowToUse: [\r\n        '',\r\n        '',\r\n        'Click the blue button on the right side of the page to open the downloader panel.',\r\n        '',\r\n    ],\r\n    _: ['', '', 'I know', ''],\r\n    _: ['', '', 'Background image', ''],\r\n    _: ['', '', 'Select a file', ''],\r\n    _: ['', '', 'Opacity', ''],\r\n    _: ['', '', 'Alignment', ''],\r\n    _: ['', '', 'top', ''],\r\n    _: ['', '', 'center', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'Create folders based on the type of work',\r\n        '',\r\n    ],\r\n    _tag: [\r\n        ' tag ',\r\n        ' tag ',\r\n        'Create a folder with the first matched tag',\r\n        ' tag ',\r\n    ],\r\n    _tag: [\r\n        ' tag  tag tag ',\r\n        ' tag  tag tag ',\r\n        'If the tag list of the work contains a tag set by the user, this tag will be used to create a folder (only the first one)',\r\n        ' tag  tag  tag (1)',\r\n    ],\r\n    _: ['', '', 'All ages', ''],\r\n    _: [\r\n        '',\r\n        '',\r\n        'There are no eligible results',\r\n        '',\r\n    ],\r\n    _: ['', '', 'Bookmark', ''],\r\n    _: ['', '', 'Bookmarked', ''],\r\n    _: ['', '', 'Full screen view', ''],\r\n    _id: [\r\n        ' id ',\r\n        ' id ',\r\n        'Crawl id range',\r\n        'id ',\r\n    ],\r\n    _id: [\r\n        ' id  id\\n',\r\n        ' id  id\\n',\r\n        'You can set a range of work id and grab all works in this range (including the begin and end id). \\nNote: If the number of crawling results in a task is too much, it may cause the page to crash.',\r\n        ' id  id  id \\n1 ',\r\n    ],\r\n    _id: [\r\n        ' id',\r\n        ' id',\r\n        'Please type in the beginning id',\r\n        ' id ',\r\n    ],\r\n    _id: [\r\n        ' id',\r\n        ' id',\r\n        'Please type  in the ending id',\r\n        ' id ',\r\n    ],\r\n};\r\nexport { langText };\r\n","import { EVT } from './EVT';\r\n// \r\nclass ListenPageSwitch {\r\n    constructor() {\r\n        this.supportListenHistory();\r\n        this.listenPageSwitch();\r\n    }\r\n    //  history \r\n    supportListenHistory() {\r\n        const element = document.createElement('script');\r\n        element.setAttribute('type', 'text/javascript');\r\n        element.innerHTML = `\n    let _wr = function (type) {\n      let orig = history[type];\n      return function () {\n        let rv = orig.apply(this, arguments);\n        let e = new Event(type);\n        e.arguments = arguments;\n        window.dispatchEvent(e);\n        return rv;\n      };\n    };\n    history.pushState = _wr('pushState');\n    history.replaceState = _wr('replaceState');\n    `;\r\n        document.head.appendChild(element);\r\n    }\r\n    // \r\n    listenPageSwitch() {\r\n        ;\r\n        ['pushState', 'popstate', 'replaceState'].forEach((item) => {\r\n            window.addEventListener(item, () => {\r\n                EVT.fire('pageSwitch');\r\n            });\r\n        });\r\n    }\r\n}\r\nnew ListenPageSwitch();\r\n","import { theme } from './Theme';\r\n// loading \r\nclass Loading {\r\n    constructor() {\r\n        this.id = 'xzLoadingWrap';\r\n        this.html = `\n  <div id=\"xzLoadingWrap\">\n    <div class=\"iconWrap\">\n    <svg class=\"icon\" aria-hidden=\"true\">\n      <use xlink:href=\"#icon-loading\"></use>\n    </svg>\n    </div>\n  </div>`;\r\n        this._show = false;\r\n    }\r\n    set show(val) {\r\n        this._show = val;\r\n        this._show ? this.showEl() : this.hiddenEl();\r\n    }\r\n    get show() {\r\n        return this._show;\r\n    }\r\n    create() {\r\n        document.body.insertAdjacentHTML('beforeend', this.html);\r\n        const el = document.body.querySelector('#' + this.id);\r\n        theme.register(el);\r\n        return el;\r\n    }\r\n    getEl() {\r\n        let el = document.body.querySelector('#' + this.id);\r\n        if (el) {\r\n            return el;\r\n        }\r\n        else {\r\n            return this.create();\r\n        }\r\n    }\r\n    showEl() {\r\n        this.getEl().style.display = 'flex';\r\n    }\r\n    hiddenEl() {\r\n        this.getEl().style.display = 'none';\r\n    }\r\n}\r\nconst loading = new Loading();\r\nexport { loading };\r\n","import { Tools } from './Tools';\r\nimport { EVT } from './EVT';\r\nimport { theme } from './Theme';\r\nimport { Colors } from './config/Colors';\r\n// \r\nclass Log {\r\n    constructor() {\r\n        this.logArea = document.createElement('div'); // \r\n        this.id = 'logWrap'; //  id\r\n        this.refresh = document.createElement('span'); // \r\n        this.levelColor = [\r\n            'inherit',\r\n            Colors.textSuccess,\r\n            Colors.textWarning,\r\n            Colors.textError,\r\n        ];\r\n        this.toBottom = false; //  true false\r\n        this.scrollToBottom();\r\n        window.addEventListener(EVT.list.clearLog, () => {\r\n            this.clear();\r\n        });\r\n    }\r\n    // \r\n    checkElement() {\r\n        let test = document.getElementById(this.id);\r\n        if (test === null) {\r\n            this.logArea.id = this.id;\r\n            this.logArea.classList.add('beautify_scrollbar', 'logWrap');\r\n            Tools.insertToHead(this.logArea);\r\n            theme.register(this.logArea);\r\n        }\r\n    }\r\n    // \r\n    clear() {\r\n        this.logArea.innerHTML = '';\r\n    }\r\n    // \r\n    /*\r\n    str \r\n    level \r\n    br \r\n    keepShow  truefalse \r\n  \r\n    level \r\n    0 normal\r\n    1 success\r\n    2 warning\r\n    3 error\r\n    */\r\n    add(str, level, br, keepShow) {\r\n        this.checkElement();\r\n        let span = document.createElement('span');\r\n        if (!keepShow) {\r\n            span = this.refresh;\r\n        }\r\n        span.innerHTML = str;\r\n        span.style.color = this.levelColor[level];\r\n        while (br > 0) {\r\n            span.appendChild(document.createElement('br'));\r\n            br--;\r\n        }\r\n        this.logArea.appendChild(span);\r\n        this.toBottom = true; // \r\n    }\r\n    log(str, br = 1, keepShow = true) {\r\n        this.add(str, 0, br, keepShow);\r\n    }\r\n    success(str, br = 1, keepShow = true) {\r\n        this.add(str, 1, br, keepShow);\r\n    }\r\n    warning(str, br = 1, keepShow = true) {\r\n        this.add(str, 2, br, keepShow);\r\n    }\r\n    error(str, br = 1, keepShow = true) {\r\n        this.add(str, 3, br, keepShow);\r\n    }\r\n    // \r\n    scrollToBottom() {\r\n        window.setInterval(() => {\r\n            if (this.toBottom) {\r\n                this.logArea.scrollTop = this.logArea.scrollHeight;\r\n                this.toBottom = false;\r\n            }\r\n        }, 800);\r\n    }\r\n}\r\nconst log = new Log();\r\nexport { log };\r\n","import { EVT } from './EVT';\r\nimport { Colors } from './config/Colors';\r\nimport { theme } from './Theme';\r\nimport { lang } from './Lang';\r\n// \r\nclass MsgBox {\r\n    constructor() {\r\n        this.typeColor = {\r\n            success: Colors.textSuccess,\r\n            warning: Colors.textWarning,\r\n            error: Colors.textError,\r\n        };\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.showMsg, (ev) => {\r\n            const msg = ev.detail.data;\r\n            this.create(msg);\r\n        });\r\n    }\r\n    show(msg, arg) {\r\n        this.create(Object.assign({}, arg, { msg: msg }));\r\n    }\r\n    success(msg, arg) {\r\n        this.create(Object.assign({ color: this.typeColor.success }, arg, { msg: msg }));\r\n    }\r\n    warning(msg, arg) {\r\n        this.create(Object.assign({ color: this.typeColor.warning }, arg, { msg: msg }));\r\n    }\r\n    error(msg, arg) {\r\n        this.create(Object.assign({ color: this.typeColor.error }, arg, { msg: msg }));\r\n    }\r\n    create(data) {\r\n        const el = document.createElement('div');\r\n        el.classList.add('xz_msg_box');\r\n        let colorStyle = '';\r\n        if (data.color) {\r\n            colorStyle = `style=\"color:${data.color}\"`;\r\n        }\r\n        el.innerHTML = `\n        <p class=\"title\" ${colorStyle}>${data.title || ''}</p>\n        <p class=\"content\" ${colorStyle}>${data.msg}</p>\n        <button class=\"btn\" type=\"button\">${data.btn || lang.transl('_')}</button>\n      `;\r\n        theme.register(el);\r\n        document.body.insertAdjacentElement('afterbegin', el);\r\n        const btn = el.querySelector('.btn');\r\n        btn.focus();\r\n        if (btn) {\r\n            el.addEventListener('click', (ev) => {\r\n                ev.stopPropagation();\r\n            });\r\n            btn.addEventListener('click', () => {\r\n                this.remove(el);\r\n            });\r\n            window.addEventListener(EVT.list.closeCenterPanel, () => {\r\n                this.remove(el);\r\n            });\r\n        }\r\n    }\r\n    remove(el) {\r\n        el && el.parentNode && el.parentNode.removeChild(el);\r\n    }\r\n}\r\nconst msgBox = new MsgBox();\r\nexport { msgBox };\r\n","import { EVT } from './EVT';\r\nimport { lang } from './Lang';\r\nimport { pageType } from './PageType';\r\n// \r\nclass OpenCenterPanel {\r\n    constructor() {\r\n        this.btn = document.createElement('button');\r\n        this.addBtn();\r\n        this.setVisible();\r\n        this.bindEvents();\r\n    }\r\n    addBtn() {\r\n        this.btn = document.createElement('button');\r\n        this.btn.classList.add('rightButton');\r\n        this.btn.id = 'openCenterPanelBtn';\r\n        this.btn.setAttribute('title', lang.transl('_') + ' (Alt + X)');\r\n        this.btn.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\">\n  <use xlink:href=\"#icon-dakai\"></use>\n</svg>`;\r\n        document.body.insertAdjacentElement('afterbegin', this.btn);\r\n    }\r\n    bindEvents() {\r\n        //  CenterPanel  CenterPanel\r\n        this.btn.addEventListener('click', (e) => {\r\n            const ev = e || window.event;\r\n            ev.stopPropagation();\r\n            EVT.fire('openCenterPanel');\r\n        });\r\n        window.addEventListener(EVT.list.centerPanelClosed, () => {\r\n            this.show();\r\n        });\r\n        window.addEventListener(EVT.list.centerPanelOpened, () => {\r\n            this.hide();\r\n        });\r\n        window.addEventListener(EVT.list.pageSwitchedTypeChange, () => {\r\n            this.setVisible();\r\n        });\r\n    }\r\n    show() {\r\n        this.btn.style.display = 'flex';\r\n    }\r\n    hide() {\r\n        this.btn.style.display = 'none';\r\n    }\r\n    // \r\n    setVisible() {\r\n        pageType.type === pageType.list.Unsupported ? this.hide() : this.show();\r\n    }\r\n}\r\nnew OpenCenterPanel();\r\n","import { EVT } from './EVT';\r\n// \r\nvar PageName;\r\n(function (PageName) {\r\n    PageName[PageName[\"Unsupported\"] = -1] = \"Unsupported\";\r\n    PageName[PageName[\"Home\"] = 0] = \"Home\";\r\n    PageName[PageName[\"Artwork\"] = 1] = \"Artwork\";\r\n    PageName[PageName[\"UserHome\"] = 2] = \"UserHome\";\r\n    PageName[PageName[\"BookmarkLegacy\"] = 3] = \"BookmarkLegacy\";\r\n    PageName[PageName[\"Bookmark\"] = 4] = \"Bookmark\";\r\n    PageName[PageName[\"ArtworkSerach\"] = 5] = \"ArtworkSerach\";\r\n    PageName[PageName[\"AreaRanking\"] = 6] = \"AreaRanking\";\r\n    PageName[PageName[\"ArtworkRanking\"] = 7] = \"ArtworkRanking\";\r\n    PageName[PageName[\"Pixivision\"] = 8] = \"Pixivision\";\r\n    PageName[PageName[\"BookmarkDetail\"] = 9] = \"BookmarkDetail\";\r\n    PageName[PageName[\"NewArtworkBookmark\"] = 10] = \"NewArtworkBookmark\";\r\n    PageName[PageName[\"Discover\"] = 11] = \"Discover\";\r\n    PageName[PageName[\"NewArtwork\"] = 12] = \"NewArtwork\";\r\n    PageName[PageName[\"Novel\"] = 13] = \"Novel\";\r\n    PageName[PageName[\"NovelSeries\"] = 14] = \"NovelSeries\";\r\n    PageName[PageName[\"NovelSearch\"] = 15] = \"NovelSearch\";\r\n    PageName[PageName[\"NovelRanking\"] = 16] = \"NovelRanking\";\r\n    PageName[PageName[\"NewNovelBookmark\"] = 17] = \"NewNovelBookmark\";\r\n    PageName[PageName[\"NewNovel\"] = 18] = \"NewNovel\";\r\n    PageName[PageName[\"ArtworkSeries\"] = 19] = \"ArtworkSeries\";\r\n    PageName[PageName[\"Following\"] = 20] = \"Following\";\r\n})(PageName || (PageName = {}));\r\n// \r\nclass PageType {\r\n    constructor() {\r\n        // \r\n        this.type = PageName.Unsupported;\r\n        // \r\n        this.list = PageName;\r\n        this.type = this.getType();\r\n        window.addEventListener(EVT.list.pageSwitch, () => {\r\n            this.checkTypeChange();\r\n        });\r\n    }\r\n    getType() {\r\n        const url = window.location.href;\r\n        const pathname = window.location.pathname;\r\n        if (window.location.hostname === 'www.pixiv.net' &&\r\n            ['/', '/manga', '/novel/', '/en/'].includes(pathname)) {\r\n            return PageName.Home;\r\n        }\r\n        else if (/\\/artworks\\/\\d{1,10}/.test(url)) {\r\n            return PageName.Artwork;\r\n        }\r\n        else if (/\\/users\\/\\d+/.test(url) && !url.includes('/bookmarks')) {\r\n            if (pathname.includes('/following') ||\r\n                pathname.includes('/mypixiv') ||\r\n                pathname.includes('/followers')) {\r\n                return PageName.Following;\r\n            }\r\n            else {\r\n                return PageName.UserHome;\r\n            }\r\n        }\r\n        else if (pathname.endsWith('bookmark.php')) {\r\n            return PageName.BookmarkLegacy;\r\n        }\r\n        else if (pathname.includes('/bookmarks/')) {\r\n            return PageName.Bookmark;\r\n        }\r\n        else if (url.includes('/tags/')) {\r\n            return pathname.endsWith('/novels')\r\n                ? PageName.NovelSearch\r\n                : PageName.ArtworkSerach;\r\n        }\r\n        else if (pathname === '/ranking_area.php' && location.search !== '') {\r\n            return PageName.AreaRanking;\r\n        }\r\n        else if (pathname === '/ranking.php') {\r\n            return PageName.ArtworkRanking;\r\n        }\r\n        else if (url.includes('https://www.pixivision.net') &&\r\n            url.includes('/a/')) {\r\n            return PageName.Pixivision;\r\n        }\r\n        else if (url.includes('/bookmark_add.php?id=') ||\r\n            url.includes('/bookmark_detail.php?illust_id=')) {\r\n            return PageName.BookmarkDetail;\r\n        }\r\n        else if (url.includes('/bookmark_new_illust.php') ||\r\n            url.includes('/bookmark_new_illust_r18.php')) {\r\n            return PageName.NewArtworkBookmark;\r\n        }\r\n        else if (pathname === '/discovery') {\r\n            return PageName.Discover;\r\n        }\r\n        else if (url.includes('/new_illust.php') ||\r\n            url.includes('/new_illust_r18.php')) {\r\n            return PageName.NewArtwork;\r\n        }\r\n        else if (pathname === '/novel/show.php') {\r\n            return PageName.Novel;\r\n        }\r\n        else if (pathname.startsWith('/novel/series/')) {\r\n            return PageName.NovelSeries;\r\n        }\r\n        else if (pathname === '/novel/ranking.php') {\r\n            return PageName.NovelRanking;\r\n        }\r\n        else if (pathname.startsWith('/novel/bookmark_new')) {\r\n            return PageName.NewNovelBookmark;\r\n        }\r\n        else if (pathname.startsWith('/novel/new')) {\r\n            return PageName.NewNovel;\r\n        }\r\n        else if (pathname.startsWith('/user/') && pathname.includes('/series/')) {\r\n            return PageName.ArtworkSeries;\r\n        }\r\n        else {\r\n            // \r\n            return PageName.Unsupported;\r\n        }\r\n    }\r\n    // \r\n    checkTypeChange() {\r\n        const old = this.type;\r\n        this.type = this.getType();\r\n        if (this.type !== old) {\r\n            EVT.fire('pageSwitchedTypeChange', this.type);\r\n        }\r\n        else {\r\n            EVT.fire('pageSwitchedTypeNotChange', this.type);\r\n        }\r\n    }\r\n}\r\nconst pageType = new PageType();\r\nexport { pageType };\r\n","import { Tools } from './Tools';\r\nimport { Colors } from './config/Colors';\r\nimport { lang } from './Lang';\r\nimport { EVT } from './EVT';\r\nimport { states } from './store/States';\r\nimport { toast } from './Toast';\r\nimport { msgBox } from './MsgBox';\r\n// \r\nclass SelectWork {\r\n    constructor() {\r\n        this.created = false;\r\n        this.selectorId = 'selectWorkEl';\r\n        this.left = 0;\r\n        this.top = 0;\r\n        this.half = 10; // \r\n        this._start = false;\r\n        this._pause = false;\r\n        this._tempHide = false; //  display\r\n        this.controlBtn = document.createElement('button'); // \r\n        this.crawlBtn = document.createElement('button'); // \r\n        this.clearBtn = document.createElement('button'); // \r\n        this.selectedWorkFlagClass = 'selectedWorkFlag'; //  class\r\n        this.positionValue = ['relative', 'absolute', 'fixed']; // \r\n        this.artworkReg = /artworks\\/(\\d{2,15})/;\r\n        this.novelReg = /novel\\/show\\.php\\?id=(\\d{2,15})/;\r\n        // \r\n        // root ; js-mount-point-discovery \r\n        this.worksWrapperSelectorList = [\r\n            '#root',\r\n            '#js-mount-point-discovery',\r\n        ];\r\n        // \r\n        this.usedWorksWrapperSelector = this.worksWrapperSelectorList[0];\r\n        this.idList = [];\r\n        this.observeTimer = 0;\r\n        this.sendCrawl = false; // \r\n        this.crawled = false; // \r\n        if (!this.created && location.hostname.endsWith('.pixiv.net')) {\r\n            this.created = true;\r\n            this.selector = this.createSelectorEl();\r\n            this.addBtn();\r\n            this.bindEvents();\r\n        }\r\n    }\r\n    get start() {\r\n        return this._start;\r\n    }\r\n    set start(bool) {\r\n        this._start = bool;\r\n        this.updateSelectorEl();\r\n        this.updateControlBtn();\r\n    }\r\n    get pause() {\r\n        return this._pause;\r\n    }\r\n    set pause(bool) {\r\n        this._pause = bool;\r\n        this.updateSelectorEl();\r\n        this.updateControlBtn();\r\n    }\r\n    get tempHide() {\r\n        return this._tempHide;\r\n    }\r\n    set tempHide(bool) {\r\n        this._tempHide = bool;\r\n        this.updateSelectorEl();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.openCenterPanel, () => {\r\n            this.tempHide = true;\r\n        });\r\n        window.addEventListener(EVT.list.closeCenterPanel, () => {\r\n            this.tempHide = false;\r\n        });\r\n        //  id \r\n        window.addEventListener(EVT.list.crawlFinish, () => {\r\n            if (this.sendCrawl) {\r\n                this.sendCrawl = false;\r\n                this.crawled = true;\r\n            }\r\n        });\r\n        //  Alt + S \r\n        window.addEventListener('keydown', (ev) => {\r\n            if (ev.altKey && ev.code === 'KeyS') {\r\n                this.controlBtn.click();\r\n            }\r\n        });\r\n        // \r\n        window.addEventListener('mousemove', (ev) => {\r\n            this.moveEvent(ev);\r\n        }, true);\r\n        // \r\n        window.onbeforeunload = () => {\r\n            // \r\n            if (this.idList.length > 0 && !this.crawled) {\r\n                msgBox.error(lang.transl('_'), {\r\n                    btn: lang.transl('_'),\r\n                });\r\n                return false;\r\n            }\r\n        };\r\n        // \r\n        //  pixiv \r\n        //  dom  dom \r\n        //  dom  reAddAllFlag \r\n        window.addEventListener(EVT.list.pageSwitch, () => {\r\n            // \r\n            let worksWrapper = null;\r\n            for (const selector of this.worksWrapperSelectorList) {\r\n                worksWrapper = document.querySelector(selector);\r\n                if (worksWrapper) {\r\n                    this.usedWorksWrapperSelector = selector;\r\n                    break;\r\n                }\r\n            }\r\n            if (worksWrapper === null) {\r\n                return;\r\n            }\r\n            // \r\n            const ob = new MutationObserver((records) => {\r\n                window.clearTimeout(this.observeTimer);\r\n                this.observeTimer = window.setTimeout(() => {\r\n                    this.reAddAllFlag();\r\n                }, 300);\r\n                // \r\n            });\r\n            ob.observe(worksWrapper, {\r\n                childList: true,\r\n                subtree: true,\r\n            });\r\n        });\r\n    }\r\n    clearIdList() {\r\n        //  id  id\r\n        this.removeAllSelectedFlag();\r\n        this.idList = [];\r\n        this.updateCrawlBtn();\r\n    }\r\n    createSelectorEl() {\r\n        const el = document.createElement('div');\r\n        el.id = this.selectorId;\r\n        document.body.appendChild(el);\r\n        return el;\r\n    }\r\n    updateSelectorEl() {\r\n        if (!this.selector) {\r\n            return;\r\n        }\r\n        const show = this.start && !this.pause && !this.tempHide;\r\n        this.selector.style.display = show ? 'block' : 'none';\r\n        //  style  display  noneChrome \r\n        // \r\n        if (show) {\r\n            this.selector.style.left = this.left - this.half + 'px';\r\n            this.selector.style.top = this.top - this.half + 'px';\r\n        }\r\n    }\r\n    addBtn() {\r\n        this.controlBtn = Tools.addBtn('selectWorkBtns', Colors.bgGreen, lang.transl('_'));\r\n        this.updateControlBtn();\r\n        this.clearBtn = Tools.addBtn('selectWorkBtns', Colors.bgRed, lang.transl('_'));\r\n        this.clearBtn.style.display = 'none';\r\n        this.clearBtn.addEventListener('click', () => {\r\n            this.clearIdList();\r\n        });\r\n        this.crawlBtn = Tools.addBtn('selectWorkBtns', Colors.bgBlue, lang.transl('_'));\r\n        this.crawlBtn.style.display = 'none';\r\n        this.crawlBtn.addEventListener('click', (ev) => {\r\n            this.downloadSelect();\r\n        });\r\n    }\r\n    // \r\n    updateControlBtn() {\r\n        if (!this.start) {\r\n            this.controlBtn.textContent = lang.transl('_');\r\n            this.controlBtn.onclick = (ev) => {\r\n                this.startSelect(ev);\r\n                this.clearBtn.style.display = 'block';\r\n            };\r\n        }\r\n        else {\r\n            if (!this.pause) {\r\n                this.controlBtn.textContent = lang.transl('_');\r\n                this.controlBtn.onclick = (ev) => {\r\n                    this.pauseSelect();\r\n                };\r\n            }\r\n            else {\r\n                this.controlBtn.textContent = lang.transl('_');\r\n                this.controlBtn.onclick = (ev) => {\r\n                    this.startSelect(ev);\r\n                };\r\n            }\r\n        }\r\n    }\r\n    // \r\n    updateCrawlBtn() {\r\n        this.crawlBtn.style.display = this.start ? 'block' : 'none';\r\n        if (this.idList.length > 0) {\r\n            this.crawlBtn.textContent =\r\n                lang.transl('_') + ` ${this.idList.length}`;\r\n        }\r\n        else {\r\n            this.crawlBtn.textContent = lang.transl('_');\r\n        }\r\n    }\r\n    // \r\n    clickEvent(ev) {\r\n        const workId = this.findWork(ev.path || ev.composedPath());\r\n        if (workId) {\r\n            // \r\n            ev.preventDefault();\r\n            // \r\n            const index = this.idList.findIndex((item) => {\r\n                return item.id === workId.id && item.type === workId.type;\r\n            });\r\n            //  id  idList \r\n            if (index === -1) {\r\n                this.idList.push(workId);\r\n                this.crawled = false;\r\n                this.addSelectedFlag(ev.target, workId.id);\r\n            }\r\n            else {\r\n                // id \r\n                this.idList.splice(index, 1);\r\n                this.removeSelectedFlag(workId.id);\r\n            }\r\n            this.updateCrawlBtn();\r\n        }\r\n    }\r\n    // \r\n    // \r\n    moveEvent(ev) {\r\n        this.left = ev.x;\r\n        this.top = ev.y;\r\n        this.updateSelectorEl();\r\n    }\r\n    // esc \r\n    escEvent(ev) {\r\n        if (ev.code === 'Escape') {\r\n            this.pauseSelect();\r\n        }\r\n    }\r\n    // \r\n    startSelect(ev) {\r\n        this.start = true;\r\n        if (this.pause) {\r\n            // \r\n            this.pause = false;\r\n        }\r\n        else {\r\n            // \r\n            this.clearIdList();\r\n        }\r\n        this.bindClickEvent = this.clickEvent.bind(this);\r\n        this.bindEscEvent = this.escEvent.bind(this);\r\n        window.addEventListener('click', this.bindClickEvent, true);\r\n        document.addEventListener('keyup', this.bindEscEvent);\r\n        EVT.fire('closeCenterPanel');\r\n    }\r\n    pauseSelect() {\r\n        this.pause = true;\r\n        this.bindClickEvent &&\r\n            window.removeEventListener('click', this.bindClickEvent, true);\r\n        this.bindEscEvent &&\r\n            document.removeEventListener('keyup', this.bindEscEvent);\r\n    }\r\n    // \r\n    downloadSelect() {\r\n        if (states.busy) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        this.pauseSelect();\r\n        if (this.idList.length > 0) {\r\n            //  id  id \r\n            EVT.fire('crawlIdList', Array.from(this.idList));\r\n            this.sendCrawl = true;\r\n            this.crawled = false;\r\n        }\r\n        else {\r\n            toast.error(lang.transl('_'));\r\n        }\r\n    }\r\n    //  id\r\n    findWork(arr) {\r\n        for (const el of arr) {\r\n            //  a \r\n            if (el.nodeName === 'A') {\r\n                const href = el.href;\r\n                // \r\n                const test = this.artworkReg.exec(href);\r\n                if (test && test[1]) {\r\n                    return {\r\n                        type: 'unknown',\r\n                        id: test[1],\r\n                    };\r\n                }\r\n                // \r\n                const test2 = this.novelReg.exec(href);\r\n                if (test2 && test2[1]) {\r\n                    return {\r\n                        type: 'novels',\r\n                        id: test2[1],\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // \r\n    addSelectedFlag(el, id) {\r\n        var _a;\r\n        const i = document.createElement('i');\r\n        i.classList.add(this.selectedWorkFlagClass);\r\n        i.dataset.id = id;\r\n        i.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\">\n      <use xlink:href=\"#icon-select\"></use>\n    </svg>`;\r\n        let target = el;\r\n        //  svg  svg  svg \r\n        //  svg  pixiv \r\n        if (el.nodeName === 'svg' || ((_a = el.parentElement) === null || _a === void 0 ? void 0 : _a.nodeName) === 'svg') {\r\n            target = el.parentElement;\r\n        }\r\n        target.insertAdjacentElement('beforebegin', i);\r\n        // \r\n        if (target.parentElement) {\r\n            const position = window.getComputedStyle(target.parentElement)['position'];\r\n            if (!this.positionValue.includes(position)) {\r\n                target.parentElement.style.position = 'relative';\r\n            }\r\n        }\r\n    }\r\n    // \r\n    reAddAllFlag() {\r\n        if (this.idList.length === 0) {\r\n            return;\r\n        }\r\n        for (const { id, type } of this.idList) {\r\n            if (this.getSelectedFlag(id)) {\r\n                // \r\n                /**\r\n                 *  https://www.pixiv.net/users/18095070/illustrations\r\n                 *  tag  https://www.pixiv.net/users/18095070/illustrations/%E5%A5%B3%E3%81%AE%E5%AD%90\r\n                 * pixiv \r\n                 */\r\n                return;\r\n            }\r\n            let el;\r\n            if (type === 'novels') {\r\n                el = document.querySelector(`${this.usedWorksWrapperSelector} a[href=\"/novel/show.php?id=${id}\"]`);\r\n            }\r\n            else {\r\n                el = document.querySelector(`${this.usedWorksWrapperSelector} a[href=\"/artworks/${id}\"]`);\r\n            }\r\n            if (el) {\r\n                // \r\n                this.addSelectedFlag(el, id);\r\n            }\r\n        }\r\n    }\r\n    getSelectedFlag(id) {\r\n        return document.querySelector(`.${this.selectedWorkFlagClass}[data-id='${id}']`);\r\n    }\r\n    // \r\n    removeSelectedFlag(id) {\r\n        const el = this.getSelectedFlag(id);\r\n        el && el.remove();\r\n    }\r\n    // \r\n    removeAllSelectedFlag() {\r\n        for (const item of this.idList) {\r\n            this.removeSelectedFlag(item.id);\r\n        }\r\n    }\r\n}\r\nnew SelectWork();\r\n","import { lang } from './Lang';\r\nimport { Config } from './config/Config';\r\nimport { msgBox } from './MsgBox';\r\nclass ShowHowToUse {\r\n    constructor() {\r\n        this.flag = 'xzHowToUse';\r\n        this.check();\r\n    }\r\n    check() {\r\n        const query = window.localStorage.getItem(this.flag);\r\n        if (!query) {\r\n            this.show();\r\n        }\r\n    }\r\n    show() {\r\n        msgBox.show(lang.transl('_HowToUse'), {\r\n            title: Config.appName,\r\n            btn: lang.transl('_'),\r\n        });\r\n        window.localStorage.setItem(this.flag, '1');\r\n    }\r\n}\r\nnew ShowHowToUse();\r\n","import { lang } from './Lang';\r\nimport { Config } from './config/Config';\r\nimport { msgBox } from './MsgBox';\r\nimport { Utils } from './utils/Utils';\r\n// \r\nclass ShowWhatIsNew {\r\n    constructor() {\r\n        this.flag = 'xzNew920';\r\n        this.msg = lang.transl('_') + ': <br>' + lang.transl('_');\r\n        this.storeName = 'xzNewVerTag';\r\n        this.show();\r\n    }\r\n    show() {\r\n        const value = localStorage.getItem(this.storeName);\r\n        if (Utils.isPixiv() && value !== this.flag) {\r\n            msgBox.show(this.msg, {\r\n                title: Config.appName + ` ${lang.transl('_')}`,\r\n                btn: lang.transl('_'),\r\n            });\r\n            localStorage.setItem(this.storeName, this.flag);\r\n        }\r\n    }\r\n}\r\nnew ShowWhatIsNew();\r\n","import { EVT } from './EVT';\r\nimport { Utils } from './utils/Utils';\r\n// \r\nclass Theme {\r\n    constructor() {\r\n        this.allTheme = ['white', 'dark'];\r\n        this.defaultTheme = 'white'; // \r\n        this.theme = 'white'; // \r\n        this.settingTheme = ''; // \r\n        //  className\r\n        //  className\r\n        //  white  className  className\r\n        this.classNameMap = new Map([\r\n            ['white', ''],\r\n            ['dark', 'theme-dark'],\r\n        ]);\r\n        this.selector = '#gtm-var-theme-kind'; // \r\n        this.timer = 0;\r\n        // \r\n        this.htmlFlagMap = new Map([\r\n            ['', 'white'],\r\n            ['default', 'white'],\r\n            ['dark', 'dark'],\r\n        ]);\r\n        this.elList = []; // \r\n        if (Utils.isPixiv()) {\r\n            this.bindEvents();\r\n        }\r\n    }\r\n    bindEvents() {\r\n        // \r\n        window.addEventListener(EVT.list.settingChange, (ev) => {\r\n            const data = ev.detail.data;\r\n            if (data.name === 'theme') {\r\n                this.settingTheme = data.value;\r\n                this.setTheme(data.value);\r\n            }\r\n        });\r\n        // \r\n        this.timer = window.setInterval(() => {\r\n            this.findFlag();\r\n        }, 300);\r\n    }\r\n    //  pixiv \r\n    findFlag() {\r\n        const el = document.querySelector(this.selector);\r\n        if (el) {\r\n            window.clearInterval(this.timer);\r\n            this.setTheme(this.getThemeFromHtml());\r\n            //  textContent \r\n            const ob = new MutationObserver((mutationsList) => {\r\n                for (const item of mutationsList) {\r\n                    if (item.type === 'characterData') {\r\n                        this.setTheme(this.getThemeFromHtml());\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n            ob.observe(el, {\r\n                characterData: true,\r\n                subtree: true,\r\n            });\r\n        }\r\n    }\r\n    getThemeFromHtml() {\r\n        //  pixiv \r\n        const el = document.querySelector(this.selector);\r\n        if (el) {\r\n            return this.htmlFlagMap.get(el.textContent) || this.defaultTheme;\r\n        }\r\n        //  html \r\n        // \"rgb(245, 245, 245)\"\r\n        // \"rgb(0, 0, 0)\"\r\n        const htmlBG = getComputedStyle(document.documentElement)['backgroundColor'];\r\n        if (htmlBG) {\r\n            if (htmlBG.includes('rgb(2')) {\r\n                return 'white';\r\n            }\r\n            else if (htmlBG.includes('rgb(0')) {\r\n                return 'dark';\r\n            }\r\n        }\r\n        return this.defaultTheme;\r\n    }\r\n    setTheme(flag) {\r\n        // \r\n        if (this.allTheme.includes(this.settingTheme)) {\r\n            flag = this.settingTheme;\r\n        }\r\n        let result = 'white'; // \r\n        // \r\n        switch (flag) {\r\n            case 'white':\r\n                result = 'white';\r\n                break;\r\n            case 'dark':\r\n                result = 'dark';\r\n                break;\r\n            default:\r\n                //  'auto'\r\n                result = this.getThemeFromHtml() || this.defaultTheme;\r\n                break;\r\n        }\r\n        // \r\n        if (result !== this.theme) {\r\n            this.theme = result;\r\n            for (const el of this.elList) {\r\n                this.setClass(el);\r\n            }\r\n        }\r\n    }\r\n    // \r\n    register(el) {\r\n        if (!Utils.isPixiv()) {\r\n            return;\r\n        }\r\n        this.elList.push(el);\r\n        this.setClass(el);\r\n    }\r\n    //  className\r\n    setClass(el) {\r\n        //  className\r\n        for (const className of this.classNameMap.values()) {\r\n            if (el.classList.contains(className)) {\r\n                el.classList.remove(className);\r\n            }\r\n        }\r\n        //  className\r\n        const name = this.classNameMap.get(this.theme);\r\n        name && el.classList.add(name);\r\n    }\r\n}\r\nconst theme = new Theme();\r\nexport { theme };\r\n","// \r\n//  has_tip  className data-tip \r\nclass Tip {\r\n    constructor() {\r\n        this.tipEl = document.createElement('div'); // tip \r\n        this.addTipEl();\r\n        this.bindEvents();\r\n    }\r\n    addTipEl() {\r\n        this.tipEl = document.createElement('div');\r\n        this.tipEl.id = 'tip';\r\n        document.body.insertAdjacentElement('afterbegin', this.tipEl);\r\n    }\r\n    bindEvents() {\r\n        const tips = document.querySelectorAll('.has_tip');\r\n        for (const el of tips) {\r\n            for (const ev of ['mouseenter', 'mouseleave']) {\r\n                el.addEventListener(ev, (event) => {\r\n                    const e = (event || window.event);\r\n                    const text = el.dataset.tip;\r\n                    this.showTip(text, {\r\n                        type: ev === 'mouseenter' ? 1 : 0,\r\n                        x: e.clientX,\r\n                        y: e.clientY,\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n    //  mouse \r\n    showTip(text, mouse) {\r\n        if (!text) {\r\n            throw new Error('No tip text.');\r\n        }\r\n        if (mouse.type === 1) {\r\n            this.tipEl.innerHTML = text;\r\n            this.tipEl.style.left = mouse.x + 30 + 'px';\r\n            this.tipEl.style.top = mouse.y - 30 + 'px';\r\n            this.tipEl.style.display = 'block';\r\n        }\r\n        else if (mouse.type === 0) {\r\n            this.tipEl.style.display = 'none';\r\n        }\r\n    }\r\n}\r\nnew Tip();\r\n","import { Colors } from './config/Colors';\r\n// \r\n// \r\nclass Toast {\r\n    constructor() {\r\n        this.defaultCfg = {\r\n            msg: '',\r\n            color: Colors.white,\r\n            bgColor: Colors.bgBrightBlue,\r\n            dealy: 1500,\r\n            enter: 'up',\r\n            leave: 'fade',\r\n            position: 'topCenter',\r\n        };\r\n        this.successCfg = {\r\n            msg: '',\r\n            color: Colors.white,\r\n            bgColor: Colors.bgSuccess,\r\n            dealy: 1500,\r\n            enter: 'up',\r\n            leave: 'fade',\r\n            position: 'topCenter',\r\n        };\r\n        this.warningCfg = {\r\n            msg: '',\r\n            color: Colors.white,\r\n            bgColor: Colors.bgWarning,\r\n            dealy: 1500,\r\n            enter: 'up',\r\n            leave: 'fade',\r\n            position: 'topCenter',\r\n        };\r\n        this.errorCfg = {\r\n            msg: '',\r\n            color: Colors.white,\r\n            bgColor: Colors.bgError,\r\n            dealy: 1500,\r\n            enter: 'up',\r\n            leave: 'fade',\r\n            position: 'topCenter',\r\n        };\r\n        this.tipClassName = 'xzToast';\r\n        this.mousePosition = { x: 0, y: 0 };\r\n        this.minTop = 20;\r\n        this.once = 1; // \r\n        this.total = 20; // \r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        //  mousemove  click\r\n        window.addEventListener('mousemove', (ev) => {\r\n            this.mousePosition.x = ev.x;\r\n            this.mousePosition.y = ev.y;\r\n        });\r\n    }\r\n    show(msg, arg) {\r\n        this.create(Object.assign({}, this.defaultCfg, arg, { msg: msg }));\r\n    }\r\n    success(msg, arg) {\r\n        this.create(Object.assign({}, this.successCfg, arg, { msg: msg }));\r\n    }\r\n    warning(msg, arg) {\r\n        this.create(Object.assign({}, this.warningCfg, arg, { msg: msg }));\r\n    }\r\n    error(msg, arg) {\r\n        this.create(Object.assign({}, this.errorCfg, arg, { msg: msg }));\r\n    }\r\n    create(arg) {\r\n        const span = document.createElement('span');\r\n        span.textContent = arg.msg;\r\n        span.style.color = arg.color;\r\n        //  color\r\n        span.style.backgroundColor = arg.bgColor;\r\n        span.style.opacity = '0'; // \r\n        // \r\n        span.classList.add(this.tipClassName);\r\n        document.body.appendChild(span);\r\n        //  left\r\n        // \r\n        let centerPoint = window.innerWidth / 2;\r\n        if (arg.position === 'mouse') {\r\n            // \r\n            centerPoint = this.mousePosition.x;\r\n        }\r\n        //  left\r\n        const rect = span.getBoundingClientRect();\r\n        let left = centerPoint - rect.width / 2;\r\n        const minLeft = 0; // \r\n        const maxLeft = window.innerWidth - rect.width; // \r\n        if (left < minLeft) {\r\n            left = minLeft;\r\n        }\r\n        if (left > maxLeft) {\r\n            left = maxLeft;\r\n        }\r\n        span.style.left = left + 'px';\r\n        //  top\r\n        let lastTop = 0;\r\n        if (arg.position === 'topCenter') {\r\n            lastTop = this.minTop;\r\n        }\r\n        else if (arg.position === 'mouse') {\r\n            // \r\n            // top \r\n            let y = this.mousePosition.y - 40;\r\n            if (y < this.minTop) {\r\n                y = this.minTop;\r\n            }\r\n            lastTop = y;\r\n        }\r\n        // \r\n        if (arg.enter === 'none') {\r\n            span.style.top = lastTop + 'px';\r\n            span.style.opacity = '1';\r\n        }\r\n        else {\r\n            this.enter(span, arg.enter, lastTop);\r\n        }\r\n        // \r\n        window.setTimeout(() => {\r\n            if (arg.leave === 'none') {\r\n                span.remove();\r\n            }\r\n            else {\r\n                this.leave(span, arg.leave, lastTop);\r\n            }\r\n        }, arg.dealy);\r\n    }\r\n    // \r\n    enter(el, way, lastTop) {\r\n        const startTop = lastTop + this.total; //  top \r\n        const once = 2;\r\n        const total = this.total;\r\n        let numberOfTimes = 0; // \r\n        const frame = function (timestamp) {\r\n            numberOfTimes++;\r\n            // \r\n            const move = once * numberOfTimes;\r\n            // \r\n            const opacity = move / total;\r\n            if (move <= total && opacity <= 1) {\r\n                if (way === 'up') {\r\n                    el.style.top = startTop - move + 'px';\r\n                }\r\n                el.style.opacity = opacity.toString();\r\n                // \r\n                window.requestAnimationFrame(frame);\r\n            }\r\n        };\r\n        window.requestAnimationFrame(frame);\r\n    }\r\n    // \r\n    leave(el, way, lastTop) {\r\n        const startTop = lastTop; //  top \r\n        const once = this.once;\r\n        const total = this.total;\r\n        let numberOfTimes = 0; // \r\n        const frame = function (timestamp) {\r\n            numberOfTimes++;\r\n            // \r\n            const move = once * numberOfTimes;\r\n            // \r\n            const opacity = 1 - move / total;\r\n            if (move < total && opacity > 0) {\r\n                if (way === 'up') {\r\n                    el.style.top = startTop - move + 'px';\r\n                }\r\n                el.style.opacity = opacity.toString();\r\n                // \r\n                window.requestAnimationFrame(frame);\r\n            }\r\n            else {\r\n                // \r\n                el.remove();\r\n            }\r\n        };\r\n        window.requestAnimationFrame(frame);\r\n    }\r\n}\r\nconst toast = new Toast();\r\nexport { toast };\r\n","import { EVT } from './EVT';\r\nimport { Utils } from './utils/Utils';\r\n//  token\r\nclass Token {\r\n    constructor() {\r\n        this.tokenStore = 'xzToken';\r\n        this.timeStore = 'xzTokenTime';\r\n        this.updateURL = 'https://www.pixiv.net/artworks/62751951';\r\n        if (Utils.isPixiv()) {\r\n            this.token = this.getToken();\r\n            this.updateToken();\r\n            this.bindEvents();\r\n        }\r\n    }\r\n    bindEvents() {\r\n        //  token token  token\r\n        window.addEventListener(EVT.list.resetSettings, () => {\r\n            this.reset();\r\n        });\r\n    }\r\n    getToken() {\r\n        const token = localStorage.getItem(this.tokenStore);\r\n        return token ? token : '';\r\n    }\r\n    updateToken() {\r\n        const interval = 300000; //  5 \r\n        const nowTime = new Date().getTime();\r\n        const lastTimeStr = localStorage.getItem(this.timeStore);\r\n        if (this.token &&\r\n            lastTimeStr &&\r\n            nowTime - Number.parseInt(lastTimeStr) < interval) {\r\n            return;\r\n        }\r\n        //  token \r\n        fetch(this.updateURL)\r\n            .then((response) => {\r\n            return response.text();\r\n        })\r\n            .then((data) => {\r\n            const result = data.match(/token\":\"(\\w+)\"/);\r\n            if (result) {\r\n                this.token = result[1];\r\n                localStorage.setItem(this.tokenStore, this.token);\r\n                localStorage.setItem(this.timeStore, new Date().getTime().toString());\r\n            }\r\n            else {\r\n                console.error('UpdateToken failed: no token found!');\r\n            }\r\n        });\r\n    }\r\n    reset() {\r\n        this.token = '';\r\n        localStorage.removeItem(this.tokenStore);\r\n        localStorage.removeItem(this.timeStore);\r\n        this.updateToken();\r\n    }\r\n}\r\nconst token = new Token();\r\nexport { token };\r\n","import { Utils } from './utils/Utils';\r\nclass Tools {\r\n    // \r\n    static sortUgoiraFirst(a, b) {\r\n        if (a.type === 2 && b.type !== 2) {\r\n            return -1;\r\n        }\r\n        else if (a.type === 2 && b.type === 2) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return 1;\r\n        }\r\n    }\r\n    //  tag  R-18(G) \r\n    static isR18OrR18G(tags) {\r\n        const str = Array.isArray(tags) ? tags.toString() : tags;\r\n        return (str.includes('R-18') ||\r\n            str.includes('R-18G') ||\r\n            str.includes('R18') ||\r\n            str.includes('R18G'));\r\n    }\r\n    //  url  tag\r\n    static getTagFromURL(url = location.href) {\r\n        const nowURL = new URL(url);\r\n        // 2 \r\n        if (/\\/users\\/\\d+/.test(url) && !url.includes('/bookmarks')) {\r\n            //  pathname  id \r\n            const test = nowURL.pathname.match(/\\/users\\/\\d+(\\/.+)/);\r\n            if (test && test.length === 2) {\r\n                const str = test[1];\r\n                //  id  tag\r\n                // https://www.pixiv.net/users/2188232/illustrations/ghostblade\r\n                const array = str.split('/');\r\n                // [\"\", \"illustrations\", \"ghostblade\"]\r\n                if (array.length > 2) {\r\n                    return decodeURIComponent(array[array.length - 1]);\r\n                }\r\n            }\r\n        }\r\n        // 4 \r\n        if (nowURL.pathname === '/bookmark.php') {\r\n            if (parseInt(Utils.getURLSearchField(nowURL.href, 'untagged')) === 1) {\r\n                //   tag \r\n                // https://www.pixiv.net/bookmark.php?untagged=1\r\n                return '';\r\n            }\r\n        }\r\n        // 4 \r\n        if (nowURL.pathname.includes('/bookmarks/')) {\r\n            //  urltag \r\n            // https://www.pixiv.net/users/9460149/bookmarks/artworks/R-18\r\n            // https://www.pixiv.net/users/9460149/bookmarks/novels/R-18\r\n            const test = /\\/bookmarks\\/\\w*\\/(.[^\\/|^\\?|^&]*)/.exec(nowURL.pathname);\r\n            if (test !== null && test.length > 1 && !!test[1]) {\r\n                return decodeURIComponent(test[1]);\r\n            }\r\n        }\r\n        // 5 \r\n        if (nowURL.pathname.includes('/tags/')) {\r\n            return decodeURIComponent(nowURL.pathname.split('tags/')[1].split('/')[0]);\r\n        }\r\n        // \r\n        // https://www.pixiv.net/bookmark.php?tag=R-18\r\n        return decodeURIComponent(Utils.getURLSearchField(nowURL.href, 'tag'));\r\n    }\r\n    //  url  artworks id\r\n    //  url url  url id\r\n    //  id \r\n    static getIllustId(url) {\r\n        const str = url || window.location.search || location.href;\r\n        let result = '';\r\n        if (str.includes('illust_id')) {\r\n            //  url\r\n            const test = /illust_id=(\\d*\\d)/.exec(str);\r\n            if (test && test.length > 1) {\r\n                result = test[1];\r\n            }\r\n        }\r\n        else if (str.includes('/artworks/')) {\r\n            //  url\r\n            const test = /artworks\\/(\\d*\\d)/.exec(str);\r\n            if (test && test.length > 1) {\r\n                result = test[1];\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    //  url  novel id\r\n    //  url url  url id\r\n    //  id \r\n    // https://www.pixiv.net/novel/show.php?id=12771688\r\n    static getNovelId(url) {\r\n        const str = url || window.location.search || location.href;\r\n        let result = '';\r\n        const test = str.match(/\\?id=(\\d*)?/);\r\n        if (test && test.length > 1) {\r\n            result = test[1];\r\n        }\r\n        return result;\r\n    }\r\n    //  id\r\n    //  api\r\n    //  https://www.pixiv.net/artworks/79399027  userId  13895186\r\n    static getUserId() {\r\n        const newRegExp = /\\/users\\/(\\d+)/; //  /users/  id\r\n        //  url \r\n        const test4 = newRegExp.exec(location.pathname);\r\n        if (!!test4 && test4.length > 1 && !!test4[1]) {\r\n            return test4[1];\r\n        }\r\n        //  id \r\n        const testA = document.querySelector('.sc-LzOjP a') ||\r\n            document.querySelector('aside a') ||\r\n            document.querySelector('nav a');\r\n        //  a \r\n        //  a \r\n        //  a \r\n        if (testA && testA.href) {\r\n            const test5 = newRegExp.exec(testA.href);\r\n            if (!!test5 && test5.length > 1 && !!test5[1]) {\r\n                return test5[1];\r\n            }\r\n        }\r\n        //  head  script \r\n        // pixiv.context.user.id = \"<userid>\"\r\n        const test1 = /user.id = \"(\\d*)\"/.exec(document.head.innerHTML);\r\n        if (test1 && test1.length > 0) {\r\n            return test1[1];\r\n        }\r\n        //  head  script \r\n        // pixiv.context.userId = \"<userid>\"\r\n        const test2 = /userId = \"(\\d*)\"/.exec(document.head.innerHTML);\r\n        if (test2 && test2.length > 0) {\r\n            return test2[1];\r\n        }\r\n        //  body \r\n        // Warning  id\r\n        const test3 = newRegExp.exec(document.body.innerHTML);\r\n        if (test3) {\r\n            return test3[1];\r\n        }\r\n        // \r\n        throw new Error('getUserId failed!');\r\n    }\r\n    //  Pixiv \r\n    /*\r\n    newindex-inner \r\n    layout-body \r\n    */\r\n    static insertToHead(el) {\r\n        if (document.body) {\r\n            document.body.insertAdjacentElement('afterbegin', el);\r\n        }\r\n        else {\r\n            ;\r\n            (document.querySelector('.newindex-inner') ||\r\n                document.querySelector('.layout-body')).insertAdjacentElement('beforebegin', el);\r\n        }\r\n        return el;\r\n    }\r\n    //  slot slot  data-name \r\n    static findSlot(name) {\r\n        const slot = document.querySelector(`slot[data-name=${name}]`);\r\n        if (!slot) {\r\n            throw new Error(`No such slot: ${name}`);\r\n        }\r\n        return slot;\r\n    }\r\n    // \r\n    static useSlot(name, element) {\r\n        const slot = this.findSlot(name);\r\n        if (typeof element === 'string') {\r\n            // \r\n            //  insertAdjacentElement \r\n            const wrap = document.createElement('div');\r\n            wrap.innerHTML = element;\r\n            const el = wrap.children[0];\r\n            slot.appendChild(el);\r\n            return el;\r\n        }\r\n        else {\r\n            //  html \r\n            slot.appendChild(element);\r\n            return element;\r\n        }\r\n    }\r\n    // \r\n    static clearSlot(name) {\r\n        this.findSlot(name).innerHTML = '';\r\n    }\r\n    // \r\n    static addBtn(slot, bg = '', text = '', attr = []) {\r\n        const e = document.createElement('button');\r\n        e.type = 'button';\r\n        e.style.backgroundColor = bg;\r\n        e.textContent = text;\r\n        for (const [key, value] of attr) {\r\n            e.setAttribute(key, value);\r\n        }\r\n        this.useSlot(slot, e);\r\n        return e;\r\n    }\r\n    /** TitleBar  p  */\r\n    static getPageTitle() {\r\n        return document.title\r\n            .replace(/\\[(||||||| )\\] /, '')\r\n            .replace(/^\\(\\d.*\\) /, '');\r\n    }\r\n    // \r\n    static isArtworkTags(data) {\r\n        return data.translation !== undefined;\r\n    }\r\n    /** tag \r\n     *\r\n     *  type:\r\n     *\r\n     * 'origin'  tag\r\n     *\r\n     * 'transl'  tag tag  tag  tag\r\n     *\r\n     * 'both'  tag  tag\r\n     */\r\n    static extractTags(data, type = 'origin') {\r\n        const tags = [];\r\n        const tagsTransl = [];\r\n        const tagArr = data.body.tags.tags;\r\n        for (const tagData of tagArr) {\r\n            //  tag\r\n            tags.push(tagData.tag);\r\n            //  tag\r\n            if (this.isArtworkTags(tagData)) {\r\n                if (tagData.translation && tagData.translation.en) {\r\n                    //  en \r\n                    tagsTransl.push(tagData.translation.en);\r\n                }\r\n                else {\r\n                    //  tag \r\n                    tagsTransl.push(tagData.tag);\r\n                }\r\n            }\r\n        }\r\n        if (type === 'origin') {\r\n            return tags;\r\n        }\r\n        else if (type === 'transl') {\r\n            return Array.from(new Set(tagsTransl));\r\n        }\r\n        else {\r\n            return Array.from(new Set(tags.concat(tagsTransl)));\r\n        }\r\n    }\r\n    /** thumb url\r\n     *\r\n     *  pixiv thumb url  thumb url \r\n     *\r\n     *  url url\r\n     */\r\n    //  issues/140 \r\n    // https://i.pximg.net/c/250x250_80_a2/custom-thumb/img/2021/03/03/06/29/53/88179809_p1_custom1200.jpg\r\n    // https://i.pximg.net/c/128x128/img-master/img/2021/03/03/06/29/53/88179809_p1_square1200.jpg\r\n    static convertArtworkThumbURL(thumbURL, no) {\r\n        return thumbURL\r\n            .replace('250x250_80_a2/custom-thumb', '128x128/img-master')\r\n            .replace('custom1200', 'square1200')\r\n            .replace('p0', 'p' + no);\r\n    }\r\n}\r\nexport { Tools };\r\n","import { EVT } from './EVT';\r\nimport { ImageViewer } from './ImageViewer';\r\nimport { settings } from './setting/Settings';\r\nimport { Tools } from './Tools';\r\n// \r\nclass ViewBigImage {\r\n    constructor() {\r\n        this.btnId = 'ViewBigImageBtn';\r\n        this.btnSize = [32, 32];\r\n        this.hiddenBtnTimer = 0; // \r\n        this.hiddenBtnDelay = 100;\r\n        this.currentWorkId = ''; //  id\r\n        this.doNotShowBtn = false; // \r\n        //  true \r\n        // \r\n        // \r\n        this.selectors = [\r\n            'div[width=\"136\"]',\r\n            'div[width=\"288\"]',\r\n            'div[width=\"184\"]',\r\n            'div[width=\"112\"]',\r\n            'div[width=\"104\"]',\r\n            'div[width=\"90\"]',\r\n            '._work',\r\n            'figure > div',\r\n        ];\r\n        this.addBtn();\r\n        this.bindEvents();\r\n    }\r\n    addBtn() {\r\n        const btn = document.createElement('button');\r\n        btn.id = this.btnId;\r\n        btn.innerHTML = `\n    <svg class=\"icon\" aria-hidden=\"true\">\n  <use xlink:href=\"#icon-fangda\"></use>\n</svg>`;\r\n        this.btn = document.body.appendChild(btn);\r\n    }\r\n    bindEvents() {\r\n        // \r\n        this.headleThumbnail(document.body);\r\n        // \r\n        this.createObserver(document.body);\r\n        // \r\n        window.addEventListener(EVT.list.pageSwitch, () => {\r\n            this.hiddenBtn();\r\n        });\r\n        // \r\n        this.btn.addEventListener('mouseenter', (ev) => {\r\n            window.clearTimeout(this.hiddenBtnTimer);\r\n        });\r\n        // \r\n        this.btn.addEventListener('mouseleave', () => {\r\n            this.hiddenBtn();\r\n        });\r\n        // \r\n        this.btn.addEventListener('click', (ev) => {\r\n            if (this.currentWorkId) {\r\n                this.hiddenBtnNow();\r\n                new ImageViewer({\r\n                    workId: this.currentWorkId,\r\n                    imageNumber: 1,\r\n                    imageSize: settings.magnifierSize,\r\n                    autoStart: true,\r\n                    showLoading: true,\r\n                });\r\n            }\r\n        });\r\n    }\r\n    // \r\n    headleThumbnail(parent) {\r\n        if (!parent.querySelectorAll) {\r\n            return;\r\n        }\r\n        // \r\n        // \r\n        // \r\n        for (const selector of this.selectors) {\r\n            const elements = parent.querySelectorAll(selector);\r\n            for (const el of elements) {\r\n                el.addEventListener('mouseenter', (ev) => {\r\n                    const el = ev.target;\r\n                    this.currentWorkId = this.findWorkId(el);\r\n                    if (this.currentWorkId) {\r\n                        this.showBtn(el);\r\n                    }\r\n                });\r\n                el.addEventListener('mouseleave', () => {\r\n                    this.hiddenBtn();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    createObserver(target) {\r\n        this.observer = new MutationObserver((records) => {\r\n            for (const record of records) {\r\n                // \r\n                if (record.addedNodes.length > 0) {\r\n                    for (const newEl of record.addedNodes) {\r\n                        this.headleThumbnail(newEl);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.observer.observe(target, {\r\n            childList: true,\r\n            subtree: true,\r\n        });\r\n    }\r\n    //  id\r\n    findWorkId(el) {\r\n        const a = el.querySelector('a');\r\n        if (!a) {\r\n            return '';\r\n        }\r\n        const href = a.href;\r\n        return Tools.getIllustId(href);\r\n    }\r\n    // \r\n    showBtn(target) {\r\n        if (this.doNotShowBtn) {\r\n            return;\r\n        }\r\n        if (!settings.magnifier) {\r\n            return;\r\n        }\r\n        window.clearTimeout(this.hiddenBtnTimer);\r\n        const rect = target.getBoundingClientRect();\r\n        this.btn.style.left =\r\n            window.pageXOffset + rect.left + rect.width - this.btnSize[0] + 'px';\r\n        this.btn.style.top = window.pageYOffset + rect.top + 'px';\r\n        this.btn.style.display = 'flex';\r\n    }\r\n    // \r\n    hiddenBtn() {\r\n        window.clearTimeout(this.hiddenBtnTimer);\r\n        this.hiddenBtnTimer = window.setTimeout(() => {\r\n            this.btn.style.display = 'none';\r\n        }, this.hiddenBtnDelay);\r\n    }\r\n    // \r\n    hiddenBtnNow() {\r\n        this.doNotShowBtn = true;\r\n        window.setTimeout(() => {\r\n            this.doNotShowBtn = false;\r\n        }, 100);\r\n        window.clearTimeout(this.hiddenBtnTimer);\r\n        this.btn.style.display = 'none';\r\n    }\r\n}\r\nconst viewBigImage = new ViewBigImage();\r\nexport { viewBigImage };\r\n","var Colors;\r\n(function (Colors) {\r\n    // \r\n    Colors[\"white\"] = \"#fff\";\r\n    Colors[\"black\"] = \"#000\";\r\n    Colors[\"red\"] = \"#f00\";\r\n    Colors[\"theme\"] = \"#0ea8ef\";\r\n    // \r\n    Colors[\"textSuccess\"] = \"#00BD17\";\r\n    Colors[\"textWarning\"] = \"#d27e00\";\r\n    Colors[\"textError\"] = \"#f00\";\r\n    // \r\n    // \r\n    Colors[\"bgBlue\"] = \"#0ea8ef\";\r\n    Colors[\"bgGreen\"] = \"#14ad27\";\r\n    Colors[\"bgRed\"] = \"#f33939\";\r\n    Colors[\"bgYellow\"] = \"#e49d00\";\r\n    // \r\n    // \r\n    Colors[\"bgBrightBlue\"] = \"#29b3f3\";\r\n    Colors[\"bgSuccess\"] = \"#00BD17\";\r\n    Colors[\"bgWarning\"] = \"#e49d00\";\r\n    Colors[\"bgError\"] = \"#f00\";\r\n})(Colors || (Colors = {}));\r\nexport { Colors };\r\n","// \r\n// \r\nclass Config {\r\n}\r\n/** txt  */\r\nConfig.outputMax = 5000;\r\n/** */\r\nConfig.downloadThreadMax = 10;\r\n/** */\r\nConfig.worksTypeName = ['Illustration', 'Manga', 'Ugoira', 'Novel'];\r\n/** */\r\nConfig.appName = 'Powerful Pixiv Downloader';\r\n/** localStorage  name */\r\nConfig.settingStoreName = 'xzSetting';\r\n/** */\r\nConfig.BookmarkCountLimit = 9999999;\r\n/** */\r\nConfig.worksNumberLimit = 999999999;\r\nexport { Config };\r\n","/*\r\n * project: Powerful Pixiv Downloader\r\n * author:  xuejianxianzun; \r\n * license: GPL-3.0-or-later; http://www.gnu.org/licenses/gpl-3.0.txt\r\n * Github https://github.com/xuejianxianzun/PixivBatchDownloader\r\n * Releases: https://github.com/xuejianxianzun/PixivBatchDownloader/releases\r\n * Wiki:    https://xuejianxianzun.github.io/PBDWiki\r\n * Website: https://pixiv.download/\r\n * E-mail:  xuejianxianzun@gmail.com\r\n */\r\n// \r\n{\r\n    // \r\n    window.sessionStorage.setItem('xz_pixiv_extension', '1');\r\n    //  0\r\n    window.sessionStorage.setItem('xz_pixiv_userscript', '0');\r\n}\r\nimport './Lang';\r\nimport './Theme';\r\nimport './setting/Settings';\r\nimport './setting/InvisibleSettings';\r\nimport './ListenPageSwitch';\r\nimport './CenterPanel';\r\nimport './InitPage';\r\nimport './crawlMixedPage/QuickCrawl';\r\nimport './download/DownloadControl';\r\nimport './download/showStatusOnTitle';\r\nimport './Tip';\r\nimport './ViewBigImage';\r\nimport './output/OutputPanel';\r\nimport './output/PreviewFileName';\r\nimport './output/ShowURLs';\r\nimport './download/ExportResult2CSV';\r\nimport './download/ExportResult';\r\nimport './download/ImportResult';\r\nimport './download/ExportLST';\r\nimport './CheckNewVersion';\r\nimport './ShowWhatIsNew';\r\nimport './ShowHowToUse';\r\n","// \r\nimport { lang } from '../Lang';\r\nimport { Colors } from '../config/Colors';\r\nimport { Tools } from '../Tools';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { EVT } from '../EVT';\r\nimport { options } from '../setting/Options';\r\nimport { settings } from '../setting/Settings';\r\nimport { states } from '../store/States';\r\nimport { saveArtworkData } from '../store/SaveArtworkData';\r\nimport { saveNovelData } from '../store/SaveNovelData';\r\nimport { mute } from '../filter/Mute';\r\nimport '../SelectWork';\r\nimport { destroyManager } from '../pageFunciton/DestroyManager';\r\nimport { vipSearchOptimize } from './VipSearchOptimize';\r\nimport { toast } from '../Toast';\r\nimport { msgBox } from '../MsgBox';\r\nimport { Utils } from '../utils/Utils';\r\nimport { pageType } from '../PageType';\r\nclass InitPageBase {\r\n    constructor() {\r\n        this.crawlNumber = 0; // /\r\n        this.maxCount = 1000; // /\r\n        this.startpageNo = 1; //  api \r\n        this.listPageFinished = 0; // \r\n        this.ajaxThreadsDefault = 10; // \r\n        this.ajaxThread = this.ajaxThreadsDefault; // \r\n        this.finishedRequest = 0; //  id  ajaxThreads \r\n        this.crawlStopped = false; // \r\n    }\r\n    //  init \r\n    init() {\r\n        options.showAllOption();\r\n        this.setFormOption();\r\n        this.addCrawlBtns();\r\n        this.addAnyElement();\r\n        this.initAny();\r\n        //  destroy \r\n        destroyManager.register(this.destroy.bind(this));\r\n        // \r\n        EVT.bindOnce('clearLogAfterPageSwitch', EVT.list.pageSwitch, () => {\r\n            if (!states.busy) {\r\n                EVT.fire('clearLog');\r\n            }\r\n        });\r\n        //  id \r\n        EVT.bindOnce('crawlIdList', EVT.list.crawlIdList, (ev) => {\r\n            const idList = ev.detail.data;\r\n            if (idList) {\r\n                this.crawlIdList(idList);\r\n            }\r\n        });\r\n    }\r\n    // \r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: lang.transl('_1'),\r\n        });\r\n    }\r\n    // \r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    // \r\n    addAnyElement() { }\r\n    // \r\n    //  init \r\n    // \r\n    initAny() { }\r\n    // \r\n    destroy() {\r\n        Tools.clearSlot('crawlBtns');\r\n        Tools.clearSlot('otherBtns');\r\n    }\r\n    // /\r\n    getWantPageError() {\r\n        EVT.fire('wrongSetting');\r\n        const msg = lang.transl('_');\r\n        msgBox.error(msg);\r\n        throw new Error(msg);\r\n    }\r\n    // /\r\n    //  -1 0\r\n    checkWantPageInput(crawlPartTip, crawlAllTip) {\r\n        const want = settings.wantPageArr[pageType.type];\r\n        //  1  -1\r\n        if ((want < 1 && want !== -1) || isNaN(want)) {\r\n            //  1  -1 , 0 \r\n            throw this.getWantPageError();\r\n        }\r\n        if (want >= 1) {\r\n            log.warning(crawlPartTip.replace('{}', want.toString()));\r\n        }\r\n        else if (want === -1) {\r\n            log.warning(crawlAllTip);\r\n        }\r\n        return want;\r\n    }\r\n    // / 0\r\n    //  max \r\n    //  page \r\n    checkWantPageInputGreater0(max, page) {\r\n        const want = settings.wantPageArr[pageType.type];\r\n        if (want > 0) {\r\n            const result = want > max ? max : want;\r\n            if (page) {\r\n                log.warning(lang.transl('_x', result.toString()));\r\n            }\r\n            else {\r\n                log.warning(lang.transl('_x', result.toString()));\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            throw this.getWantPageError();\r\n        }\r\n    }\r\n    // \r\n    getWantPage() { }\r\n    //  filter\r\n    getMultipleSetting() {\r\n        // \r\n        if (settings.firstFewImagesSwitch) {\r\n            log.warning(lang.transl('_n', settings.firstFewImages.toString()));\r\n        }\r\n    }\r\n    // \r\n    async readyCrawl() {\r\n        // \r\n        if (states.busy) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        log.clear();\r\n        log.success(lang.transl('_0'));\r\n        if (Utils.isPixiv()) {\r\n            await mute.getMuteSettings();\r\n        }\r\n        this.getWantPage();\r\n        this.getMultipleSetting();\r\n        this.finishedRequest = 0;\r\n        this.crawlStopped = false;\r\n        EVT.fire('crawlStart');\r\n        // \r\n        this.nextStep();\r\n    }\r\n    //  id \r\n    //  id \r\n    //  id  getIdList \r\n    async crawlIdList(idList) {\r\n        // \r\n        if (states.busy) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        log.clear();\r\n        log.success(lang.transl('_0'));\r\n        if (Utils.isPixiv()) {\r\n            await mute.getMuteSettings();\r\n        }\r\n        this.getMultipleSetting();\r\n        this.finishedRequest = 0;\r\n        this.crawlStopped = false;\r\n        EVT.fire('crawlStart');\r\n        store.idList = idList;\r\n        this.getIdListFinished();\r\n    }\r\n    // \r\n    nextStep() {\r\n        this.getIdList();\r\n    }\r\n    //  id \r\n    getIdList() { }\r\n    // id \r\n    getIdListFinished() {\r\n        this.resetGetIdListStatus();\r\n        EVT.fire('getIdListFinished');\r\n        if (states.bookmarkMode) {\r\n            return;\r\n        }\r\n        if (store.idList.length === 0) {\r\n            return this.noResult();\r\n        }\r\n        log.log(lang.transl('_', store.idList.length.toString()));\r\n        //  return \r\n        // return states.allWork = false\r\n        log.log(lang.transl('_'));\r\n        if (store.idList.length <= this.ajaxThreadsDefault) {\r\n            this.ajaxThread = store.idList.length;\r\n        }\r\n        else {\r\n            this.ajaxThread = this.ajaxThreadsDefault;\r\n        }\r\n        for (let i = 0; i < this.ajaxThread; i++) {\r\n            this.getWorksData();\r\n        }\r\n    }\r\n    // \r\n    resetGetIdListStatus() { }\r\n    // \r\n    async getWorksData(idData) {\r\n        idData = idData || store.idList.shift();\r\n        const id = idData.id;\r\n        if (!id) {\r\n            const msg = 'Error: work id is invalid!';\r\n            msgBox.error(msg);\r\n            throw new Error(msg);\r\n        }\r\n        try {\r\n            if (idData.type === 'novels') {\r\n                const data = await API.getNovelData(id);\r\n                await saveNovelData.save(data);\r\n                this.afterGetWorksData(data);\r\n            }\r\n            else {\r\n                const data = await API.getArtworkData(id);\r\n                await saveArtworkData.save(data);\r\n                this.afterGetWorksData(data);\r\n            }\r\n        }\r\n        catch (error) {\r\n            if (error.status) {\r\n                // \r\n                this.logErrorStatus(error.status, id);\r\n                this.afterGetWorksData();\r\n            }\r\n            else {\r\n                // \r\n                // TypeError: Failed to fetch\r\n                //  save \r\n                console.error(error);\r\n                // \r\n                setTimeout(() => {\r\n                    this.getWorksData(idData);\r\n                }, 2000);\r\n            }\r\n        }\r\n    }\r\n    // \r\n    async afterGetWorksData(data) {\r\n        // \r\n        if (this.crawlStopped) {\r\n            return;\r\n        }\r\n        this.logResultTotal();\r\n        // \r\n        if (data && (await vipSearchOptimize.stopCrawl(data, this.ajaxThread))) {\r\n            // \r\n            this.crawlStopped = true;\r\n            this.crawlFinished();\r\n        }\r\n        if (store.idList.length > 0) {\r\n            // \r\n            this.getWorksData();\r\n        }\r\n        else {\r\n            // \r\n            this.finishedRequest++;\r\n            // \r\n            if (this.finishedRequest === this.ajaxThread) {\r\n                this.crawlFinished();\r\n            }\r\n        }\r\n    }\r\n    // \r\n    crawlFinished() {\r\n        if (store.result.length === 0) {\r\n            return this.noResult();\r\n        }\r\n        store.crawlCompleteTime = new Date();\r\n        this.sortResult();\r\n        if (settings.downloadUgoiraFirst) {\r\n            store.resultMeta.sort(Tools.sortUgoiraFirst);\r\n            store.result.sort(Tools.sortUgoiraFirst);\r\n        }\r\n        log.log(lang.transl('_n', store.resultMeta.length.toString()));\r\n        log.log(lang.transl('_n', store.result.length.toString()));\r\n        log.success(lang.transl('_'), 2);\r\n        // \r\n        EVT.fire('crawlFinish');\r\n    }\r\n    // \r\n    logErrorStatus(status, id) {\r\n        switch (status) {\r\n            case 0:\r\n                log.error(id + ': ' + lang.transl('_0'));\r\n                break;\r\n            case 400:\r\n                log.error(id + ': ' + lang.transl('_400'));\r\n                break;\r\n            case 403:\r\n                log.error(id + ': ' + lang.transl('_403'));\r\n                break;\r\n            case 404:\r\n                log.error(id + ': ' + lang.transl('_404'));\r\n                break;\r\n            default:\r\n                log.error(lang.transl('_', id));\r\n                break;\r\n        }\r\n    }\r\n    // \r\n    logResultTotal() {\r\n        log.log(`${lang.transl('_')} ${store.idList.length}, ${lang.transl('_n', store.resultMeta.length.toString())}`, 1, false);\r\n    }\r\n    //  0 \r\n    noResult() {\r\n        //  crawlFinish crawlEmpty crawlEmpty \r\n        //  crawlFinish crawlEmpty \r\n        EVT.fire('crawlFinish');\r\n        EVT.fire('crawlEmpty');\r\n        const msg = lang.transl('_');\r\n        log.error(msg, 2);\r\n        msgBox.error(msg);\r\n    }\r\n    // \r\n    sortResult() { }\r\n}\r\nexport { InitPageBase };\r\n","import { EVT } from '../EVT';\r\nimport { pageType } from '../PageType';\r\nimport { settings } from '../setting/Settings';\r\nimport { filter } from '../filter/Filter';\r\nimport { Utils } from '../utils/Utils';\r\n//  Pixiv \r\n// Pixiv \r\n//  10000 10000  10000 \r\nclass VipSearchOptimize {\r\n    constructor() {\r\n        // \r\n        this.enablePageType = [pageType.list.ArtworkSerach];\r\n        // \r\n        // \r\n        this.vipOrders = [\r\n            'popular_d',\r\n            'popular_male_d',\r\n            'popular_female_d',\r\n        ];\r\n        // popular_d \r\n        // popular_male_d \r\n        // popular_female_d \r\n        // \r\n        this.vipSearchOptimize = false;\r\n        this.filterFailed = 0; // \r\n        this.checkNumber = 30; // \r\n        this.bindEvents();\r\n    }\r\n    //  checkNumber Pixiv \r\n    bindEvents() {\r\n        // \r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            this.vipSearchOptimize = this.setVipOptimize();\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.crawlFinish, () => {\r\n            this.reset();\r\n        });\r\n    }\r\n    reset() {\r\n        this.vipSearchOptimize = false;\r\n        this.filterFailed = 0;\r\n    }\r\n    // \r\n    async stopCrawl(data, ajaxThread) {\r\n        // \r\n        if (!this.vipSearchOptimize || !settings.BMKNumSwitch) {\r\n            return false;\r\n        }\r\n        // \r\n        if (this.filterFailed >= this.checkNumber) {\r\n            return true;\r\n        }\r\n        // \r\n        const check = await filter.check({\r\n            bookmarkCount: data.body.bookmarkCount,\r\n        });\r\n        if (!check) {\r\n            this.filterFailed++;\r\n        }\r\n        else {\r\n            this.filterFailed = 0;\r\n        }\r\n        return this.filterFailed >= this.checkNumber;\r\n    }\r\n    // \r\n    setVipOptimize() {\r\n        // \r\n        if (!this.enablePageType.includes(pageType.type)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.isVip()) {\r\n            return false;\r\n        }\r\n        //  order \r\n        const order = Utils.getURLSearchField(window.location.href, 'order');\r\n        // \r\n        if (!order) {\r\n            return false;\r\n        }\r\n        const vipOrder = this.vipOrders.includes(order);\r\n        // \r\n        if (!vipOrder) {\r\n            return false;\r\n        }\r\n        // \r\n        // \r\n        return settings.BMKNumSwitch;\r\n    }\r\n    isVip() {\r\n        //  body  script \r\n        // premium: 'yes'\r\n        // premium: 'no'\r\n        const test = document.body.innerHTML.match(/premium: '(\\w+)'/);\r\n        if (test && test.length > 1) {\r\n            return test[1] === 'yes';\r\n        }\r\n        return false;\r\n    }\r\n}\r\nconst vipSearchOptimize = new VipSearchOptimize();\r\nexport { vipSearchOptimize };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { store } from '../store/Store';\r\nclass InitAreaRankingPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.init();\r\n    }\r\n    initAny() { }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    setFormOption() {\r\n        options.hideOption([1]);\r\n    }\r\n    async getIdList() {\r\n        const allPicArea = document.querySelectorAll('.ranking-item>.work_wrapper');\r\n        for (const el of allPicArea) {\r\n            const img = el.querySelector('._thumbnail');\r\n            // img.dataset.type  \"illust\"\r\n            //  tag \r\n            const id = img.dataset.id;\r\n            const tags = img.dataset.tags.split(' ');\r\n            // \r\n            const bookmarkBtn = el.querySelector('._one-click-bookmark');\r\n            const bookmarked = bookmarkBtn\r\n                ? bookmarkBtn.classList.contains('on')\r\n                : false;\r\n            const filterOpt = {\r\n                id: id,\r\n                tags: tags,\r\n                bookmarkData: bookmarked,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                const id = Tools.getIllustId(el.querySelector('a').href);\r\n                store.idList.push({\r\n                    type: 'unknown',\r\n                    id,\r\n                });\r\n            }\r\n        }\r\n        this.getIdListFinished();\r\n    }\r\n}\r\nexport { InitAreaRankingPage };\r\n","// artwork \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { store } from '../store/Store';\r\nimport { QuickBookmark } from '../pageFunciton/QuickBookmark';\r\nimport { ImageViewer } from '../ImageViewer';\r\nimport { Tools } from '../Tools';\r\nimport { API } from '../API';\r\nimport { log } from '../Log';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitArtworkPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.crawlDirection = 0; // \r\n        /*\r\n        -1 \r\n        0 \r\n        1 \r\n        */\r\n        this.crawlRelated = false; // \r\n        this.init();\r\n    }\r\n    initAny() {\r\n        // \r\n        this.initQuickBookmark();\r\n        this.initImgViewer();\r\n        // \r\n        window.addEventListener(EVT.list.pageSwitchedTypeNotChange, this.initQuickBookmark);\r\n        window.addEventListener(EVT.list.pageSwitchedTypeNotChange, this.initImgViewer);\r\n    }\r\n    initImgViewer() {\r\n        new ImageViewer({\r\n            showImageList: true,\r\n            imageListId: 'viewerWarpper',\r\n            insertTarget: 'main figcaption',\r\n            insertPostion: 'beforebegin',\r\n        });\r\n    }\r\n    initQuickBookmark() {\r\n        new QuickBookmark();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_new')).addEventListener('click', () => {\r\n            this.crawlDirection = -1;\r\n            this.readyCrawl();\r\n        });\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_old')).addEventListener('click', () => {\r\n            this.crawlDirection = 1;\r\n            this.readyCrawl();\r\n        });\r\n        const downRelatedBtn = Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'));\r\n        downRelatedBtn.addEventListener('click', () => {\r\n            this.crawlRelated = true;\r\n            this.readyCrawl();\r\n        }, false);\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_') +\r\n                '<br>' +\r\n                lang.transl('_0'),\r\n            rangTip: lang.transl('_1'),\r\n        });\r\n    }\r\n    destroy() {\r\n        Tools.clearSlot('crawlBtns');\r\n        Tools.clearSlot('otherBtns');\r\n        // \r\n        window.removeEventListener(EVT.list.pageSwitchedTypeNotChange, this.initQuickBookmark);\r\n        window.removeEventListener(EVT.list.pageSwitchedTypeNotChange, this.initImgViewer);\r\n    }\r\n    getWantPage() {\r\n        // \r\n        if (!this.crawlRelated) {\r\n            const crawlAllTip = this.crawlDirection === -1\r\n                ? lang.transl('_new')\r\n                : lang.transl('_old');\r\n            this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), crawlAllTip);\r\n        }\r\n        else {\r\n            // \r\n            this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n        }\r\n    }\r\n    nextStep() {\r\n        // \r\n        if (this.crawlRelated) {\r\n            this.getRelatedList();\r\n        }\r\n        else {\r\n            // \r\n            this.getIdList();\r\n        }\r\n    }\r\n    async getIdList() {\r\n        let type = ['illusts', 'manga'];\r\n        let idList = await API.getUserWorksByType(Tools.getUserId(), type);\r\n        //  id\r\n        let nowId = parseInt(Tools.getIllustId(window.location.href));\r\n        idList.forEach((id) => {\r\n            let idNum = parseInt(id.id);\r\n            // \r\n            if (idNum >= nowId && this.crawlDirection === -1) {\r\n                store.idList.push(id);\r\n            }\r\n            else if (idNum <= nowId && this.crawlDirection === 1) {\r\n                // \r\n                store.idList.push(id);\r\n            }\r\n        });\r\n        // \r\n        if (this.crawlNumber !== -1) {\r\n            //  \r\n            if (this.crawlDirection === -1) {\r\n                store.idList.sort(Utils.sortByProperty('id')).reverse();\r\n            }\r\n            else {\r\n                //  \r\n                store.idList.sort(Utils.sortByProperty('id'));\r\n            }\r\n            store.idList = store.idList.splice(0, this.crawlNumber);\r\n        }\r\n        this.getIdListFinished();\r\n    }\r\n    // \r\n    async getRelatedList() {\r\n        let data = await API.getRelatedData(Tools.getIllustId());\r\n        // \r\n        let ids = [];\r\n        for (const illust of data.body.illusts) {\r\n            if (illust.isAdContainer) {\r\n                continue;\r\n            }\r\n            ids.push(illust.id);\r\n        }\r\n        ids = ids.concat(data.body.nextIds);\r\n        // \r\n        if (this.crawlNumber !== -1) {\r\n            ids = ids.slice(0, this.crawlNumber);\r\n        }\r\n        for (const id of ids) {\r\n            store.idList.push({\r\n                type: 'unknown',\r\n                id,\r\n            });\r\n        }\r\n        log.log(lang.transl('_', store.idList.length.toString()));\r\n        this.getIdListFinished();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.crawlDirection = 0; // \r\n        this.crawlRelated = false; // \r\n    }\r\n}\r\nexport { InitArtworkPage };\r\n","// /\r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { API } from '../API';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitArtworkSeriesPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.seriesId = '';\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        this.maxCount = 100;\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInputGreater0(this.maxCount, true);\r\n    }\r\n    nextStep() {\r\n        // \r\n        const p = Utils.getURLSearchField(location.href, 'p');\r\n        this.startpageNo = parseInt(p) || 1;\r\n        //  id\r\n        this.seriesId = API.getURLPathField('series');\r\n        this.getIdList();\r\n    }\r\n    async getIdList() {\r\n        let p = this.startpageNo + this.listPageFinished;\r\n        const data = await API.getSeriesData(this.seriesId, p);\r\n        this.listPageFinished++;\r\n        //  id \r\n        const idList = [];\r\n        for (const info of data.body.page.series) {\r\n            idList.push(info.workId);\r\n        }\r\n        // data.body.page.series illust \r\n        //  illust  id \r\n        for (const work of data.body.thumbnails.illust) {\r\n            if (!idList.includes(work.id)) {\r\n                continue;\r\n            }\r\n            if (work.isAdContainer) {\r\n                continue;\r\n            }\r\n            // \r\n            const filterOpt = {\r\n                id: work.id,\r\n                tags: work.tags,\r\n                bookmarkData: !!work.bookmarkData,\r\n                width: work.width,\r\n                height: work.height,\r\n                workType: work.illustType,\r\n                userId: work.userId,\r\n                createDate: work.createDate,\r\n                xRestrict: work.xRestrict,\r\n            };\r\n            //  api  illust  type  unknown\r\n            if (await filter.check(filterOpt)) {\r\n                store.idList.push({\r\n                    type: 'unknown',\r\n                    id: work.id,\r\n                });\r\n            }\r\n        }\r\n        //  data.body.page.series \r\n        const endFlag = data.body.page.series.length === 0;\r\n        // \r\n        if (endFlag ||\r\n            p >= this.maxCount ||\r\n            this.listPageFinished === this.crawlNumber) {\r\n            log.log(lang.transl('_'));\r\n            this.getIdListFinished();\r\n        }\r\n        else {\r\n            // \r\n            log.log(lang.transl('_', this.listPageFinished.toString()), 1, false);\r\n            this.getIdList();\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.listPageFinished = 0;\r\n    }\r\n}\r\nexport { InitArtworkSeriesPage };\r\n","//  bookmark_detail \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nclass InitBookmarkDetailPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        }, false);\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInputGreater0(this.maxCount, false);\r\n    }\r\n    // \r\n    async getIdList() {\r\n        let data = await API.getRecommenderData(Tools.getIllustId(), this.crawlNumber);\r\n        for (const id of data.recommendations) {\r\n            store.idList.push({\r\n                type: 'unknown',\r\n                id: id.toString(),\r\n            });\r\n        }\r\n        this.getIdListFinished();\r\n    }\r\n}\r\nexport { InitBookmarkDetailPage };\r\n","//   artwork \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitBookmarkNewArtworkPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.r18 = false;\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        this.maxCount = 250;\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInputGreater0(this.maxCount, true);\r\n    }\r\n    nextStep() {\r\n        this.r18 = location.pathname.includes('r18');\r\n        const p = Utils.getURLSearchField(location.href, 'p');\r\n        this.startpageNo = parseInt(p) || 1;\r\n        this.getIdList();\r\n    }\r\n    async getIdList() {\r\n        let p = this.startpageNo + this.listPageFinished;\r\n        // \r\n        let data;\r\n        try {\r\n            data = await API.getBookmarkNewIllustData(p, this.r18);\r\n        }\r\n        catch (error) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        const worksData = data.data;\r\n        // \r\n        for (const data of worksData) {\r\n            if (data.isAdContainer) {\r\n                continue;\r\n            }\r\n            const filterOpt = {\r\n                id: data.illustId,\r\n                width: data.width,\r\n                height: data.height,\r\n                pageCount: data.pageCount,\r\n                bookmarkData: data.isBookmarked,\r\n                workType: parseInt(data.illustType),\r\n                tags: data.tags,\r\n                userId: data.userId,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                store.idList.push({\r\n                    type: API.getWorkType(data.illustType),\r\n                    id: data.illustId,\r\n                });\r\n            }\r\n        }\r\n        this.listPageFinished++;\r\n        log.log(lang.transl('_', this.listPageFinished.toString()), 1, false);\r\n        // \r\n        // \r\n        if (data.lastPage ||\r\n            p >= this.maxCount ||\r\n            this.listPageFinished === this.crawlNumber) {\r\n            log.log(lang.transl('_'));\r\n            this.getIdListFinished();\r\n        }\r\n        else {\r\n            // \r\n            this.getIdList();\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.listPageFinished = 0;\r\n    }\r\n}\r\nexport { InitBookmarkNewArtworkPage };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { DeleteWorks } from '../pageFunciton/DeleteWorks';\r\nimport { store } from '../store/Store';\r\nclass InitDiscoverPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        options.hideOption([1]);\r\n    }\r\n    addAnyElement() {\r\n        const deleteWorks = new DeleteWorks('._2RNjBox');\r\n        deleteWorks.addClearMultipleBtn('._3b8AXEx');\r\n        deleteWorks.addClearUgoiraBtn('.AGgsUWZ');\r\n        deleteWorks.addManuallyDeleteBtn();\r\n    }\r\n    getWantPage() { }\r\n    getIdList() {\r\n        // \r\n        const nowIllust = document.querySelectorAll('figure>div>a');\r\n        //  id\r\n        Array.from(nowIllust).forEach((el) => {\r\n            // discovery  url \r\n            const id = Tools.getIllustId(el.href.split('&uarea')[0]);\r\n            store.idList.push({\r\n                type: 'unknown',\r\n                id,\r\n            });\r\n        });\r\n        this.getIdListFinished();\r\n    }\r\n}\r\nexport { InitDiscoverPage };\r\n","//   artwork \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitNewArtworkPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.option = this.resetOption();\r\n        this.limitMax = 20; //  20\r\n        this.fetchCount = 0; // \r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInputGreater0(this.maxCount, false);\r\n    }\r\n    nextStep() {\r\n        this.initFetchURL();\r\n        this.getIdList();\r\n    }\r\n    resetOption() {\r\n        return {\r\n            lastId: '0',\r\n            limit: '20',\r\n            type: '',\r\n            r18: '',\r\n        };\r\n    }\r\n    //  url\r\n    initFetchURL() {\r\n        this.option = this.resetOption();\r\n        if (this.crawlNumber < this.limitMax) {\r\n            this.option.limit = this.crawlNumber.toString();\r\n        }\r\n        else {\r\n            this.option.limit = this.limitMax.toString();\r\n        }\r\n        //  illust\r\n        this.option.type =\r\n            Utils.getURLSearchField(location.href, 'type') || 'illust';\r\n        //  R18 \r\n        this.option.r18 = (location.href.includes('_r18.php') || false).toString();\r\n    }\r\n    async getIdList() {\r\n        let data;\r\n        try {\r\n            data = await API.getNewIllustData(this.option);\r\n        }\r\n        catch (error) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        let useData = data.body.illusts;\r\n        for (const nowData of useData) {\r\n            // \r\n            if (this.fetchCount + 1 > this.crawlNumber) {\r\n                break;\r\n            }\r\n            else {\r\n                this.fetchCount++;\r\n            }\r\n            // \r\n            if (nowData.isAdContainer) {\r\n                continue;\r\n            }\r\n            const filterOpt = {\r\n                id: nowData.id,\r\n                width: nowData.width,\r\n                height: nowData.height,\r\n                pageCount: nowData.pageCount,\r\n                bookmarkData: nowData.bookmarkData,\r\n                workType: nowData.illustType,\r\n                tags: nowData.tags,\r\n                userId: nowData.userId,\r\n                createDate: nowData.createDate,\r\n                xRestrict: nowData.xRestrict,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                store.idList.push({\r\n                    type: API.getWorkType(nowData.illustType),\r\n                    id: nowData.id,\r\n                });\r\n            }\r\n        }\r\n        log.log(lang.transl('_', this.fetchCount.toString()), 1, false);\r\n        // \r\n        if (this.fetchCount >= this.crawlNumber ||\r\n            this.fetchCount >= this.maxCount) {\r\n            log.log(lang.transl('_'));\r\n            this.getIdListFinished();\r\n            return;\r\n        }\r\n        // \r\n        this.option.lastId = data.body.lastId;\r\n        this.getIdList();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.fetchCount = 0;\r\n    }\r\n}\r\nexport { InitNewArtworkPage };\r\n","//  pixivision \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { store } from '../store/Store';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitPixivisionPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        const typeA = document.querySelector('a[data-gtm-action=ClickCategory]');\r\n        const type = typeA.dataset.gtmLabel;\r\n        if (type === 'illustration' || type === 'manga' || type === 'cosplay') {\r\n            // cosplay\r\n            Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_')).addEventListener('click', () => {\r\n                this.readyCrawl();\r\n            }, false);\r\n        }\r\n    }\r\n    setFormOption() {\r\n        options.hideOption([\r\n            1,\r\n            2,\r\n            3,\r\n            4,\r\n            5,\r\n            6,\r\n            7,\r\n            8,\r\n            9,\r\n            10,\r\n            11,\r\n            12,\r\n            14,\r\n            16,\r\n            18,\r\n            19,\r\n            21,\r\n            22,\r\n            23,\r\n            24,\r\n            26,\r\n            27,\r\n            28,\r\n            30,\r\n            31,\r\n            33,\r\n            34,\r\n            35,\r\n            36,\r\n            37,\r\n            38,\r\n            39,\r\n            40,\r\n            42,\r\n            43,\r\n            44,\r\n        ]);\r\n        // pixivision \r\n        // form.userSetName.value = '{p_title}/{id}'\r\n    }\r\n    nextStep() {\r\n        this.getPixivision();\r\n    }\r\n    // \r\n    addResult(id, url, ext) {\r\n        store.addResult({\r\n            id: id,\r\n            original: url,\r\n            ext: ext,\r\n        });\r\n    }\r\n    async getPixivision() {\r\n        const a = document.querySelector('a[data-gtm-action=ClickCategory]');\r\n        const type = a.dataset.gtmLabel;\r\n        if (type === 'illustration') {\r\n            //  url\r\n            const imageList = document.querySelectorAll('.am__work__main img');\r\n            const urls = Array.from(imageList).map((el) => {\r\n                return el.src\r\n                    .replace('c/768x1200_80/img-master', 'img-original')\r\n                    .replace('_master1200', '');\r\n            });\r\n            for (const url of urls) {\r\n                let arr = url.split('/');\r\n                const id = arr[arr.length - 1].split('.')[0].split('_')[0]; // id\r\n                await this.testExtName(url, id);\r\n            }\r\n            this.crawlFinished();\r\n        }\r\n        else {\r\n            //  cosplay \r\n            let selector = '';\r\n            if (type === 'manga') {\r\n                selector = '.am__work__illust';\r\n            }\r\n            else if (type === 'cosplay') {\r\n                selector = '.fab__image-block__image img';\r\n            }\r\n            // url\r\n            const imageList = document.querySelectorAll(selector);\r\n            Array.from(imageList).forEach((el) => {\r\n                const url = el.src;\r\n                if (url !== 'https://i.pximg.net/imgaz/upload/20170407/256097898.jpg') {\r\n                    // Curelogo\r\n                    //  url \r\n                    // https://i.pximg.net/c/768x1200_80/img-master/img/2017/06/19/01/08/28/63457814_p0_master1200.jpg\r\n                    // cosplay  ur \r\n                    // https://i.pximg.net/imgaz/upload/20170808/670930758.jpg\r\n                    const arr = url.split('/');\r\n                    const id = arr[arr.length - 1].split('.')[0].split('_')[0]; // id\r\n                    const extTest = arr[arr.length - 1].match(/\\.(.*$)/); //  .\r\n                    let ext = 'jpg';\r\n                    if (extTest && extTest.length > 1) {\r\n                        ext = extTest[1];\r\n                    }\r\n                    this.addResult(id, url, ext);\r\n                }\r\n            });\r\n            this.crawlFinished();\r\n        }\r\n    }\r\n    // pixivision  jpg \r\n    async testExtName(url, id) {\r\n        let ext = 'jpg'; //  jpg\r\n        await Utils.loadImg(url).catch(() => {\r\n            //  png\r\n            url = url.replace('.jpg', '.png');\r\n            ext = 'png';\r\n        });\r\n        this.addResult(id, url, ext);\r\n        this.logResultTotal();\r\n    }\r\n}\r\nexport { InitPixivisionPage };\r\n","//  artwork \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { API } from '../API';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { EVT } from '../EVT';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { states } from '../store/States';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitRankingArtworkPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.pageCount = 10; // \r\n        this.option = this.resetOption();\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n        // \r\n        const debutModes = ['daily', 'daily_r18', 'rookie', ''];\r\n        const mode = Utils.getURLSearchField(location.href, 'mode');\r\n        if (debutModes.includes(mode)) {\r\n            Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [['title', lang.transl('_Title')]]).addEventListener('click', () => {\r\n                states.debut = true;\r\n                this.readyCrawl();\r\n            });\r\n        }\r\n    }\r\n    initAny() {\r\n        //  debut \r\n        //  debut \r\n        window.addEventListener(EVT.list.crawlFinish, () => {\r\n            states.debut = false;\r\n        });\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        this.maxCount = 500;\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    resetOption() {\r\n        return { mode: 'daily', p: 1, worksType: '', date: '' };\r\n    }\r\n    setPartNum() {\r\n        // 50\r\n        if (location.pathname.includes('r18g')) {\r\n            // r18g 11\r\n            this.pageCount = 1;\r\n        }\r\n        else if (location.pathname.includes('_r18')) {\r\n            // r18 66\r\n            this.pageCount = 6;\r\n        }\r\n        else {\r\n            // 1010404\r\n            this.pageCount = 10;\r\n        }\r\n    }\r\n    getWantPage() {\r\n        this.listPageFinished = 0;\r\n        // \r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n        //  -1\r\n        if (this.crawlNumber === -1) {\r\n            this.crawlNumber = 500;\r\n        }\r\n    }\r\n    nextStep() {\r\n        //  option \r\n        // mode \r\n        this.option = this.resetOption();\r\n        this.option.mode = Utils.getURLSearchField(location.href, 'mode') || 'daily';\r\n        this.option.worksType = Utils.getURLSearchField(location.href, 'content');\r\n        this.option.date = Utils.getURLSearchField(location.href, 'date');\r\n        this.startpageNo = 1;\r\n        this.setPartNum();\r\n        this.getIdList();\r\n    }\r\n    async getIdList() {\r\n        this.option.p = this.startpageNo + this.listPageFinished;\r\n        // \r\n        let data;\r\n        try {\r\n            data = await API.getRankingData(this.option);\r\n        }\r\n        catch (error) {\r\n            if (error.status === 404) {\r\n                // 404\r\n                console.log('404');\r\n                this.getIdListFinished();\r\n            }\r\n            return;\r\n        }\r\n        this.listPageFinished++;\r\n        const contents = data.contents; // \r\n        for (const data of contents) {\r\n            // \r\n            if (data.rank > this.crawlNumber) {\r\n                return this.getIdListFinished();\r\n            }\r\n            // \r\n            const filterOpt = {\r\n                id: data.illust_id,\r\n                workType: parseInt(data.illust_type),\r\n                tags: data.tags,\r\n                pageCount: parseInt(data.illust_page_count),\r\n                bookmarkData: data.is_bookmarked,\r\n                width: data.width,\r\n                height: data.height,\r\n                yes_rank: data.yes_rank,\r\n                userId: data.user_id.toString(),\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                store.setRankList(data.illust_id.toString(), data.rank);\r\n                store.idList.push({\r\n                    type: API.getWorkType(data.illust_type),\r\n                    id: data.illust_id.toString(),\r\n                });\r\n            }\r\n        }\r\n        log.log(lang.transl('_', this.listPageFinished.toString()), 1, false);\r\n        // \r\n        if (this.listPageFinished === this.pageCount) {\r\n            this.getIdListFinished();\r\n        }\r\n        else {\r\n            // \r\n            this.getIdList();\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.listPageFinished = 0;\r\n    }\r\n}\r\nexport { InitRankingArtworkPage };\r\n","//  artwork \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { DeleteWorks } from '../pageFunciton/DeleteWorks';\r\nimport { EVT } from '../EVT';\r\nimport { filter } from '../filter/Filter';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { settings } from '../setting/Settings';\r\nimport { FastScreen } from '../pageFunciton/FastScreen';\r\nimport { Tools } from '../Tools';\r\nimport { BookmarkAllWorks } from '../pageFunciton/BookmarkAllWorks';\r\nimport { states } from '../store/States';\r\nimport { Utils } from '../utils/Utils';\r\nimport { idListWithPageNo } from '../store/IdListWithPageNo';\r\nimport { toast } from '../Toast';\r\nimport { msgBox } from '../MsgBox';\r\nimport { Bookmark } from '../Bookmark';\r\nclass InitSearchArtworkPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.worksWrapSelector = '#root section ul';\r\n        this.listClass = 'searchList';\r\n        this.multipleClass = 'multiplePart';\r\n        this.ugoiraClass = 'ugoiraPart';\r\n        this.addBMKBtnClass = 'bmkBtn';\r\n        this.bookmarkedClass = 'bookmarked';\r\n        this.countSelector = 'section h3+div span';\r\n        this.hotWorkAsideSelector = 'section aside';\r\n        this.worksType = '';\r\n        this.option = {};\r\n        this.worksNoPerPage = 60; // \r\n        this.needCrawlPageCount = 0; // \r\n        this.sendCrawlTaskCount = 0; // \r\n        this.allOption = [\r\n            'order',\r\n            'type',\r\n            'wlt',\r\n            'wgt',\r\n            'hlt',\r\n            'hgt',\r\n            'ratio',\r\n            'tool',\r\n            's_mode',\r\n            'mode',\r\n            'scd',\r\n            'ecd',\r\n            'blt',\r\n            'bgt',\r\n            'work_lang',\r\n        ];\r\n        this.resultMeta = []; // \r\n        this.worksWrap = null;\r\n        this.deleteId = 0; //  id\r\n        this.causeResultChange = ['firstFewImagesSwitch', 'firstFewImages']; //  filter \r\n        this.flag = 'searchArtwork';\r\n        this.onSettingChange = (event) => {\r\n            const data = event.detail.data;\r\n            if (data.name === 'previewResult') {\r\n                this.setNotAutoDownload();\r\n            }\r\n            if (this.causeResultChange.includes(data.name)) {\r\n                if (store.result.length > 0) {\r\n                    this.reAddResult();\r\n                    EVT.fire('resultChange');\r\n                }\r\n            }\r\n        };\r\n        // \r\n        this.onCrawlFinish = () => {\r\n            this.resultMeta = [...store.resultMeta];\r\n            this.clearWorks();\r\n            this.reAddResult();\r\n            // \r\n            window.removeEventListener(EVT.list.addResult, this.createWork);\r\n            setTimeout(() => {\r\n                EVT.fire('worksUpdate');\r\n            }, 0);\r\n        };\r\n        // \r\n        this.showCount = () => {\r\n            const count = this.resultMeta.length || store.resultMeta.length;\r\n            const countEl = document.querySelector(this.countSelector);\r\n            if (countEl) {\r\n                countEl.textContent = count.toString();\r\n            }\r\n        };\r\n        // \r\n        this.createWork = (event) => {\r\n            if (!settings.previewResult || !this.worksWrap) {\r\n                return;\r\n            }\r\n            const data = event.detail.data;\r\n            let r18Text = '';\r\n            if (data.xRestrict === 1) {\r\n                r18Text = 'R-18';\r\n            }\r\n            if (data.xRestrict === 2) {\r\n                r18Text = 'R-18G';\r\n            }\r\n            let r18HTML = r18Text\r\n                ? `\n      <div class=\"r18Part\">\n        <div class=\"child\">\n          <div class=\"text\">${r18Text}</div>\n        </div>\n      </div>`\r\n                : '';\r\n            let multipleHTML = '';\r\n            if (data.pageCount > 1) {\r\n                multipleHTML = `\n        <div class=\"${this.multipleClass}\">\n          <div class=\"child\">\n            <span class=\"span1\">\n              <span class=\"span2\">\n              <svg viewBox=\"0 0 9 10\" size=\"9\" class=\"multipleSvg\">\n                <path d=\"M8,3 C8.55228475,3 9,3.44771525 9,4 L9,9 C9,9.55228475 8.55228475,10 8,10 L3,10\n                C2.44771525,10 2,9.55228475 2,9 L6,9 C7.1045695,9 8,8.1045695 8,7 L8,3 Z M1,1 L6,1\n                C6.55228475,1 7,1.44771525 7,2 L7,7 C7,7.55228475 6.55228475,8 6,8 L1,8 C0.44771525,8\n                0,7.55228475 0,7 L0,2 C0,1.44771525 0.44771525,1 1,1 Z\" transform=\"\"></path>\n                </svg>\n              </span>\n            </span>\n            <span>${data.pageCount}</span>\n          </div>  \n        </div>\n                    `;\r\n            }\r\n            let ugoiraHTML = '';\r\n            if (data.ugoiraInfo) {\r\n                ugoiraHTML = `\n        <svg viewBox=\"0 0 24 24\" class=\"${this.ugoiraClass}\" style=\"width: 48px; height: 48px;\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\" class=\"ugoiraCircle\"></circle>\n          <path d=\"M9,8.74841664 L9,15.2515834 C9,15.8038681 9.44771525,16.2515834 10,16.2515834\n              C10.1782928,16.2515834 10.3533435,16.2039156 10.5070201,16.1135176 L16.0347118,12.8619342\n              C16.510745,12.5819147 16.6696454,11.969013 16.3896259,11.4929799\n              C16.3034179,11.3464262 16.1812655,11.2242738 16.0347118,11.1380658 L10.5070201,7.88648243\n              C10.030987,7.60646294 9.41808527,7.76536339 9.13806578,8.24139652\n              C9.04766776,8.39507316 9,8.57012386 9,8.74841664 Z\"></path>\n        </svg>`;\r\n            }\r\n            // \r\n            const bookmarkedFlag = data.bookmarked ? this.bookmarkedClass : '';\r\n            const html = `\n    <li class=\"${this.listClass}\" data-id=\"${data.idNum}\">\n    <div class=\"searchContent\">\n      <div class=\"searchImgArea\">\n        <div width=\"184\" height=\"184\" class=\"searchImgAreaContent\">\n          <a target=\"_blank\" class=\"imgAreaLink\" href=\"/artworks/${data.idNum}\">\n            <!---->\n            <div class=\"topbar\">\n\n            <!--R-18 -->\n            ${r18HTML}\n\n            <!---->\n            ${multipleHTML}\n              \n            </div>\n            <!---->\n            <div class=\"imgWrap\">\n            <img src=\"${data.thumb}\" alt=\"${data.title}\" style=\"object-fit: cover; object-position: center center;\">\n              <!--  svg -->\n              ${ugoiraHTML}\n              </div>\n          </a>\n          <!---->\n          <div class=\"bmkCount\">${data.bmk}</div>\n          <!---->\n          <div class=\"bmkBtnWrap\">\n            <div class=\"\">\n            <button type=\"button\" class=\"${this.addBMKBtnClass}\">\n            <svg viewBox=\"0 0 1024 1024\" width=\"32\" height=\"32\" class=\"bmkBtnSvg ${bookmarkedFlag}\">\n            <path d=\"M958.733019 411.348626 659.258367 353.59527 511.998465 85.535095 364.741633 353.59527 65.265958 411.348626 273.72878 634.744555 235.88794 938.463881 511.998465 808.479435 788.091594 938.463881 750.250754 634.744555Z\" p-id=\"1106\" class=\"path2\"></path>\n            <path d=\"M959.008 406.016l-308-47.008L512 64 372.992 359.008l-308 47.008 223.008 228-52.992 324L512 805.024l276.992 152.992-52.992-324zM512 740L304 856.992l40-235.008-179.008-182.016 242.016-32 104.992-224 104 224 240.992 34.016L680 622.976l36.992 235.008z\" p-id=\"919\"></path>\n            </svg>\n            </button>\n            </div>\n          </div>\n        <!---->\n        </div>\n      </div>\n      <!---->\n      <a target=\"_blank\" class=\"titleLink\" href=\"/artworks/${data.idNum}\">${data.title}</a>\n      <!---->\n      <div class=\"bottomBar\">\n      <!---->\n      <div class=\"userInfo\">\n      <!-- html -->\n          <a target=\"_blank\" href=\"/users/${data.userId}\">\n            <div class=\"userName\">${data.user}</div>\n          </a>\n        </div>\n      </div>\n    </div>\n  </li>\n    `;\r\n            // \r\n            const li2 = document.createElement('li');\r\n            li2.innerHTML = html;\r\n            const li = li2.children[0];\r\n            this.worksWrap.appendChild(li);\r\n            // \r\n            const addBMKBtn = li.querySelector(`.${this.addBMKBtnClass}`);\r\n            const bookmarkedClass = this.bookmarkedClass;\r\n            addBMKBtn.addEventListener('click', function () {\r\n                const e = new CustomEvent('addBMK', {\r\n                    detail: { data: { id: data.idNum, tags: data.tags } },\r\n                });\r\n                window.dispatchEvent(e);\r\n                this.classList.add(bookmarkedClass);\r\n            });\r\n        };\r\n        // \r\n        this.clearMultiple = () => {\r\n            this.filterResult((data) => {\r\n                return data.pageCount <= 1;\r\n            });\r\n        };\r\n        // \r\n        this.clearUgoira = () => {\r\n            this.filterResult((data) => {\r\n                return !data.ugoiraInfo;\r\n            });\r\n        };\r\n        // \r\n        this.deleteWork = (event) => {\r\n            const el = event.detail.data;\r\n            this.deleteId = parseInt(el.dataset.id);\r\n            this.filterResult((data) => {\r\n                return data.idNum !== this.deleteId;\r\n            });\r\n        };\r\n        this.addBookmark = (event) => {\r\n            const data = event.detail.data;\r\n            for (const r of store.result) {\r\n                if (r.idNum === data.id) {\r\n                    Bookmark.add(data.id.toString(), 'illusts', data.tags);\r\n                    // \r\n                    r.bookmarked = true;\r\n                    this.resultMeta.forEach((result) => {\r\n                        if (result.idNum === data.id) {\r\n                            result.bookmarked = true;\r\n                        }\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        this.init();\r\n        new FastScreen();\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgGreen, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            this.resultMeta = [];\r\n            window.addEventListener(EVT.list.addResult, this.createWork);\r\n            this.readyCrawl();\r\n        });\r\n        Tools.addBtn('crawlBtns', Colors.bgGreen, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            this.screenInResult();\r\n        });\r\n    }\r\n    addAnyElement() {\r\n        const deleteWorks = new DeleteWorks(`.${this.listClass}`);\r\n        deleteWorks.addClearMultipleBtn(`.${this.multipleClass}`, () => {\r\n            EVT.fire('clearMultiple');\r\n        });\r\n        deleteWorks.addClearUgoiraBtn(`.${this.ugoiraClass}`, () => {\r\n            EVT.fire('clearUgoira');\r\n        });\r\n        deleteWorks.addManuallyDeleteBtn((el) => {\r\n            EVT.fire('deleteWork', el);\r\n        });\r\n        // \r\n        const bookmarkAllBtn = Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_'));\r\n        const bookmarkAll = new BookmarkAllWorks(bookmarkAllBtn);\r\n        bookmarkAllBtn.addEventListener('click', () => {\r\n            const listWrap = this.getWorksWrap();\r\n            if (listWrap) {\r\n                const list = listWrap.querySelectorAll('li');\r\n                // \r\n                const showList = Array.from(list).filter((el) => {\r\n                    return el.style.display !== 'none';\r\n                });\r\n                bookmarkAll.sendWorkList(showList);\r\n            }\r\n        });\r\n    }\r\n    initAny() {\r\n        this.hotBar();\r\n        this.setNotAutoDownload();\r\n        window.addEventListener(EVT.list.pageSwitchedTypeNotChange, () => {\r\n            this.hotBar();\r\n        });\r\n        window.addEventListener(EVT.list.addResult, this.showCount);\r\n        window.addEventListener('addBMK', this.addBookmark);\r\n        window.addEventListener(EVT.list.crawlFinish, this.onCrawlFinish);\r\n        window.addEventListener(EVT.list.clearMultiple, this.clearMultiple);\r\n        window.addEventListener(EVT.list.clearUgoira, this.clearUgoira);\r\n        window.addEventListener(EVT.list.deleteWork, this.deleteWork);\r\n        window.addEventListener(EVT.list.settingChange, this.onSettingChange);\r\n    }\r\n    destroy() {\r\n        Tools.clearSlot('crawlBtns');\r\n        Tools.clearSlot('otherBtns');\r\n        window.removeEventListener(EVT.list.addResult, this.showCount);\r\n        window.removeEventListener(EVT.list.crawlFinish, this.onCrawlFinish);\r\n        window.removeEventListener(EVT.list.settingChange, this.onSettingChange);\r\n        // \r\n        states.notAutoDownload = false;\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n        if (this.crawlNumber === -1 || this.crawlNumber > this.maxCount) {\r\n            this.crawlNumber = this.maxCount;\r\n        }\r\n    }\r\n    async nextStep() {\r\n        this.initFetchURL();\r\n        if (this.startpageNo > 1000) {\r\n            msgBox.error(`${lang.transl('_')} ${this.maxCount}`);\r\n            return this.noResult();\r\n        }\r\n        this.needCrawlPageCount = await this.calcNeedCrawlPageCount();\r\n        if (this.needCrawlPageCount === 0) {\r\n            return this.noResult();\r\n        }\r\n        this.startGetIdList();\r\n        this.clearWorks();\r\n    }\r\n    //  url \r\n    initFetchURL() {\r\n        //  URL \r\n        /*\r\n        https://www.pixiv.net/tags/Fate%2FGrandOrder/illustrations\r\n        https://www.pixiv.net/en/tags/Fate%2FGrandOrder/illustrations\r\n        */\r\n        let URLType = location.pathname.split('tags/')[1].split('/')[1];\r\n        //  undefined\r\n        if (URLType === undefined) {\r\n            URLType = '';\r\n        }\r\n        switch (URLType) {\r\n            case '':\r\n                this.worksType = 'artworks';\r\n                break;\r\n            case 'illustrations':\r\n            case 'illust_and_ugoira':\r\n            case 'ugoira':\r\n            case 'illust':\r\n                this.worksType = 'illustrations';\r\n                break;\r\n            case 'manga':\r\n                this.worksType = 'manga';\r\n                break;\r\n            default:\r\n                this.worksType = 'artworks';\r\n                break;\r\n        }\r\n        let p = Utils.getURLSearchField(location.href, 'p');\r\n        this.startpageNo = parseInt(p) || 1;\r\n        //  url \r\n        this.option = {};\r\n        this.allOption.forEach((param) => {\r\n            let value = Utils.getURLSearchField(location.href, param);\r\n            if (value !== '') {\r\n                this.option[param] = value;\r\n            }\r\n        });\r\n        // \r\n        if (this.option.s_mode === undefined) {\r\n            this.option.s_mode = 's_tag_full';\r\n        }\r\n    }\r\n    // \r\n    async getSearchData(p) {\r\n        let data = await API.getSearchData(store.tag, this.worksType, p, this.option);\r\n        return data.body.illust || data.body.illustManga || data.body.manga;\r\n    }\r\n    // \r\n    async calcNeedCrawlPageCount() {\r\n        let data = await this.getSearchData(1);\r\n        // \r\n        let pageCount = Math.ceil(data.total / this.worksNoPerPage);\r\n        if (pageCount > this.maxCount) {\r\n            //  1000\r\n            pageCount = this.maxCount;\r\n        }\r\n        // \r\n        let needFetchPage = pageCount - this.startpageNo + 1;\r\n        // \r\n        if (needFetchPage < this.crawlNumber) {\r\n            return needFetchPage;\r\n        }\r\n        else {\r\n            return this.crawlNumber;\r\n        }\r\n    }\r\n    // \r\n    startGetIdList() {\r\n        if (this.needCrawlPageCount <= this.ajaxThreadsDefault) {\r\n            this.ajaxThread = this.needCrawlPageCount;\r\n        }\r\n        else {\r\n            this.ajaxThread = this.ajaxThreadsDefault;\r\n        }\r\n        for (let i = 0; i < this.ajaxThread; i++) {\r\n            this.getIdList();\r\n        }\r\n    }\r\n    //  p p p \r\n    async getIdList(p) {\r\n        if (p === undefined) {\r\n            p = this.startpageNo + this.sendCrawlTaskCount;\r\n            this.sendCrawlTaskCount++;\r\n        }\r\n        // \r\n        let data;\r\n        try {\r\n            data = await this.getSearchData(p);\r\n        }\r\n        catch (_a) {\r\n            return this.getIdList(p);\r\n        }\r\n        data = data.data;\r\n        for (const nowData of data) {\r\n            // \r\n            if (nowData.isAdContainer) {\r\n                continue;\r\n            }\r\n            const filterOpt = {\r\n                createDate: nowData.createDate,\r\n                id: nowData.id,\r\n                width: nowData.width,\r\n                height: nowData.height,\r\n                pageCount: nowData.pageCount,\r\n                bookmarkData: nowData.bookmarkData,\r\n                workType: nowData.illustType,\r\n                tags: nowData.tags,\r\n                userId: nowData.userId,\r\n                xRestrict: nowData.xRestrict,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                idListWithPageNo.add(this.flag, {\r\n                    type: API.getWorkType(nowData.illustType),\r\n                    id: nowData.id,\r\n                }, p);\r\n            }\r\n        }\r\n        this.listPageFinished++;\r\n        log.log(lang.transl('_', this.listPageFinished.toString()), 1, false);\r\n        if (this.sendCrawlTaskCount + 1 <= this.needCrawlPageCount) {\r\n            // +1  sendCrawlTaskCount  0 \r\n            this.getIdList();\r\n        }\r\n        else {\r\n            // \r\n            if (this.listPageFinished === this.needCrawlPageCount) {\r\n                // \r\n                log.log(lang.transl('_'));\r\n                idListWithPageNo.store(this.flag);\r\n                this.getIdListFinished();\r\n            }\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.listPageFinished = 0;\r\n        this.sendCrawlTaskCount = 0;\r\n    }\r\n    // \r\n    sortResult() {\r\n        store.resultMeta.sort(Utils.sortByProperty('bmk'));\r\n        store.result.sort(Utils.sortByProperty('bmk'));\r\n    }\r\n    setNotAutoDownload() {\r\n        // \r\n        states.notAutoDownload = settings.previewResult ? true : false;\r\n    }\r\n    //  ul \r\n    getWorksWrap() {\r\n        const test = document.querySelectorAll(this.worksWrapSelector);\r\n        if (test.length > 0) {\r\n            if (test.length > 2) {\r\n                //  2 \r\n                return test[2];\r\n            }\r\n            // artworks  ul \r\n            return test[test.length - 1];\r\n        }\r\n        return null;\r\n    }\r\n    // \r\n    clearWorks() {\r\n        this.worksWrap = this.getWorksWrap();\r\n        if (!settings.previewResult || !this.worksWrap) {\r\n            return;\r\n        }\r\n        this.worksWrap.innerHTML = '';\r\n    }\r\n    //  id \r\n    removeWorks(idList) {\r\n        // #root section ul .searchList\r\n        const listSelector = `${this.worksWrapSelector} .${this.listClass}`;\r\n        const lists = document.querySelectorAll(listSelector);\r\n        for (const li of lists) {\r\n            if (li.dataset.id && idList.includes(li.dataset.id)) {\r\n                li.style.display = 'none';\r\n                // li.remove()\r\n                //  dom \r\n            }\r\n        }\r\n    }\r\n    // \r\n    // \r\n    async filterResult(callback) {\r\n        if (this.resultMeta.length === 0) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        EVT.fire('closeCenterPanel');\r\n        log.clear();\r\n        const beforeLength = this.resultMeta.length; // \r\n        const resultMetaTemp = [];\r\n        const resultMetaRemoved = [];\r\n        for (const meta of this.resultMeta) {\r\n            if (await callback(meta)) {\r\n                resultMetaTemp.push(meta);\r\n            }\r\n            else {\r\n                resultMetaRemoved.push(meta);\r\n            }\r\n        }\r\n        this.resultMeta = resultMetaTemp;\r\n        // \r\n        if (this.resultMeta.length !== beforeLength) {\r\n            let ids = [];\r\n            for (const result of resultMetaRemoved) {\r\n                ids.push(result.idNum.toString());\r\n            }\r\n            this.removeWorks(ids);\r\n            this.reAddResult();\r\n        }\r\n        EVT.fire('resultChange');\r\n    }\r\n    // \r\n    // 1 \r\n    // 2 \r\n    // 3 \r\n    reAddResult() {\r\n        store.reset();\r\n        for (let data of this.resultMeta) {\r\n            store.addResult(data);\r\n        }\r\n        // showCount  addResult  addResult \r\n        if (this.resultMeta.length === 0) {\r\n            this.showCount();\r\n        }\r\n    }\r\n    // \r\n    screenInResult() {\r\n        if (states.busy) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        log.clear();\r\n        this.getMultipleSetting();\r\n        this.filterResult((data) => {\r\n            const filterOpt = {\r\n                id: data.id,\r\n                workType: data.type,\r\n                pageCount: data.pageCount,\r\n                tags: data.tags,\r\n                bookmarkCount: data.bmk,\r\n                bookmarkData: data.bookmarked,\r\n                width: data.fullWidth,\r\n                height: data.fullHeight,\r\n                createDate: data.date,\r\n                userId: data.userId,\r\n                xRestrict: data.xRestrict,\r\n            };\r\n            return filter.check(filterOpt);\r\n        });\r\n    }\r\n    // \r\n    hotBar() {\r\n        // \r\n        const timer = window.setInterval(() => {\r\n            const hotWorkAside = document.querySelector(this.hotWorkAsideSelector);\r\n            if (hotWorkAside) {\r\n                window.clearInterval(timer);\r\n                // \r\n                const premiumLink = hotWorkAside.nextSibling;\r\n                premiumLink && premiumLink.remove();\r\n                //  after css \r\n                const style = `\n        section aside ul::after{\n          display:none !important;\n        }\n        `;\r\n                Utils.addStyle(style);\r\n            }\r\n        }, 300);\r\n    }\r\n}\r\nexport { InitSearchArtworkPage };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { API } from '../API';\r\nimport { Colors } from '../config/Colors';\r\nimport { token } from '../Token';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { BookmarksAddTag } from '../pageFunciton/BookmarksAddTag';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { filter } from '../filter/Filter';\r\nimport { Utils } from '../utils/Utils';\r\nimport { Config } from '../config/Config';\r\nclass InitBookmarkLegacyPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.idList = []; //  id\r\n        this.type = 'illusts'; // \r\n        this.isHide = false; // \r\n        this.requsetNumber = 0; // \r\n        this.filteredNumber = 0; // \r\n        this.onceRequest = 100; // \r\n        this.offset = 0; // \r\n        this.crawlRecommended = false; // \r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n        // \r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            this.crawlRecommended = true;\r\n            this.readyCrawl();\r\n        }, false);\r\n    }\r\n    addAnyElement() {\r\n        //  token tag\r\n        if (token.token) {\r\n            const btn = Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_tag'), [['title', lang.transl('_tag')]]);\r\n            new BookmarksAddTag(btn);\r\n        }\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: lang.transl('_1'),\r\n        });\r\n    }\r\n    getWantPage() {\r\n        let pageTip = '';\r\n        if (this.crawlRecommended) {\r\n            pageTip = lang.transl('_');\r\n        }\r\n        else {\r\n            pageTip = lang.transl('_');\r\n        }\r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), pageTip);\r\n    }\r\n    nextStep() {\r\n        if (window.location.pathname.includes('/novel')) {\r\n            this.type = 'novels';\r\n        }\r\n        if (this.crawlRecommended) {\r\n            // \r\n            this.getRecommendedList();\r\n        }\r\n        else {\r\n            this.readyGetIdList();\r\n            this.getIdList();\r\n        }\r\n    }\r\n    readyGetIdList() {\r\n        // \r\n        const onceNumber = 20;\r\n        // \r\n        const nowPage = Utils.getURLSearchField(location.href, 'p'); //  1 \r\n        if (nowPage) {\r\n            this.offset = (parseInt(nowPage) - 1) * onceNumber;\r\n        }\r\n        if (this.offset < 0) {\r\n            this.offset = 0;\r\n        }\r\n        // \r\n        this.requsetNumber = 0;\r\n        if (this.crawlNumber === -1) {\r\n            this.requsetNumber = Config.worksNumberLimit;\r\n        }\r\n        else {\r\n            this.requsetNumber = onceNumber * this.crawlNumber;\r\n        }\r\n        // \r\n        //  url rest \r\n        this.isHide = Utils.getURLSearchField(location.href, 'rest') === 'hide';\r\n        log.log(lang.transl('_'));\r\n        if (this.crawlNumber === -1) {\r\n            log.log(lang.transl('_'));\r\n        }\r\n    }\r\n    // \r\n    async getIdList() {\r\n        let data;\r\n        try {\r\n            data = await API.getBookmarkData(Tools.getUserId(), this.type, store.tag, this.offset, this.isHide);\r\n        }\r\n        catch (error) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        if (data.body.works.length === 0 ||\r\n            this.idList.length >= this.requsetNumber ||\r\n            this.filteredNumber >= this.requsetNumber) {\r\n            // \r\n            return this.afterGetIdList();\r\n        }\r\n        else {\r\n            // \r\n            const idType = this.type === 'illusts' ? 'unknown' : 'novels';\r\n            for (const workData of data.body.works) {\r\n                if (this.filteredNumber >= this.requsetNumber) {\r\n                    return this.afterGetIdList();\r\n                }\r\n                const filterOpt = {\r\n                    id: workData.id,\r\n                    tags: workData.tags,\r\n                    bookmarkData: workData.bookmarkData,\r\n                    createDate: workData.createDate,\r\n                    userId: workData.userId,\r\n                };\r\n                this.filteredNumber++;\r\n                if (await filter.check(filterOpt)) {\r\n                    this.idList.push({\r\n                        type: idType,\r\n                        id: workData.id,\r\n                    });\r\n                }\r\n            }\r\n            this.offset += this.onceRequest; // \r\n            log.log(lang.transl('_', this.idList.length.toString()), 1, false);\r\n            // \r\n            this.getIdList();\r\n        }\r\n    }\r\n    //  id \r\n    afterGetIdList() {\r\n        //  100 \r\n        if (this.idList.length > this.requsetNumber) {\r\n            // \r\n            this.idList.splice(this.requsetNumber, this.idList.length);\r\n            //  api  id \r\n        }\r\n        store.idList = store.idList.concat(this.idList);\r\n        this.getIdListFinished();\r\n    }\r\n    // \r\n    getRecommendedList() {\r\n        const selector = this.type === 'illusts'\r\n            ? '#illust-recommend .image-item'\r\n            : '.novel-items>li';\r\n        const idType = this.type === 'illusts' ? 'unknown' : 'novels';\r\n        const getId = this.type === 'illusts' ? Tools.getIllustId : Tools.getNovelId;\r\n        // \r\n        const elements = document.querySelectorAll(selector);\r\n        if (elements.length === 0) {\r\n            this.crawlRecommended = false;\r\n            return this.noResult();\r\n        }\r\n        // \r\n        for (const li of elements) {\r\n            const a = li.querySelector('a');\r\n            if (store.idList.length === this.crawlNumber) {\r\n                break;\r\n            }\r\n            store.idList.push({\r\n                type: idType,\r\n                id: getId(a.href),\r\n            });\r\n        }\r\n        this.getIdListFinished();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.type = 'illusts';\r\n        this.idList = [];\r\n        this.offset = 0;\r\n        this.filteredNumber = 0;\r\n        this.crawlRecommended = false; // \r\n    }\r\n    sortResult() {\r\n        // \r\n        !this.crawlRecommended && store.result.reverse();\r\n    }\r\n}\r\nexport { InitBookmarkLegacyPage };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { API } from '../API';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { token } from '../Token';\r\nimport { BookmarksAddTag } from '../pageFunciton/BookmarksAddTag';\r\nimport { filter } from '../filter/Filter';\r\nimport { Utils } from '../utils/Utils';\r\nimport { Config } from '../config/Config';\r\nclass InitBookmarkPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.idList = []; //  id\r\n        this.type = 'illusts'; // \r\n        this.isHide = false; // \r\n        this.requsetNumber = 0; // \r\n        this.filteredNumber = 0; // \r\n        this.onceRequest = 100; // \r\n        this.offset = 0; // \r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: lang.transl('_1'),\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n    }\r\n    addAnyElement() {\r\n        //  token tag\r\n        if (token.token) {\r\n            const btn = Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_tag'), [['title', lang.transl('_tag')]]);\r\n            new BookmarksAddTag(btn);\r\n        }\r\n    }\r\n    nextStep() {\r\n        if (window.location.pathname.includes('/novel')) {\r\n            this.type = 'novels';\r\n        }\r\n        this.readyGetIdList();\r\n        this.getIdList();\r\n    }\r\n    readyGetIdList() {\r\n        //  48  24 \r\n        const onceNumber = window.location.pathname.includes('/novels') ? 24 : 48;\r\n        // \r\n        const nowPage = Utils.getURLSearchField(location.href, 'p'); //  1 \r\n        if (nowPage) {\r\n            this.offset = (parseInt(nowPage) - 1) * onceNumber;\r\n        }\r\n        if (this.offset < 0) {\r\n            this.offset = 0;\r\n        }\r\n        // \r\n        if (this.crawlNumber === -1) {\r\n            this.requsetNumber = Config.worksNumberLimit;\r\n        }\r\n        else {\r\n            this.requsetNumber = onceNumber * this.crawlNumber;\r\n        }\r\n        // \r\n        //  url rest \r\n        this.isHide = Utils.getURLSearchField(location.href, 'rest') === 'hide';\r\n        log.log(lang.transl('_'));\r\n        if (this.crawlNumber === -1) {\r\n            log.log(lang.transl('_'));\r\n        }\r\n    }\r\n    // \r\n    async getIdList() {\r\n        let data;\r\n        try {\r\n            data = await API.getBookmarkData(Tools.getUserId(), this.type, store.tag, this.offset, this.isHide);\r\n        }\r\n        catch (error) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        if (data.body.works.length === 0 ||\r\n            this.idList.length >= this.requsetNumber ||\r\n            this.filteredNumber >= this.requsetNumber) {\r\n            // \r\n            return this.afterGetIdList();\r\n        }\r\n        else {\r\n            // \r\n            const idType = this.type === 'illusts' ? 'unknown' : 'novels';\r\n            for (const workData of data.body.works) {\r\n                if (this.filteredNumber >= this.requsetNumber) {\r\n                    return this.afterGetIdList();\r\n                }\r\n                const filterOpt = {\r\n                    id: workData.id,\r\n                    tags: workData.tags,\r\n                    bookmarkData: workData.bookmarkData,\r\n                    createDate: workData.createDate,\r\n                    userId: workData.userId,\r\n                    xRestrict: workData.xRestrict,\r\n                };\r\n                this.filteredNumber++;\r\n                if (await filter.check(filterOpt)) {\r\n                    this.idList.push({\r\n                        type: idType,\r\n                        id: workData.id,\r\n                    });\r\n                }\r\n            }\r\n            this.offset += this.onceRequest; // \r\n            log.log(lang.transl('_', this.idList.length.toString()), 1, false);\r\n            // \r\n            this.getIdList();\r\n        }\r\n    }\r\n    //  id \r\n    afterGetIdList() {\r\n        //  100 \r\n        if (this.idList.length > this.requsetNumber) {\r\n            // \r\n            this.idList.splice(this.requsetNumber, this.idList.length);\r\n            //  api  id \r\n        }\r\n        store.idList = store.idList.concat(this.idList);\r\n        this.getIdListFinished();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.type = 'illusts';\r\n        this.idList = [];\r\n        this.offset = 0;\r\n        this.requsetNumber = 0;\r\n        this.filteredNumber = 0;\r\n    }\r\n}\r\nexport { InitBookmarkPage };\r\n","//  P \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { createCSV } from '../utils/CreateCSV';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitFollowingPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.baseOffset = 0; // \r\n        this.onceNumber = 24; //  24 \r\n        this.pageType = 0; // \r\n        // 0 \r\n        // 1  P \r\n        // 2 \r\n        this.getUserListNo = 0; // \r\n        this.limit = 100; // \r\n        this.totalNeed = Number.MAX_SAFE_INTEGER;\r\n        this.myId = '';\r\n        this.rest = 'show';\r\n        this.userList = [];\r\n        this.index = 0; // getIdList  userList \r\n        this.userInfoList = []; //  id \r\n        this.downUserList = false; // \r\n        this.homePrefix = 'https://www.pixiv.net/users/'; // \r\n        this.getPageType();\r\n        this.init();\r\n    }\r\n    getPageType() {\r\n        const pathname = window.location.pathname;\r\n        if (pathname.includes('/following')) {\r\n            this.pageType = 0;\r\n        }\r\n        else if (pathname.includes('/mypixiv')) {\r\n            this.pageType = 1;\r\n        }\r\n        else if (pathname.includes('/followers')) {\r\n            this.pageType = 2;\r\n        }\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n        Tools.addBtn('crawlBtns', Colors.bgGreen, lang.transl('_')).addEventListener('click', () => {\r\n            this.downUserList = true;\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: lang.transl('_1'),\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n    }\r\n    nextStep() {\r\n        this.readyGet();\r\n        log.log(lang.transl('_'));\r\n        this.getPageType();\r\n        this.getUserList();\r\n    }\r\n    readyGet() {\r\n        this.rest = location.href.includes('rest=hide') ? 'hide' : 'show';\r\n        // \r\n        const nowPage = Utils.getURLSearchField(location.href, 'p');\r\n        // \r\n        if (nowPage !== '') {\r\n            this.baseOffset = (parseInt(nowPage) - 1) * this.onceNumber;\r\n        }\r\n        else {\r\n            this.baseOffset = 0;\r\n        }\r\n        // \r\n        this.totalNeed = Number.MAX_SAFE_INTEGER;\r\n        if (this.crawlNumber !== -1) {\r\n            this.totalNeed = this.onceNumber * this.crawlNumber;\r\n        }\r\n        //  id\r\n        const test = /users\\/(\\d*)\\//.exec(location.href);\r\n        if (test && test.length > 1) {\r\n            this.myId = test[1];\r\n        }\r\n        else {\r\n            const msg = `Get the user's own id failed`;\r\n            log.error(msg, 2);\r\n            throw new Error(msg);\r\n        }\r\n    }\r\n    // \r\n    async getUserList() {\r\n        const offset = this.baseOffset + this.getUserListNo * this.limit;\r\n        let res;\r\n        try {\r\n            switch (this.pageType) {\r\n                case 0:\r\n                    res = await API.getFollowingList(this.myId, this.rest, offset);\r\n                    break;\r\n                case 1:\r\n                    res = await API.getMyPixivList(this.myId, offset);\r\n                    break;\r\n                case 2:\r\n                    res = await API.getFollowersList(this.myId, offset);\r\n                    break;\r\n            }\r\n        }\r\n        catch (_a) {\r\n            this.getUserList();\r\n            return;\r\n        }\r\n        const users = res.body.users;\r\n        if (users.length === 0) {\r\n            // \r\n            return this.getUserListComplete();\r\n        }\r\n        for (const userData of users) {\r\n            //  id\r\n            this.userList.push(userData.userId);\r\n            // \r\n            if (this.downUserList) {\r\n                this.userInfoList.push({\r\n                    userId: userData.userId,\r\n                    userName: userData.userName,\r\n                    homePage: this.homePrefix + userData.userId,\r\n                    userComment: userData.userComment,\r\n                    profileImageUrl: userData.profileImageUrl,\r\n                });\r\n            }\r\n            if (this.userList.length >= this.totalNeed) {\r\n                // \r\n                return this.getUserListComplete();\r\n            }\r\n        }\r\n        log.log(lang.transl('_x', this.userList.length.toString()), 1, false);\r\n        this.getUserListNo++;\r\n        this.getUserList();\r\n    }\r\n    getUserListComplete() {\r\n        log.log(lang.transl('_x', this.userList.length.toString()));\r\n        if (this.userList.length === 0) {\r\n            return this.getIdListFinished();\r\n        }\r\n        // \r\n        if (this.downUserList) {\r\n            this.toCSV();\r\n            return this.getIdListFinished();\r\n        }\r\n        this.getIdList();\r\n    }\r\n    toCSV() {\r\n        // \r\n        const data = this.userInfoList.map((item) => {\r\n            return Object.values(item);\r\n        });\r\n        // \r\n        data.unshift(Object.keys(this.userInfoList[0]));\r\n        const csv = createCSV.create(data);\r\n        const csvURL = URL.createObjectURL(csv);\r\n        const csvName = Tools.getPageTitle();\r\n        Utils.downloadFile(csvURL, Utils.replaceUnsafeStr(csvName) + '.csv');\r\n    }\r\n    //  id \r\n    async getIdList() {\r\n        let idList = [];\r\n        try {\r\n            idList = await API.getUserWorksByType(this.userList[this.index]);\r\n        }\r\n        catch (_a) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        store.idList = store.idList.concat(idList);\r\n        this.index++;\r\n        if (this.index >= this.userList.length) {\r\n            return this.getIdListFinished();\r\n        }\r\n        log.log(lang.transl('_', store.idList.length.toString()), 1, false);\r\n        this.getIdList();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.userList = [];\r\n        this.userInfoList = [];\r\n        this.downUserList = false;\r\n        this.getUserListNo = 0;\r\n        this.index = 0;\r\n    }\r\n    sortResult() {\r\n        //  id id \r\n        store.result.sort(Utils.sortByProperty('id'));\r\n    }\r\n}\r\nexport { InitFollowingPage };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { Tools } from '../Tools';\r\nimport { EVT } from '../EVT';\r\nimport { Config } from '../config/Config';\r\nimport { toast } from '../Toast';\r\nimport { theme } from '../Theme';\r\nclass InitHomePage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.downIdButton = document.createElement('button');\r\n        this.downIdInput = document.createElement('textarea');\r\n        this.ready = false;\r\n        this.init();\r\n        this.idRangeTip = this.createidRangeTip();\r\n    }\r\n    addCrawlBtns() {\r\n        this.downIdButton = Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_id'), [['id', 'down_id_button']]);\r\n        const crawlIdRange = Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_id'));\r\n        crawlIdRange.addEventListener('click', () => {\r\n            this.crawlIdRange();\r\n        });\r\n    }\r\n    addAnyElement() {\r\n        // id\r\n        this.downIdInput.id = 'down_id_input';\r\n        this.downIdInput.style.display = 'none';\r\n        this.downIdInput.setAttribute('placeholder', lang.transl('_id'));\r\n        Tools.insertToHead(this.downIdInput);\r\n        Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_')).addEventListener('click', () => {\r\n            EVT.fire('clearSavedCrawl');\r\n        });\r\n    }\r\n    setFormOption() {\r\n        options.hideOption([1]);\r\n    }\r\n    initAny() {\r\n        this.downIdButton.addEventListener('click', () => {\r\n            if (!this.ready) {\r\n                // \r\n                EVT.fire('closeCenterPanel');\r\n                this.downIdInput.style.display = 'block';\r\n                this.downIdInput.focus();\r\n                document.documentElement.scrollTop = 0;\r\n            }\r\n            else {\r\n                this.checkIdList();\r\n            }\r\n        }, false);\r\n        // \r\n        this.downIdInput.addEventListener('change', () => {\r\n            if (this.downIdInput.value !== '') {\r\n                this.ready = true;\r\n                window.setTimeout(() => {\r\n                    EVT.fire('openCenterPanel');\r\n                }, 300);\r\n                this.downIdButton.textContent = lang.transl('_');\r\n            }\r\n            else {\r\n                this.ready = false;\r\n                EVT.fire('closeCenterPanel');\r\n                this.downIdButton.textContent = lang.transl('_id');\r\n            }\r\n        });\r\n    }\r\n    //  id \r\n    createidRangeTip() {\r\n        const div = document.createElement('div');\r\n        div.classList.add('id_range_tip', 'beautify_scrollbar', 'logWrap');\r\n        theme.register(div);\r\n        return Tools.insertToHead(div);\r\n    }\r\n    //  id \r\n    checkIdList() {\r\n        //  store \r\n        const array = this.downIdInput.value.split('\\n');\r\n        const result = [];\r\n        for (const str of array) {\r\n            const id = parseInt(str);\r\n            if (isNaN(id) || id < 22 || id > Config.worksNumberLimit) {\r\n                console.log(lang.transl('_id') + ': ' + str);\r\n            }\r\n            else {\r\n                result.push(id.toString());\r\n            }\r\n        }\r\n        this.addIdList(result);\r\n    }\r\n    crawlIdRange() {\r\n        let start = 0;\r\n        let end = 0;\r\n        // \r\n        const startInput = window.prompt(lang.transl('_id') + '\\n' + lang.transl('_id'), '0');\r\n        if (startInput) {\r\n            const num = Number.parseInt(startInput);\r\n            if (!isNaN(num) && num >= 0) {\r\n                start = num;\r\n            }\r\n            else {\r\n                return toast.error(lang.transl('_'));\r\n            }\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        // \r\n        const endInput = window.prompt(lang.transl('_id'), '1');\r\n        if (endInput) {\r\n            const num = Number.parseInt(endInput);\r\n            if (!isNaN(num) && num > start) {\r\n                end = num;\r\n            }\r\n            else {\r\n                return toast.error(lang.transl('_'));\r\n            }\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        // \r\n        const tip = lang.transl('_id') + `: ${start} - ${end}`;\r\n        this.idRangeTip.textContent = tip;\r\n        this.idRangeTip.style.display = 'block';\r\n        //  log.log \r\n        //  id \r\n        const ids = [];\r\n        while (start <= end) {\r\n            ids.push(start.toString());\r\n            start++;\r\n        }\r\n        this.addIdList(ids);\r\n        toast.success(lang.transl('_'));\r\n    }\r\n    //  id  store \r\n    addIdList(ids) {\r\n        //  id \r\n        const type = window.location.pathname === '/novel/' ? 'novels' : 'unknown';\r\n        const idList = [];\r\n        for (const id of ids) {\r\n            idList.push({\r\n                type: type,\r\n                id: id,\r\n            });\r\n        }\r\n        EVT.fire('crawlIdList', idList);\r\n    }\r\n    destroy() {\r\n        Tools.clearSlot('crawlBtns');\r\n        Tools.clearSlot('otherBtns');\r\n        this.downIdInput.remove();\r\n    }\r\n}\r\nexport { InitHomePage };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { EVT } from '../EVT';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { states } from '../store/States';\r\nimport '../pageFunciton/SaveAvatarIcon';\r\nimport '../pageFunciton/SaveAvatarImage';\r\nimport '../pageFunciton/SaveUserCover';\r\nimport { BookmarkAllWorks } from '../pageFunciton/BookmarkAllWorks';\r\nimport { Utils } from '../utils/Utils';\r\nimport { Config } from '../config/Config';\r\nvar ListType;\r\n(function (ListType) {\r\n    ListType[ListType[\"UserHome\"] = 0] = \"UserHome\";\r\n    ListType[ListType[\"Artworks\"] = 1] = \"Artworks\";\r\n    ListType[ListType[\"Illustrations\"] = 2] = \"Illustrations\";\r\n    ListType[ListType[\"Manga\"] = 3] = \"Manga\";\r\n    ListType[ListType[\"Novels\"] = 4] = \"Novels\";\r\n})(ListType || (ListType = {}));\r\nclass InitUserPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.listType = ListType.UserHome; // \r\n        this.onceNumber = 48; //  48  24 \r\n        this.bookmarkAll = new BookmarkAllWorks();\r\n        this.sendBookmarkIdList = () => {\r\n            if (states.bookmarkMode) {\r\n                //  id  type  illusts  novels\r\n                const list = [];\r\n                for (const data of store.idList) {\r\n                    if (data.type === 'novels') {\r\n                        list.push(data);\r\n                    }\r\n                    else {\r\n                        list.push({\r\n                            type: 'illusts',\r\n                            id: data.id,\r\n                        });\r\n                    }\r\n                }\r\n                store.idList = []; //  id \r\n                this.bookmarkAll.sendIdList(list);\r\n            }\r\n        };\r\n        this.init();\r\n    }\r\n    // \r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    addAnyElement() {\r\n        Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_')).addEventListener('click', () => {\r\n            EVT.fire('saveAvatarImage');\r\n        });\r\n        Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_')).addEventListener('click', () => {\r\n            EVT.fire('saveUserCover');\r\n        });\r\n        Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_'), [['title', lang.transl('_')]]).addEventListener('click', () => {\r\n            EVT.fire('saveAvatarIcon');\r\n        });\r\n        // \r\n        const bookmarkAllBtn = Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_'));\r\n        this.bookmarkAll = new BookmarkAllWorks(bookmarkAllBtn);\r\n        bookmarkAllBtn.addEventListener('click', async () => {\r\n            //  id \r\n            //  id \r\n            EVT.fire('bookmarkModeStart');\r\n            store.tag = Tools.getTagFromURL();\r\n            this.crawlNumber = 1; //  1 \r\n            this.readyGetIdList();\r\n        });\r\n        window.addEventListener(EVT.list.getIdListFinished, this.sendBookmarkIdList);\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: lang.transl('_1'),\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n    }\r\n    nextStep() {\r\n        this.readyGetIdList();\r\n        log.log(lang.transl('_'));\r\n    }\r\n    readyGetIdList() {\r\n        // \r\n        //  pathname  id \r\n        const test = location.pathname.match(/\\/users\\/\\d+(\\/.+)/);\r\n        if (test === null) {\r\n            // \r\n            this.listType = ListType.UserHome;\r\n        }\r\n        else if (test.length === 2) {\r\n            const str = test[1]; // id \r\n            if (str.includes('/artworks')) {\r\n                // \r\n                this.listType = ListType.Artworks;\r\n            }\r\n            else if (str.includes('/illustrations')) {\r\n                // \r\n                this.listType = ListType.Illustrations;\r\n            }\r\n            else if (str.includes('/manga')) {\r\n                // \r\n                this.listType = ListType.Manga;\r\n            }\r\n            else if (str.includes('/novels')) {\r\n                // \r\n                this.listType = ListType.Novels;\r\n                this.onceNumber = 24; //  24 \r\n            }\r\n        }\r\n        store.tag ? this.getIdListByTag() : this.getIdList();\r\n    }\r\n    getOffset() {\r\n        const nowPage = Utils.getURLSearchField(location.href, 'p'); //  1 \r\n        let offset = 0;\r\n        if (nowPage) {\r\n            offset = (parseInt(nowPage) - 1) * this.onceNumber;\r\n        }\r\n        if (offset < 0) {\r\n            offset = 0;\r\n        }\r\n        return offset;\r\n    }\r\n    // \r\n    getRequsetNumber() {\r\n        let requsetNumber = Config.worksNumberLimit;\r\n        if (this.crawlNumber !== -1) {\r\n            requsetNumber = this.onceNumber * this.crawlNumber;\r\n        }\r\n        return requsetNumber;\r\n    }\r\n    //  id \r\n    async getIdList() {\r\n        let type = [];\r\n        switch (this.listType) {\r\n            case ListType.UserHome:\r\n                type = ['illusts', 'manga', 'novels'];\r\n                break;\r\n            case ListType.Artworks:\r\n                type = ['illusts', 'manga'];\r\n                break;\r\n            case ListType.Illustrations:\r\n                type = ['illusts'];\r\n                break;\r\n            case ListType.Manga:\r\n                type = ['manga'];\r\n                break;\r\n            case ListType.Novels:\r\n                type = ['novels'];\r\n                break;\r\n        }\r\n        let idList = await API.getUserWorksByType(Tools.getUserId(), type);\r\n        //  24 \r\n        const allWorkIsNovels = idList.every((data) => {\r\n            return data.type === 'novels';\r\n        });\r\n        allWorkIsNovels && (this.onceNumber = 24);\r\n        // \r\n        const offset = this.getOffset();\r\n        const requsetNumber = this.getRequsetNumber();\r\n        //  id \r\n        idList.sort(Utils.sortByProperty('id')).reverse();\r\n        //  tag  API \r\n        //  offset  id\r\n        idList.splice(idList.length - offset, idList.length);\r\n        //  requsetNumber  id\r\n        if (idList.length > requsetNumber) {\r\n            idList.splice(0, idList.length - requsetNumber);\r\n        }\r\n        // \r\n        store.idList = store.idList.concat(idList);\r\n        this.getIdListFinished();\r\n    }\r\n    //  id  tag\r\n    async getIdListByTag() {\r\n        //  tag\r\n        let flag = 'illustmanga';\r\n        switch (this.listType) {\r\n            case ListType.Artworks:\r\n                flag = 'illustmanga';\r\n                break;\r\n            case ListType.Illustrations:\r\n                flag = 'illusts';\r\n                break;\r\n            case ListType.Manga:\r\n                flag = 'manga';\r\n                break;\r\n            case ListType.Novels:\r\n                flag = 'novels';\r\n                break;\r\n        }\r\n        // \r\n        const offset = this.getOffset();\r\n        const requsetNumber = this.getRequsetNumber();\r\n        let data = await API.getUserWorksByTypeWithTag(Tools.getUserId(), flag, store.tag, offset, requsetNumber);\r\n        //  illustType \r\n        if (this.listType === ListType.Novels) {\r\n            const d = data;\r\n            d.body.works.forEach((data) => store.idList.push({\r\n                type: 'novels',\r\n                id: data.id,\r\n            }));\r\n        }\r\n        else {\r\n            const d = data;\r\n            d.body.works.forEach((data) => {\r\n                let type = 'illusts';\r\n                switch (data.illustType) {\r\n                    case 0:\r\n                        type = 'illusts';\r\n                        break;\r\n                    case 1:\r\n                        type = 'manga';\r\n                        break;\r\n                    case 2:\r\n                        type = 'ugoira';\r\n                        break;\r\n                }\r\n                store.idList.push({\r\n                    type,\r\n                    id: data.id,\r\n                });\r\n            });\r\n        }\r\n        this.getIdListFinished();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.listType = ListType.UserHome;\r\n    }\r\n    sortResult() {\r\n        //  id id \r\n        store.result.sort(Utils.sortByProperty('id'));\r\n    }\r\n    destroy() {\r\n        Tools.clearSlot('crawlBtns');\r\n        Tools.clearSlot('otherBtns');\r\n        window.removeEventListener(EVT.list.getIdListFinished, this.sendBookmarkIdList);\r\n    }\r\n}\r\nexport { InitUserPage };\r\n","import { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\nimport { pageType } from '../PageType';\r\nimport { states } from '../store/States';\r\nimport { toast } from '../Toast';\r\nimport { Tools } from '../Tools';\r\n// \r\nclass QuickCrawl {\r\n    constructor() {\r\n        this.show = true; // \r\n        // \r\n        this.enablePageType = [pageType.list.Artwork, pageType.list.Novel];\r\n        this.addBtn();\r\n        this.setVisible();\r\n        this.bindEvents();\r\n    }\r\n    addBtn() {\r\n        // \r\n        this.btn = document.createElement('button');\r\n        this.btn.classList.add('rightButton');\r\n        this.btn.id = 'quickCrawlBtn';\r\n        this.btn.setAttribute('title', lang.transl('_') + ' (Alt + Q)');\r\n        this.btn.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\">\n  <use xlink:href=\"#icon-download\"></use>\n</svg>`;\r\n        document.body.insertAdjacentElement('afterbegin', this.btn);\r\n    }\r\n    bindEvents() {\r\n        // \r\n        this.btn.addEventListener('click', () => {\r\n            this.sendDownload();\r\n        }, false);\r\n        //  Alt + q \r\n        window.addEventListener('keydown', (ev) => {\r\n            if (this.show && ev.altKey && ev.code === 'KeyQ') {\r\n                this.sendDownload();\r\n            }\r\n        }, false);\r\n        // \r\n        window.addEventListener(EVT.list.pageSwitch, () => {\r\n            this.setVisible();\r\n        });\r\n    }\r\n    sendDownload() {\r\n        //  quickCrawl  busy \r\n        if (states.busy) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        states.quickCrawl = true;\r\n        EVT.fire('quickCrawl');\r\n        const isNovel = window.location.href.includes('/novel');\r\n        let idData;\r\n        if (isNovel) {\r\n            idData = {\r\n                type: 'novels',\r\n                id: Tools.getNovelId(window.location.href),\r\n            };\r\n        }\r\n        else {\r\n            idData = {\r\n                type: 'unknown',\r\n                id: Tools.getIllustId(window.location.href),\r\n            };\r\n        }\r\n        EVT.fire('crawlIdList', [idData]);\r\n    }\r\n    setVisible() {\r\n        this.show = this.enablePageType.includes(pageType.type);\r\n        this.btn.style.display = this.show ? 'flex' : 'none';\r\n    }\r\n}\r\nnew QuickCrawl();\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitBookmarkNewNovelPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.baseUrl = '';\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        this.maxCount = 250;\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInputGreater0(this.maxCount, true);\r\n    }\r\n    getPageUrl() {\r\n        // \r\n        const p = Utils.getURLSearchField(location.href, 'p');\r\n        this.startpageNo = parseInt(p) || 1;\r\n        const url = new URL(window.location.href);\r\n        url.searchParams.set('p', '1');\r\n        this.baseUrl = url.toString();\r\n        // https://www.pixiv.net/novel/bookmark_new.php?p=1\r\n        // https://www.pixiv.net/novel/bookmark_new_r18.php?p=1\r\n    }\r\n    nextStep() {\r\n        this.getPageUrl();\r\n        this.getIdList();\r\n    }\r\n    async getIdList() {\r\n        let p = this.startpageNo + this.listPageFinished;\r\n        let dom;\r\n        try {\r\n            const res = await fetch(this.baseUrl.replace('p=1', 'p=' + p));\r\n            const text = await res.text();\r\n            const parse = new DOMParser();\r\n            dom = parse.parseFromString(text, 'text/html');\r\n        }\r\n        catch (error) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        this.listPageFinished++;\r\n        if (dom.querySelector('._no-item')) {\r\n            // \r\n            return this.getIdListFinished();\r\n        }\r\n        const NovelItem = dom.querySelectorAll('.novel-items>li');\r\n        // \r\n        for (const item of NovelItem) {\r\n            // https://www.pixiv.net/novel/show.php?id=12831389\r\n            const link = item.querySelector('.imgbox a').href;\r\n            const id = parseInt(link.split('id=')[1]);\r\n            const bmkEl = item.querySelector('.bookmark-count');\r\n            let bmk = bmkEl ? parseInt(bmkEl.innerText) : 0;\r\n            const tags = [];\r\n            const tagsA = item.querySelectorAll('.tags>li>a');\r\n            for (const a of tagsA) {\r\n                tags.push(a.innerText.trim());\r\n            }\r\n            const userId = item.querySelector('img').dataset.userId;\r\n            // \r\n            const bookmarkBtn = item.querySelector('._one-click-bookmark');\r\n            const bookmarked = bookmarkBtn\r\n                ? bookmarkBtn.classList.contains('on')\r\n                : false;\r\n            const filterOpt = {\r\n                id: id,\r\n                workType: 3,\r\n                tags: tags,\r\n                bookmarkCount: bmk,\r\n                bookmarkData: bookmarked,\r\n                userId: userId,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                store.idList.push({\r\n                    type: 'novels',\r\n                    id: id.toString(),\r\n                });\r\n            }\r\n        }\r\n        log.log(lang.transl('_', this.listPageFinished.toString()), 1, false);\r\n        // \r\n        if (p >= this.maxCount || this.listPageFinished === this.crawlNumber) {\r\n            log.log(lang.transl('_'));\r\n            this.getIdListFinished();\r\n        }\r\n        else {\r\n            // \r\n            this.getIdList();\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.listPageFinished = 0;\r\n    }\r\n}\r\nexport { InitBookmarkNewNovelPage };\r\n","//  \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nclass InitNewNovelPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.option = this.resetOption();\r\n        this.limitMax = 20; //  20\r\n        this.fetchCount = 0; // \r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInputGreater0(this.maxCount, false);\r\n    }\r\n    nextStep() {\r\n        this.initFetchURL();\r\n        this.getIdList();\r\n    }\r\n    resetOption() {\r\n        return {\r\n            lastId: '0',\r\n            limit: '20',\r\n            type: '',\r\n            r18: '',\r\n        };\r\n    }\r\n    //  url\r\n    initFetchURL() {\r\n        this.option = this.resetOption();\r\n        if (this.crawlNumber < this.limitMax) {\r\n            this.option.limit = this.crawlNumber.toString();\r\n        }\r\n        else {\r\n            this.option.limit = this.limitMax.toString();\r\n        }\r\n        //  R18 \r\n        this.option.r18 = (location.href.includes('_r18.php') || false).toString();\r\n    }\r\n    async getIdList() {\r\n        let data;\r\n        try {\r\n            data = await API.getNewNovleData(this.option);\r\n        }\r\n        catch (error) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        let useData = data.body.novels;\r\n        for (const nowData of useData) {\r\n            // \r\n            if (this.fetchCount + 1 > this.crawlNumber) {\r\n                break;\r\n            }\r\n            else {\r\n                this.fetchCount++;\r\n            }\r\n            const filterOpt = {\r\n                id: nowData.id,\r\n                bookmarkData: nowData.bookmarkData,\r\n                bookmarkCount: nowData.bookmarkCount,\r\n                workType: 3,\r\n                tags: nowData.tags,\r\n                userId: nowData.userId,\r\n                createDate: nowData.createDate,\r\n                xRestrict: nowData.xRestrict,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                store.idList.push({\r\n                    type: 'novels',\r\n                    id: nowData.id,\r\n                });\r\n            }\r\n        }\r\n        log.log(lang.transl('_', this.fetchCount.toString()), 1, false);\r\n        // \r\n        if (this.fetchCount >= this.crawlNumber ||\r\n            this.fetchCount >= this.maxCount) {\r\n            log.log(lang.transl('_'));\r\n            this.getIdListFinished();\r\n            return;\r\n        }\r\n        // \r\n        this.option.lastId = data.body.lastId;\r\n        this.getIdList();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.fetchCount = 0;\r\n    }\r\n}\r\nexport { InitNewNovelPage };\r\n","//\r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { store } from '../store/Store';\r\nimport { QuickBookmark } from '../pageFunciton/QuickBookmark';\r\nimport { Tools } from '../Tools';\r\nimport { API } from '../API';\r\nimport { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\nclass InitNovelPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.crawlDirection = 0; // \r\n        this.init();\r\n    }\r\n    /*\r\n    -1 \r\n    0 \r\n    1 \r\n    */\r\n    initAny() {\r\n        this.initQuickBookmark();\r\n        window.addEventListener(EVT.list.pageSwitchedTypeNotChange, this.initQuickBookmark);\r\n    }\r\n    initQuickBookmark() {\r\n        new QuickBookmark();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_new')).addEventListener('click', () => {\r\n            this.crawlDirection = -1;\r\n            this.readyCrawl();\r\n        });\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_old')).addEventListener('click', () => {\r\n            this.crawlDirection = 1;\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_') +\r\n                '<br>' +\r\n                lang.transl('_0'),\r\n            rangTip: lang.transl('_1'),\r\n        });\r\n    }\r\n    destroy() {\r\n        Tools.clearSlot('crawlBtns');\r\n        Tools.clearSlot('otherBtns');\r\n        window.removeEventListener(EVT.list.pageSwitchedTypeNotChange, this.initQuickBookmark);\r\n    }\r\n    getWantPage() {\r\n        // \r\n        const crawlAllTip = this.crawlDirection === -1\r\n            ? lang.transl('_new')\r\n            : lang.transl('_old');\r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), crawlAllTip);\r\n    }\r\n    async getIdList() {\r\n        let type = ['novels'];\r\n        let idList = await API.getUserWorksByType(Tools.getUserId(), type);\r\n        //  id\r\n        let nowId = parseInt(Tools.getNovelId(window.location.href));\r\n        idList.forEach((id) => {\r\n            let idNum = parseInt(id.id);\r\n            // \r\n            if (idNum >= nowId && this.crawlDirection === -1) {\r\n                store.idList.push(id);\r\n            }\r\n            else if (idNum <= nowId && this.crawlDirection === 1) {\r\n                // \r\n                store.idList.push(id);\r\n            }\r\n        });\r\n        // \r\n        if (this.crawlNumber !== -1) {\r\n            //  \r\n            if (this.crawlDirection === -1) {\r\n                store.idList.sort(Utils.sortByProperty('id')).reverse();\r\n            }\r\n            else {\r\n                //  \r\n                store.idList.sort(Utils.sortByProperty('id'));\r\n            }\r\n            store.idList = store.idList.splice(0, this.crawlNumber);\r\n        }\r\n        this.getIdListFinished();\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.crawlDirection = 0; // \r\n    }\r\n}\r\nexport { InitNovelPage };\r\n","//\r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { store } from '../store/Store';\r\nimport { Tools } from '../Tools';\r\nimport { API } from '../API';\r\nclass InitNovelSeriesPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.seriesId = '';\r\n        this.limit = 30;\r\n        this.last = 0;\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_')).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        options.hideOption([1]);\r\n    }\r\n    getWantPage() { }\r\n    nextStep() {\r\n        this.seriesId = API.getURLPathField('series');\r\n        this.getIdList();\r\n    }\r\n    async getIdList() {\r\n        const seriesData = await API.getNovelSeriesData(this.seriesId, this.limit, this.last, 'asc');\r\n        const list = seriesData.body.seriesContents;\r\n        for (const item of list) {\r\n            store.idList.push({\r\n                type: 'novels',\r\n                id: item.id,\r\n            });\r\n        }\r\n        this.last += list.length;\r\n        // \r\n        if (list.length === this.limit) {\r\n            this.getIdList();\r\n        }\r\n        else {\r\n            this.getIdListFinished();\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.seriesId = '';\r\n        this.last = 0;\r\n    }\r\n}\r\nexport { InitNovelSeriesPage };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { Tools } from '../Tools';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nclass InitRankingNovelPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.pageUrlList = [];\r\n        this.init();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    initAny() { }\r\n    setFormOption() {\r\n        // /\r\n        this.maxCount = 100;\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    getWantPage() {\r\n        // \r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n        //  -1\r\n        if (this.crawlNumber === -1) {\r\n            this.crawlNumber = this.maxCount;\r\n        }\r\n    }\r\n    getPageUrl() {\r\n        const ul = document.querySelector('.ui-selectbox-container ul');\r\n        if (ul) {\r\n            const li = ul.querySelectorAll('li');\r\n            this.maxCount = li.length * 50;\r\n            for (const el of li) {\r\n                this.pageUrlList.push(el.dataset.url);\r\n            }\r\n        }\r\n        else {\r\n            //  ul li\r\n            this.pageUrlList.push(location.href);\r\n        }\r\n    }\r\n    nextStep() {\r\n        this.getPageUrl();\r\n        this.getIdList();\r\n    }\r\n    async getIdList() {\r\n        let dom;\r\n        try {\r\n            const res = await fetch(this.pageUrlList[this.listPageFinished]);\r\n            const text = await res.text();\r\n            const parse = new DOMParser();\r\n            dom = parse.parseFromString(text, 'text/html');\r\n        }\r\n        catch (error) {\r\n            this.getIdList();\r\n            return;\r\n        }\r\n        this.listPageFinished++;\r\n        const rankingItem = dom.querySelectorAll('._ranking-items>div');\r\n        // \r\n        for (const item of rankingItem) {\r\n            const rank = parseInt(item.querySelector('h1').innerText);\r\n            // \r\n            if (rank > this.crawlNumber) {\r\n                return this.getIdListFinished();\r\n            }\r\n            // https://www.pixiv.net/novel/show.php?id=12831389\r\n            const link = item.querySelector('.imgbox a').href;\r\n            const id = parseInt(link.split('id=')[1]);\r\n            const bmkEl = item.querySelector('.bookmark-count');\r\n            let bmk = bmkEl ? parseInt(bmkEl.innerText) : 0;\r\n            const tags = [];\r\n            const tagsA = item.querySelectorAll('.tags>li>a');\r\n            for (const a of tagsA) {\r\n                tags.push(a.innerText.trim());\r\n            }\r\n            const userId = item.querySelector('img').dataset.userId;\r\n            // \r\n            const bookmarkBtn = item.querySelector('._one-click-bookmark');\r\n            const bookmarked = bookmarkBtn\r\n                ? bookmarkBtn.classList.contains('on')\r\n                : false;\r\n            const filterOpt = {\r\n                id: id,\r\n                workType: 3,\r\n                tags: tags,\r\n                bookmarkCount: bmk,\r\n                bookmarkData: bookmarked,\r\n                userId: userId,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                store.setRankList(id.toString(), rank);\r\n                store.idList.push({\r\n                    type: 'novels',\r\n                    id: id.toString(),\r\n                });\r\n            }\r\n        }\r\n        log.log(lang.transl('_', this.listPageFinished.toString()), 1, false);\r\n        // \r\n        if (store.idList.length >= this.crawlNumber ||\r\n            this.listPageFinished === this.pageUrlList.length) {\r\n            this.getIdListFinished();\r\n        }\r\n        else {\r\n            // \r\n            this.getIdList();\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.pageUrlList = [];\r\n        this.listPageFinished = 0;\r\n    }\r\n}\r\nexport { InitRankingNovelPage };\r\n","// \r\nimport { InitPageBase } from '../crawl/InitPageBase';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { options } from '../setting/Options';\r\nimport { filter } from '../filter/Filter';\r\nimport { API } from '../API';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { FastScreen } from '../pageFunciton/FastScreen';\r\nimport { Tools } from '../Tools';\r\nimport { BookmarkAllWorks } from '../pageFunciton/BookmarkAllWorks';\r\nimport { Utils } from '../utils/Utils';\r\nimport { idListWithPageNo } from '../store/IdListWithPageNo';\r\nclass InitSearchNovelPage extends InitPageBase {\r\n    constructor() {\r\n        super();\r\n        this.worksWrapSelector = '#root section>div>ul';\r\n        this.option = {};\r\n        this.worksNoPerPage = 24; // \r\n        this.needCrawlPageCount = 0; // \r\n        this.sendCrawlTaskCount = 0; // \r\n        this.allOption = [\r\n            'order',\r\n            'type',\r\n            'wlt',\r\n            'wgt',\r\n            'hlt',\r\n            'hgt',\r\n            'ratio',\r\n            'tool',\r\n            's_mode',\r\n            'mode',\r\n            'scd',\r\n            'ecd',\r\n            'blt',\r\n            'bgt',\r\n            'tlt',\r\n            'tgt',\r\n            'original_only',\r\n            'work_lang',\r\n        ];\r\n        this.flag = 'searchNovel';\r\n        this.init();\r\n    }\r\n    initAny() {\r\n        new FastScreen();\r\n    }\r\n    addCrawlBtns() {\r\n        Tools.addBtn('crawlBtns', Colors.bgBlue, lang.transl('_'), [\r\n            ['title', lang.transl('_') + lang.transl('_')],\r\n        ]).addEventListener('click', () => {\r\n            this.readyCrawl();\r\n        });\r\n    }\r\n    getWorksWrap() {\r\n        const test = document.querySelectorAll(this.worksWrapSelector);\r\n        if (test.length > 0) {\r\n            //  ul\r\n            return test[test.length - 1];\r\n        }\r\n        return null;\r\n    }\r\n    addAnyElement() {\r\n        // \r\n        const bookmarkAllBtn = Tools.addBtn('otherBtns', Colors.bgGreen, lang.transl('_'));\r\n        const bookmarkAll = new BookmarkAllWorks(bookmarkAllBtn);\r\n        bookmarkAllBtn.addEventListener('click', () => {\r\n            const listWrap = this.getWorksWrap();\r\n            if (listWrap) {\r\n                const list = document.querySelectorAll('#root section>div>ul>li');\r\n                const showList = Array.from(list).filter((el) => {\r\n                    return el.style.display !== 'none';\r\n                });\r\n                bookmarkAll.sendWorkList(showList);\r\n            }\r\n        });\r\n    }\r\n    setFormOption() {\r\n        // /\r\n        options.setWantPageTip({\r\n            text: lang.transl('_'),\r\n            tip: lang.transl('_'),\r\n            rangTip: `1 - ${this.maxCount}`,\r\n        });\r\n    }\r\n    async nextStep() {\r\n        this.initFetchURL();\r\n        this.needCrawlPageCount = await this.calcNeedCrawlPageCount();\r\n        if (this.needCrawlPageCount === 0) {\r\n            return this.noResult();\r\n        }\r\n        this.startGetIdList();\r\n    }\r\n    getWantPage() {\r\n        this.crawlNumber = this.checkWantPageInput(lang.transl('_x'), lang.transl('_'));\r\n        if (this.crawlNumber === -1 || this.crawlNumber > this.maxCount) {\r\n            this.crawlNumber = this.maxCount;\r\n        }\r\n    }\r\n    // \r\n    async getSearchData(p) {\r\n        let data = await API.getNovelSearchData(store.tag, p, this.option);\r\n        return data.body.novel;\r\n    }\r\n    //  url \r\n    initFetchURL() {\r\n        let p = Utils.getURLSearchField(location.href, 'p');\r\n        this.startpageNo = parseInt(p) || 1;\r\n        //  url \r\n        this.option = {};\r\n        this.allOption.forEach((param) => {\r\n            let value = Utils.getURLSearchField(location.href, param);\r\n            if (value !== '') {\r\n                this.option[param] = value;\r\n            }\r\n        });\r\n        // \r\n        if (this.option.s_mode === undefined) {\r\n            this.option.s_mode = 's_tag_full';\r\n        }\r\n    }\r\n    // \r\n    async calcNeedCrawlPageCount() {\r\n        let data = await this.getSearchData(1);\r\n        // \r\n        let pageCount = Math.ceil(data.total / this.worksNoPerPage);\r\n        if (pageCount > this.maxCount) {\r\n            //  1000\r\n            pageCount = this.maxCount;\r\n        }\r\n        // \r\n        let needFetchPage = pageCount - this.startpageNo + 1;\r\n        // \r\n        if (needFetchPage < this.crawlNumber) {\r\n            return needFetchPage;\r\n        }\r\n        else {\r\n            return this.crawlNumber;\r\n        }\r\n    }\r\n    // \r\n    startGetIdList() {\r\n        if (this.needCrawlPageCount <= this.ajaxThreadsDefault) {\r\n            this.ajaxThread = this.needCrawlPageCount;\r\n        }\r\n        else {\r\n            this.ajaxThread = this.ajaxThreadsDefault;\r\n        }\r\n        for (let i = 0; i < this.ajaxThread; i++) {\r\n            this.getIdList();\r\n        }\r\n    }\r\n    //  p p p \r\n    async getIdList(p) {\r\n        if (p === undefined) {\r\n            p = this.startpageNo + this.sendCrawlTaskCount;\r\n            this.sendCrawlTaskCount++;\r\n        }\r\n        // \r\n        let data;\r\n        try {\r\n            data = await this.getSearchData(p);\r\n        }\r\n        catch (_a) {\r\n            return this.getIdList(p);\r\n        }\r\n        data = data.data;\r\n        for (const nowData of data) {\r\n            const filterOpt = {\r\n                createDate: nowData.createDate,\r\n                id: nowData.id,\r\n                bookmarkData: nowData.bookmarkData,\r\n                bookmarkCount: nowData.bookmarkCount,\r\n                workType: 3,\r\n                tags: nowData.tags,\r\n                userId: nowData.userId,\r\n                xRestrict: nowData.xRestrict,\r\n            };\r\n            if (await filter.check(filterOpt)) {\r\n                idListWithPageNo.add(this.flag, {\r\n                    type: 'novels',\r\n                    id: nowData.id,\r\n                }, p);\r\n            }\r\n        }\r\n        this.listPageFinished++;\r\n        log.log(lang.transl('_', this.listPageFinished.toString()), 1, false);\r\n        if (this.sendCrawlTaskCount + 1 <= this.needCrawlPageCount) {\r\n            // +1  sendCrawlTaskCount  0 \r\n            this.getIdList();\r\n        }\r\n        else {\r\n            // \r\n            if (this.listPageFinished === this.needCrawlPageCount) {\r\n                // \r\n                log.log(lang.transl('_'));\r\n                idListWithPageNo.store(this.flag);\r\n                this.getIdListFinished();\r\n            }\r\n        }\r\n    }\r\n    resetGetIdListStatus() {\r\n        this.listPageFinished = 0;\r\n        this.sendCrawlTaskCount = 0;\r\n    }\r\n    // \r\n    sortResult() {\r\n        store.resultMeta.sort(Utils.sortByProperty('bmk'));\r\n        store.result.sort(Utils.sortByProperty('bmk'));\r\n    }\r\n}\r\nexport { InitSearchNovelPage };\r\n","import { store } from '../store/Store';\r\nimport { settings } from '../setting/Settings';\r\nimport { lang } from '../Lang';\r\nimport { EVT } from '../EVT';\r\nimport { Bookmark } from '../Bookmark';\r\n// \r\nclass BookmarkAfterDL {\r\n    constructor(tipEl) {\r\n        //  id\r\n        // \r\n        this.savedIds = [];\r\n        this.successCount = 0;\r\n        this.tipEl = document.createElement('span');\r\n        if (tipEl) {\r\n            this.tipEl = tipEl;\r\n        }\r\n        this.bindEvents();\r\n    }\r\n    // \r\n    bindEvents() {\r\n        //  id \r\n        window.addEventListener(EVT.list.downloadSuccess, (ev) => {\r\n            const successData = ev.detail.data;\r\n            this.send(Number.parseInt(successData.id));\r\n        });\r\n        // \r\n        // \r\n        // \r\n        window.addEventListener(EVT.list.skipDownload, (ev) => {\r\n            const skipData = ev.detail.data;\r\n            if (skipData.reason === 'duplicate') {\r\n                this.send(Number.parseInt(skipData.id));\r\n            }\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.crawlStart, (ev) => {\r\n            this.reset();\r\n            this.showProgress();\r\n        });\r\n    }\r\n    showProgress() {\r\n        if (this.savedIds.length === 0) {\r\n            return (this.tipEl.textContent = '');\r\n        }\r\n        this.tipEl.textContent = `${lang.transl('_')} ${this.successCount}/${this.savedIds.length}`;\r\n    }\r\n    reset() {\r\n        this.savedIds = [];\r\n        this.successCount = 0;\r\n    }\r\n    //  id\r\n    send(id) {\r\n        if (!settings.bmkAfterDL) {\r\n            return;\r\n        }\r\n        if (typeof id !== 'number') {\r\n            id = Number.parseInt(id);\r\n        }\r\n        //  id \r\n        if (this.savedIds.includes(id)) {\r\n            return;\r\n        }\r\n        this.addBookmark(id);\r\n    }\r\n    //  tag  tag\r\n    async addBookmark(id) {\r\n        return new Promise(async (resolve, reject) => {\r\n            this.savedIds.push(id);\r\n            this.showProgress();\r\n            //  store \r\n            let data = undefined;\r\n            let dataSource = store.resultMeta.length > 0 ? store.resultMeta : store.result;\r\n            for (const r of dataSource) {\r\n                if (r.idNum === id) {\r\n                    data = r;\r\n                    break;\r\n                }\r\n            }\r\n            if (data === undefined) {\r\n                return reject(new Error(`Not find ${id} in result`));\r\n            }\r\n            await Bookmark.add(id.toString(), data.type !== 3 ? 'illusts' : 'novels', data.tags).catch((err) => {\r\n                //  id \r\n                console.error(err);\r\n                const len = this.savedIds.length;\r\n                for (let index = 0; index < len; index++) {\r\n                    if (this.savedIds[index] === id) {\r\n                        delete this.savedIds[index];\r\n                        break;\r\n                    }\r\n                }\r\n                return resolve(this.send(id));\r\n            });\r\n            this.successCount++;\r\n            this.showProgress();\r\n            resolve();\r\n        });\r\n    }\r\n}\r\nexport { BookmarkAfterDL };\r\n","import { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\nimport { log } from '../Log';\r\nimport { settings } from '../setting/Settings';\r\nimport { IndexedDB } from '../utils/IndexedDB';\r\nimport { store } from '../store/Store';\r\nimport { fileName } from '../FileName';\r\nimport { Utils } from '../utils/Utils';\r\nimport { toast } from '../Toast';\r\nimport { msgBox } from '../MsgBox';\r\nimport { secretSignal } from '../utils/SecretSignal';\r\n// \r\nclass Deduplication {\r\n    constructor() {\r\n        this.DBName = 'DLRecord';\r\n        this.DBVer = 1;\r\n        this.storeNameList = [\r\n            'record1',\r\n            'record2',\r\n            'record3',\r\n            'record4',\r\n            'record5',\r\n            'record6',\r\n            'record7',\r\n            'record8',\r\n            'record9',\r\n        ]; // \r\n        this.existedIdList = []; //  id  put  add\r\n        this.IDB = new IndexedDB();\r\n        this.init();\r\n    }\r\n    async init() {\r\n        await this.initDB();\r\n        this.bindEvents();\r\n        // this.exportTestFile(10)\r\n    }\r\n    // \r\n    async initDB() {\r\n        // \r\n        const onUpdate = (db) => {\r\n            for (const name of this.storeNameList) {\r\n                if (!db.objectStoreNames.contains(name)) {\r\n                    const store = db.createObjectStore(name, { keyPath: 'id' });\r\n                    store.createIndex('id', 'id', { unique: true });\r\n                }\r\n            }\r\n        };\r\n        return new Promise(async (resolve, reject) => {\r\n            resolve(await this.IDB.open(this.DBName, this.DBVer, onUpdate));\r\n        });\r\n    }\r\n    bindEvents() {\r\n        // \r\n        window.addEventListener(EVT.list.downloadSuccess, (ev) => {\r\n            const successData = ev.detail.data;\r\n            this.add(successData.id);\r\n        });\r\n        //  id  txt \r\n        secretSignal.register('recordtxt', () => {\r\n            this.importRecordFromTxt();\r\n        });\r\n        // \r\n        {\r\n            const btn = document.querySelector('#importDownloadRecord');\r\n            if (btn) {\r\n                btn.addEventListener('click', () => {\r\n                    EVT.fire('importDownloadRecord');\r\n                });\r\n            }\r\n        }\r\n        // \r\n        window.addEventListener(EVT.list.importDownloadRecord, () => {\r\n            this.importRecordFromJSON();\r\n        });\r\n        // \r\n        {\r\n            const btn = document.querySelector('#exportDownloadRecord');\r\n            if (btn) {\r\n                btn.addEventListener('click', () => {\r\n                    EVT.fire('exportDownloadRecord');\r\n                });\r\n            }\r\n        }\r\n        // \r\n        window.addEventListener(EVT.list.exportDownloadRecord, () => {\r\n            this.exportRecord();\r\n        });\r\n        // \r\n        {\r\n            const btn = document.querySelector('#clearDownloadRecord');\r\n            if (btn) {\r\n                btn.addEventListener('click', () => {\r\n                    EVT.fire('clearDownloadRecord');\r\n                });\r\n            }\r\n        }\r\n        // \r\n        window.addEventListener(EVT.list.clearDownloadRecord, () => {\r\n            this.clearRecords();\r\n            this.existedIdList = [];\r\n        });\r\n    }\r\n    //  id  storeName\r\n    getStoreName(id) {\r\n        const firstNum = parseInt(id[0]);\r\n        return this.storeNameList[firstNum - 1];\r\n    }\r\n    // \r\n    createRecord(resultId) {\r\n        let name = settings.userSetName;\r\n        // \r\n        for (const result of store.result) {\r\n            if (result.id === resultId) {\r\n                name = fileName.getFileName(result);\r\n                break;\r\n            }\r\n        }\r\n        return {\r\n            id: resultId,\r\n            n: name,\r\n        };\r\n    }\r\n    // \r\n    async add(resultId) {\r\n        const storeName = this.getStoreName(resultId);\r\n        const data = this.createRecord(resultId);\r\n        if (this.existedIdList.includes(resultId)) {\r\n            this.IDB.put(storeName, data);\r\n        }\r\n        else {\r\n            // \r\n            const result = await this.IDB.get(storeName, data.id);\r\n            const type = result ? 'put' : 'add';\r\n            this.IDB[type](storeName, data);\r\n        }\r\n    }\r\n    //  id \r\n    //  true false \r\n    async check(resultId) {\r\n        if (!Utils.isPixiv()) {\r\n            return false;\r\n        }\r\n        return new Promise(async (resolve, reject) => {\r\n            // \r\n            if (!settings.deduplication) {\r\n                return resolve(false);\r\n            }\r\n            // \r\n            const storeNmae = this.getStoreName(resultId);\r\n            const data = (await this.IDB.get(storeNmae, resultId));\r\n            // \r\n            if (data === null) {\r\n                return resolve(false);\r\n            }\r\n            else {\r\n                this.existedIdList.push(data.id);\r\n                // \r\n                if (settings.dupliStrategy === 'loose') {\r\n                    //  id\r\n                    return resolve(true);\r\n                }\r\n                else {\r\n                    //  id \r\n                    const record = this.createRecord(resultId);\r\n                    return resolve(record.n === data.n);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    // \r\n    clearRecords() {\r\n        for (const name of this.storeNameList) {\r\n            this.IDB.clear(name);\r\n        }\r\n        toast.success(lang.transl('_'));\r\n    }\r\n    // \r\n    async exportRecord() {\r\n        let record = [];\r\n        for (const name of this.storeNameList) {\r\n            const r = (await this.IDB.getAll(name));\r\n            record = record.concat(r);\r\n        }\r\n        const blob = Utils.json2Blob(record);\r\n        const url = URL.createObjectURL(blob);\r\n        Utils.downloadFile(url, `record-${Utils.replaceUnsafeStr(new Date().toLocaleString())}.json`);\r\n        toast.success(lang.transl('_'));\r\n    }\r\n    // \r\n    async importRecord(record) {\r\n        log.warning(lang.transl('_'));\r\n        // \r\n        let stored = 0;\r\n        let total = record.length;\r\n        log.log(`${stored}/${total}`, 1, false);\r\n        // \r\n        for (let index = 0; index < this.storeNameList.length; index++) {\r\n            // \r\n            const data = [];\r\n            for (const r of record) {\r\n                if (parseInt(r.id[0]) - 1 === index) {\r\n                    data.push(r);\r\n                }\r\n            }\r\n            // \r\n            await this.IDB.batchAddData(this.storeNameList[index], data, 'id');\r\n            stored += data.length;\r\n            log.log(`${stored}/${total}`, 1, false);\r\n        }\r\n        log.success(lang.transl('_'));\r\n        toast.success(lang.transl('_'));\r\n        msgBox.success(lang.transl('_'), {\r\n            title: lang.transl('_'),\r\n        });\r\n        //  100000  30 \r\n    }\r\n    //  json \r\n    async importRecordFromJSON() {\r\n        const record = (await Utils.loadJSONFile().catch((err) => {\r\n            msgBox.error(err);\r\n            return;\r\n        }));\r\n        if (!record) {\r\n            return;\r\n        }\r\n        // \r\n        if (Array.isArray(record) === false ||\r\n            record[0].id === undefined ||\r\n            record[0].n === undefined) {\r\n            const msg = 'Format error!';\r\n            return msgBox.error(msg);\r\n        }\r\n        this.importRecord(record);\r\n    }\r\n    //  txt \r\n    //  id\r\n    async importRecordFromTxt() {\r\n        const file = (await Utils.selectFile('.txt'))[0];\r\n        const text = await file.text();\r\n        // \r\n        let split = '\\r\\n';\r\n        if (!text.includes(split)) {\r\n            split = '\\n';\r\n        }\r\n        const arr = text.split(split);\r\n        //  id\r\n        const record = [];\r\n        for (const str of arr) {\r\n            if (str) {\r\n                record.push({\r\n                    id: str,\r\n                    n: str,\r\n                });\r\n            }\r\n        }\r\n        this.importRecord(record);\r\n    }\r\n    // \r\n    exportTestFile(number) {\r\n        let r = [];\r\n        for (let index = 1; index <= number; index++) {\r\n            r.push({\r\n                id: index.toString(),\r\n                n: index.toString(),\r\n            });\r\n        }\r\n        const blob = Utils.json2Blob(r);\r\n        const url = URL.createObjectURL(blob);\r\n        Utils.downloadFile(url, `record-test-${number}.json`);\r\n    }\r\n}\r\nconst deduplication = new Deduplication();\r\nexport { deduplication };\r\n","// \r\nimport { EVT } from '../EVT';\r\nimport { log } from '../Log';\r\nimport { lang } from '../Lang';\r\nimport { fileName } from '../FileName';\r\nimport { convertUgoira } from '../ConvertUgoira/ConvertUgoira';\r\nimport { progressBar } from './ProgressBar';\r\nimport { filter } from '../filter/Filter';\r\nimport { deduplication } from './Deduplication';\r\nimport { settings } from '../setting/Settings';\r\nimport { MakeNovelFile } from './MakeNovelFile';\r\nimport { Utils } from '../utils/Utils';\r\nclass Download {\r\n    constructor(progressBarIndex, data) {\r\n        this.fileName = '';\r\n        this.retryMax = 30;\r\n        this.retry = 0; // \r\n        this.cancel = false; // \r\n        this.sizeChecked = false; // \r\n        this.progressBarIndex = progressBarIndex;\r\n        this.download(data);\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        ;\r\n        [EVT.list.downloadStop, EVT.list.downloadPause].forEach((event) => {\r\n            window.addEventListener(event, () => {\r\n                this.cancel = true;\r\n            });\r\n        });\r\n    }\r\n    // \r\n    setProgressBar(loaded, total) {\r\n        progressBar.setProgress(this.progressBarIndex, {\r\n            name: this.fileName,\r\n            loaded: loaded,\r\n            total: total,\r\n        });\r\n    }\r\n    // \r\n    skip(data, msg) {\r\n        this.cancel = true;\r\n        if (msg) {\r\n            log.warning(msg);\r\n        }\r\n        EVT.fire('skipDownload', data);\r\n    }\r\n    // \r\n    afterReTryMax(status, fileId) {\r\n        // 404 \r\n        if (status === 404) {\r\n            // \r\n            log.error(lang.transl('_file404', fileId));\r\n            return this.skip({\r\n                id: fileId,\r\n                reason: '404',\r\n            });\r\n        }\r\n        // 404 \r\n        this.cancel = true;\r\n        EVT.fire('downloadError', fileId);\r\n    }\r\n    // \r\n    async download(arg) {\r\n        // \r\n        const duplicate = await deduplication.check(arg.id);\r\n        if (duplicate) {\r\n            return this.skip({\r\n                id: arg.id,\r\n                reason: 'duplicate',\r\n            }, lang.transl('_', arg.id));\r\n        }\r\n        // \r\n        this.fileName = fileName.getFileName(arg.data);\r\n        // \r\n        this.setProgressBar(0, 0);\r\n        // \r\n        let url;\r\n        if (arg.data.type === 3) {\r\n            // \r\n            if (arg.data.novelMeta) {\r\n                let blob = await MakeNovelFile.make(arg.data.novelMeta);\r\n                url = URL.createObjectURL(blob);\r\n            }\r\n            else {\r\n                throw new Error('Not found novelMeta');\r\n            }\r\n        }\r\n        else {\r\n            //  url url\r\n            url = arg.data[settings.imageSize] || arg.data.original;\r\n        }\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url, true);\r\n        xhr.responseType = 'blob';\r\n        // \r\n        xhr.addEventListener('progress', async (event) => {\r\n            // \r\n            if (!this.sizeChecked) {\r\n                this.sizeChecked = true;\r\n                const result = await filter.check({ size: event.total });\r\n                if (!result) {\r\n                    //  0 \r\n                    this.setProgressBar(1, 1);\r\n                    this.skip({\r\n                        id: arg.id,\r\n                        reason: 'size',\r\n                    }, lang.transl('_', arg.id));\r\n                }\r\n            }\r\n            if (this.cancel) {\r\n                xhr.abort();\r\n                xhr = null;\r\n                return;\r\n            }\r\n            this.setProgressBar(event.loaded, event.total);\r\n        });\r\n        //  loadend\r\n        xhr.addEventListener('loadend', async () => {\r\n            if (this.cancel) {\r\n                xhr = null;\r\n                return;\r\n            }\r\n            let file = xhr.response; // \r\n            if (xhr.status !== 200) {\r\n                // \r\n                //  200\r\n                progressBar.errorColor(this.progressBarIndex, true);\r\n                this.retry++;\r\n                if (this.retry >= this.retryMax) {\r\n                    //  retryMax \r\n                    this.afterReTryMax(xhr.status, arg.id);\r\n                }\r\n                else {\r\n                    return this.download(arg);\r\n                }\r\n            }\r\n            else {\r\n                // \r\n                progressBar.errorColor(this.progressBarIndex, false);\r\n                // \r\n                const convertExt = ['webm', 'gif', 'png'];\r\n                const ext = settings.ugoiraSaveAs;\r\n                if (convertExt.includes(ext) && arg.data.ugoiraInfo) {\r\n                    try {\r\n                        if (ext === 'webm') {\r\n                            file = await convertUgoira.webm(file, arg.data.ugoiraInfo);\r\n                        }\r\n                        if (ext === 'gif') {\r\n                            file = await convertUgoira.gif(file, arg.data.ugoiraInfo);\r\n                        }\r\n                        if (ext === 'png') {\r\n                            file = await convertUgoira.apng(file, arg.data.ugoiraInfo);\r\n                        }\r\n                    }\r\n                    catch (error) {\r\n                        const msg = `Convert ugoira error, id ${arg.data.idNum}.`;\r\n                        // \r\n                        // log.error(msg, 1)\r\n                        console.error(msg);\r\n                        this.cancel = true;\r\n                        EVT.fire('downloadError', arg.id);\r\n                    }\r\n                }\r\n            }\r\n            if (this.cancel) {\r\n                return;\r\n            }\r\n            // \r\n            const blobUrl = URL.createObjectURL(file);\r\n            // \r\n            // \r\n            // \r\n            if (arg.data.type === 0 || arg.data.type === 1) {\r\n                const result = await filter.check({\r\n                    mini: blobUrl,\r\n                });\r\n                if (!result) {\r\n                    return this.skip({\r\n                        id: arg.id,\r\n                        reason: 'color',\r\n                    }, lang.transl('_', arg.id));\r\n                }\r\n            }\r\n            // \r\n            // \r\n            if ((arg.data.type === 0 || arg.data.type === 1) &&\r\n                !arg.data.id.includes('p0')) {\r\n                const img = await Utils.loadImg(blobUrl);\r\n                const result = await filter.check({\r\n                    width: img.naturalWidth,\r\n                    height: img.naturalHeight,\r\n                });\r\n                if (!result) {\r\n                    return this.skip({\r\n                        id: arg.id,\r\n                        reason: 'widthHeight',\r\n                    }, lang.transl('_', arg.id));\r\n                }\r\n            }\r\n            // \r\n            this.browserDownload(blobUrl, this.fileName, arg.id, arg.taskBatch);\r\n            xhr = null;\r\n            file = null;\r\n        });\r\n        //  timeout 0\r\n        xhr.send();\r\n    }\r\n    // \r\n    browserDownload(blobUrl, fileName, id, taskBatch) {\r\n        // \r\n        if (this.cancel) {\r\n            //  bloburl\r\n            URL.revokeObjectURL(blobUrl);\r\n            return;\r\n        }\r\n        const sendData = {\r\n            msg: 'send_download',\r\n            fileUrl: blobUrl,\r\n            fileName: fileName,\r\n            id,\r\n            taskBatch,\r\n        };\r\n        chrome.runtime.sendMessage(sendData);\r\n    }\r\n}\r\nexport { Download };\r\n","// \r\nimport { EVT } from '../EVT';\r\nimport { Tools } from '../Tools';\r\nimport { store } from '../store/Store';\r\nimport { log } from '../Log';\r\nimport { lang } from '../Lang';\r\nimport { Colors } from '../config/Colors';\r\nimport { settings } from '../setting/Settings';\r\nimport { Download } from '../download/Download';\r\nimport { progressBar } from './ProgressBar';\r\nimport { downloadStates } from './DownloadStates';\r\nimport { ShowSkipCount } from './ShowSkipCount';\r\nimport { ShowConvertCount } from './ShowConvertCount';\r\nimport { BookmarkAfterDL } from './BookmarkAfterDL';\r\nimport { resume } from './Resume';\r\nimport { states } from '../store/States';\r\nimport { Config } from '../config/Config';\r\nimport { toast } from '../Toast';\r\nimport { Utils } from '../utils/Utils';\r\nimport { msgBox } from '../MsgBox';\r\nclass DownloadControl {\r\n    constructor() {\r\n        this.thread = 5; // \r\n        //  5\r\n        //  Config.downloadThreadMax \r\n        this.taskBatch = 0; // \r\n        this.taskList = {}; //  id  key\r\n        this.errorIdList = []; //  id\r\n        this.downloaded = 0; // \r\n        this.wrapper = document.createElement('div');\r\n        this.totalNumberEl = document.createElement('span');\r\n        this.statesEl = document.createElement('span');\r\n        this.stop = false; // \r\n        this.pause = false; // \r\n        this.createDownloadArea();\r\n        this.bindEvents();\r\n        const skipTipWrap = this.wrapper.querySelector('.skip_tip');\r\n        new ShowSkipCount(skipTipWrap);\r\n        const convertTipWrap = this.wrapper.querySelector('.convert_tip');\r\n        new ShowConvertCount(convertTipWrap);\r\n        //  p \r\n        if (Utils.isPixiv()) {\r\n            const bmkAfterDLTipWrap = this.wrapper.querySelector('.bmkAfterDL_tip');\r\n            new BookmarkAfterDL(bmkAfterDLTipWrap);\r\n        }\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            this.hideDownloadArea();\r\n            this.reset();\r\n        });\r\n        for (const ev of [\r\n            EVT.list.crawlFinish,\r\n            EVT.list.resultChange,\r\n            EVT.list.resume,\r\n        ]) {\r\n            window.addEventListener(ev, () => {\r\n                // \r\n                window.setTimeout(() => {\r\n                    this.readyDownload();\r\n                }, 0);\r\n            });\r\n        }\r\n        window.addEventListener(EVT.list.skipDownload, (ev) => {\r\n            const data = ev.detail.data;\r\n            this.downloadOrSkipAFile(data);\r\n        });\r\n        window.addEventListener(EVT.list.downloadError, (ev) => {\r\n            const id = ev.detail.data;\r\n            this.downloadError(id);\r\n        });\r\n        // \r\n        chrome.runtime.onMessage.addListener((msg) => {\r\n            if (!this.taskBatch) {\r\n                return;\r\n            }\r\n            // \r\n            if (msg.msg === 'downloaded') {\r\n                //  BLOBURL\r\n                URL.revokeObjectURL(msg.data.url);\r\n                // \r\n                EVT.fire('downloadSuccess', msg.data);\r\n                this.downloadOrSkipAFile(msg.data);\r\n            }\r\n            else if (msg.msg === 'download_err') {\r\n                // \r\n                log.error(`${msg.data.id} download error! code: ${msg.err}. The downloader will try to download the file again `);\r\n                EVT.fire('saveFileError');\r\n                // \r\n                // \r\n                this.saveFileError(msg.data);\r\n            }\r\n            // UUID \r\n            if (msg.data && msg.data.uuid) {\r\n                log.error(lang.transl('_uuid'));\r\n            }\r\n        });\r\n        window.addEventListener(EVT.list.downloadComplete, () => {\r\n            log.success(lang.transl('_'), 2);\r\n            toast.success(lang.transl('_2'));\r\n        });\r\n    }\r\n    /** {id}  {id_num}{p_num} */\r\n    checkNamingRule() {\r\n        if (settings.userSetName.includes('{id}') ||\r\n            (settings.userSetName.includes('{id_num}') &&\r\n                settings.userSetName.includes('{p_num}'))) {\r\n            return true;\r\n        }\r\n        else {\r\n            msgBox.error(lang.transl('_id'));\r\n            EVT.fire('openCenterPanel');\r\n            EVT.fire('downloadCancel');\r\n            return false;\r\n        }\r\n    }\r\n    createDownloadArea() {\r\n        const html = `<div class=\"download_area\">\n    <p> ${lang.transl('_n', '<span class=\"fwb blue imgNum\">0</span>')}</p>\n    \n    <div class=\"centerWrap_btns\">\n    <button class=\"startDownload\" type=\"button\" style=\"background:${Colors.bgBlue};\"> ${lang.transl('_')}</button>\n    <button class=\"pauseDownload\" type=\"button\" style=\"background:${Colors.bgYellow};\"> ${lang.transl('_')}</button>\n    <button class=\"stopDownload\" type=\"button\" style=\"background:${Colors.bgRed};\"> ${lang.transl('_')}</button>\n    <button class=\"copyUrl\" type=\"button\" style=\"background:${Colors.bgGreen};\"> ${lang.transl('_url')}</button>\n    </div>\n    <div class=\"download_status_text_wrap\">\n    <span>${lang.transl('_')}</span>\n    <span class=\"down_status\">${lang.transl('_')}</span>\n    <span class=\"skip_tip warn\"></span>\n    <span class=\"convert_tip warn\"></span>\n    <span class=\"bmkAfterDL_tip green\"></span>\n    </div>\n    </div>`;\r\n        this.wrapper = Tools.useSlot('downloadArea', html);\r\n        this.statesEl = this.wrapper.querySelector('.down_status');\r\n        this.totalNumberEl = this.wrapper.querySelector('.imgNum');\r\n        this.wrapper\r\n            .querySelector('.startDownload')\r\n            .addEventListener('click', () => {\r\n            this.startDownload();\r\n        });\r\n        this.wrapper\r\n            .querySelector('.pauseDownload')\r\n            .addEventListener('click', () => {\r\n            this.pauseDownload();\r\n        });\r\n        this.wrapper\r\n            .querySelector('.stopDownload')\r\n            .addEventListener('click', () => {\r\n            this.stopDownload();\r\n        });\r\n        this.wrapper.querySelector('.copyUrl').addEventListener('click', () => {\r\n            EVT.fire('showURLs');\r\n        });\r\n    }\r\n    // \r\n    readyDownload() {\r\n        if (states.busy) {\r\n            return;\r\n        }\r\n        if (store.result.length === 0) {\r\n            return progressBar.reset(0);\r\n        }\r\n        this.showDownloadArea();\r\n        this.totalNumberEl.textContent = store.result.length.toString();\r\n        this.setDownloaded();\r\n        this.setDownloadThread();\r\n        //   \r\n        if (states.notAutoDownload) {\r\n            return;\r\n        }\r\n        // \r\n        if (settings.quietDownload ||\r\n            states.quickCrawl ||\r\n            states.downloadFromViewer) {\r\n            this.startDownload();\r\n        }\r\n    }\r\n    // \r\n    startDownload() {\r\n        // \r\n        if (!this.checkNamingRule()) {\r\n            return false;\r\n        }\r\n        if (!this.pause && !resume.flag) {\r\n            // \r\n            // \r\n            downloadStates.init();\r\n        }\r\n        else {\r\n            // \r\n            // \r\n            downloadStates.resume();\r\n        }\r\n        this.reset();\r\n        this.setDownloaded();\r\n        this.taskBatch = new Date().getTime(); // \r\n        this.setDownloadThread();\r\n        EVT.fire('downloadStart');\r\n        // \r\n        for (let i = 0; i < this.thread; i++) {\r\n            this.createDownload(i);\r\n        }\r\n        this.setDownStateText(lang.transl('_'));\r\n        log.success(lang.transl('_'));\r\n    }\r\n    // \r\n    pauseDownload() {\r\n        if (store.result.length === 0) {\r\n            return;\r\n        }\r\n        // \r\n        if (this.stop === true) {\r\n            return;\r\n        }\r\n        if (this.pause === false) {\r\n            // \r\n            if (states.busy) {\r\n                this.pause = true;\r\n                this.setDownStateText(lang.transl('_'), '#f00');\r\n                log.warning(lang.transl('_'), 2);\r\n                EVT.fire('downloadPause');\r\n            }\r\n            else {\r\n                // \r\n                return;\r\n            }\r\n        }\r\n    }\r\n    // \r\n    stopDownload() {\r\n        if (store.result.length === 0 || this.stop) {\r\n            return;\r\n        }\r\n        this.stop = true;\r\n        this.setDownStateText(lang.transl('_'), '#f00');\r\n        log.error(lang.transl('_'), 2);\r\n        this.pause = false;\r\n        EVT.fire('downloadStop');\r\n    }\r\n    downloadError(id) {\r\n        this.errorIdList.push(id);\r\n        // \r\n        const task = this.taskList[id];\r\n        const no = task.progressBarIndex;\r\n        if (this.checkContinueDownload()) {\r\n            this.createDownload(no);\r\n        }\r\n    }\r\n    saveFileError(data) {\r\n        if (this.pause || this.stop) {\r\n            return false;\r\n        }\r\n        const task = this.taskList[data.id];\r\n        // \r\n        downloadStates.setState(task.index, -1);\r\n        // \r\n        this.createDownload(task.progressBarIndex);\r\n    }\r\n    downloadOrSkipAFile(data) {\r\n        const task = this.taskList[data.id];\r\n        // \r\n        downloadStates.setState(task.index, 1);\r\n        // \r\n        this.setDownloaded();\r\n        // \r\n        const no = task.progressBarIndex;\r\n        if (this.checkContinueDownload()) {\r\n            this.createDownload(no);\r\n        }\r\n    }\r\n    // \r\n    checkContinueDownload() {\r\n        // \r\n        if (this.downloaded < store.result.length) {\r\n            // \r\n            if (this.pause || this.stop) {\r\n                return false;\r\n            }\r\n            //   \r\n            if (this.downloaded + this.thread - 1 < store.result.length) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    // \r\n    setDownloadThread() {\r\n        const setThread = settings.downloadThread;\r\n        if (setThread < 1 ||\r\n            setThread > Config.downloadThreadMax ||\r\n            isNaN(setThread)) {\r\n            // \r\n            this.thread = Config.downloadThreadMax;\r\n        }\r\n        else {\r\n            this.thread = setThread; // \r\n        }\r\n        // \r\n        if (store.result.length - this.downloaded < this.thread) {\r\n            this.thread = store.result.length - this.downloaded;\r\n        }\r\n        // \r\n        progressBar.reset(this.thread, this.downloaded);\r\n    }\r\n    // \r\n    createDownload(progressBarIndex) {\r\n        const index = downloadStates.getFirstDownloadItem();\r\n        if (index === undefined) {\r\n            // \r\n            // \r\n            return this.checkCompleteWithError();\r\n        }\r\n        else {\r\n            const workData = store.result[index];\r\n            const data = {\r\n                id: workData.id,\r\n                data: workData,\r\n                index: index,\r\n                progressBarIndex: progressBarIndex,\r\n                taskBatch: this.taskBatch,\r\n            };\r\n            // \r\n            this.taskList[workData.id] = {\r\n                index,\r\n                progressBarIndex: progressBarIndex,\r\n            };\r\n            // \r\n            new Download(progressBarIndex, data);\r\n        }\r\n    }\r\n    setDownloaded() {\r\n        this.downloaded = downloadStates.downloadedCount();\r\n        const text = `${this.downloaded} / ${store.result.length}`;\r\n        log.log(text, 2, false);\r\n        // \r\n        progressBar.setTotalProgress(this.downloaded);\r\n        if (this.downloaded === 0) {\r\n            this.setDownStateText(lang.transl('_'));\r\n        }\r\n        // \r\n        if (this.downloaded === store.result.length) {\r\n            window.setTimeout(() => {\r\n                // \r\n                EVT.fire('downloadComplete');\r\n            }, 0);\r\n            this.reset();\r\n            this.setDownStateText(lang.transl('_'), Colors.textSuccess);\r\n        }\r\n        this.checkCompleteWithError();\r\n    }\r\n    // \r\n    checkCompleteWithError() {\r\n        if (this.errorIdList.length > 0 &&\r\n            this.downloaded + this.errorIdList.length === store.result.length) {\r\n            // \r\n            this.pauseDownload();\r\n            setTimeout(() => {\r\n                this.startDownload();\r\n            }, 3000);\r\n        }\r\n    }\r\n    // \r\n    setDownStateText(text, color = Colors.bgBlue) {\r\n        this.statesEl.textContent = text;\r\n        this.statesEl.style.color = color;\r\n    }\r\n    reset() {\r\n        this.pause = false;\r\n        this.stop = false;\r\n        this.errorIdList = [];\r\n    }\r\n    showDownloadArea() {\r\n        this.wrapper.style.display = 'block';\r\n    }\r\n    hideDownloadArea() {\r\n        this.wrapper.style.display = 'none';\r\n    }\r\n}\r\nnew DownloadControl();\r\n","import { EVT } from '../EVT';\r\nimport { store } from '../store/Store';\r\n// \r\nclass DownloadStates {\r\n    constructor() {\r\n        this.states = [];\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        // \r\n        const evs = [EVT.list.crawlFinish, EVT.list.resultChange];\r\n        for (const ev of evs) {\r\n            window.addEventListener(ev, () => {\r\n                this.init();\r\n            });\r\n        }\r\n    }\r\n    // \r\n    init() {\r\n        this.states = new Array(store.result.length).fill(-1);\r\n    }\r\n    // \r\n    downloadedCount() {\r\n        let count = 0;\r\n        const length = this.states.length;\r\n        for (let i = 0; i < length; i++) {\r\n            if (this.states[i] === 1) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    // \r\n    // \r\n    replace(states) {\r\n        this.states = states;\r\n    }\r\n    // \r\n    // \r\n    resume() {\r\n        const length = this.states.length;\r\n        for (let i = 0; i < length; i++) {\r\n            if (this.states[i] === 0) {\r\n                this.setState(i, -1);\r\n            }\r\n        }\r\n    }\r\n    // \r\n    getFirstDownloadItem() {\r\n        const length = this.states.length;\r\n        for (let i = 0; i < length; i++) {\r\n            if (this.states[i] === -1) {\r\n                this.setState(i, 0);\r\n                return i;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    // \r\n    setState(index, value) {\r\n        this.states[index] = value;\r\n    }\r\n    clear() {\r\n        this.states = [];\r\n    }\r\n}\r\nconst downloadStates = new DownloadStates();\r\nexport { downloadStates };\r\n","import { Tools } from '../Tools';\r\nimport { store } from '../store/Store';\r\nimport { fileName } from '../FileName';\r\nimport { lang } from '../Lang';\r\nimport { Utils } from '../utils/Utils';\r\nimport { toast } from '../Toast';\r\n//  lst \r\nclass ExportLST {\r\n    constructor() {\r\n        this.separate = '?/'; // \r\n        this.CRLF = '\\r\\n'; // \r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener('keydown', (ev) => {\r\n            if (ev.altKey && ev.code === 'KeyL') {\r\n                this.createLst();\r\n            }\r\n        }, false);\r\n    }\r\n    createLst() {\r\n        if (store.result.length === 0) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        const array = [];\r\n        for (const data of store.result) {\r\n            array.push(data.original + this.separate + fileName.getFileName(data));\r\n        }\r\n        const result = array.join(this.CRLF);\r\n        const blob = new Blob([result]);\r\n        const url = URL.createObjectURL(blob);\r\n        const name = Tools.getPageTitle() + '.lst';\r\n        Utils.downloadFile(url, name);\r\n    }\r\n}\r\nnew ExportLST();\r\n","import { EVT } from '../EVT';\r\nimport { Tools } from '../Tools';\r\nimport { store } from '../store/Store';\r\nimport { lang } from '../Lang';\r\nimport { Utils } from '../utils/Utils';\r\nimport { toast } from '../Toast';\r\nclass ExportResult {\r\n    constructor() {\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.exportResult, () => {\r\n            this.output();\r\n        });\r\n    }\r\n    output() {\r\n        // \r\n        if (store.result.length === 0) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        // \r\n        let resultArray = [];\r\n        // \r\n        const split = ',';\r\n        // \r\n        resultArray.push('[');\r\n        // \r\n        for (const result of store.result) {\r\n            resultArray.push(JSON.stringify(result));\r\n            resultArray.push(split);\r\n        }\r\n        // \r\n        resultArray.pop();\r\n        // \r\n        resultArray.push(']');\r\n        //  blob \r\n        const blob = new Blob(resultArray, { type: 'application/json' });\r\n        resultArray = [];\r\n        const url = URL.createObjectURL(blob);\r\n        Utils.downloadFile(url, `result-${Utils.replaceUnsafeStr(Tools.getPageTitle())}-${store.crawlCompleteTime.getTime()}.json`);\r\n        toast.success(lang.transl('_'));\r\n    }\r\n}\r\nnew ExportResult();\r\n","import { EVT } from '../EVT';\r\nimport { Tools } from '../Tools';\r\nimport { lang } from '../Lang';\r\nimport { Config } from '../config/Config';\r\nimport { store } from '../store/Store';\r\nimport { fileName } from '../FileName';\r\nimport { createCSV } from '../utils/CreateCSV';\r\nimport { toast } from '../Toast';\r\nimport { Utils } from '../utils/Utils';\r\n// name  csv \r\n// index \r\n//  csv \r\nclass ExportResult2CSV {\r\n    constructor() {\r\n        this.xRestrictMap = new Map([\r\n            [0, 'AllAges'],\r\n            [1, 'R-18'],\r\n            [2, 'R-18G'],\r\n        ]);\r\n        // \r\n        this.fieldCfg = [\r\n            {\r\n                name: 'id',\r\n                index: 'idNum',\r\n            },\r\n            {\r\n                name: 'tags',\r\n                index: 'tags',\r\n            },\r\n            {\r\n                name: 'tags_transl',\r\n                index: 'tagsTranslOnly',\r\n            },\r\n            {\r\n                name: 'user',\r\n                index: 'user',\r\n            },\r\n            {\r\n                name: 'userId',\r\n                index: 'userId',\r\n            },\r\n            {\r\n                name: 'title',\r\n                index: 'title',\r\n            },\r\n            {\r\n                name: 'type',\r\n                index: 'type',\r\n            },\r\n            {\r\n                name: 'page',\r\n                index: 'pageCount',\r\n            },\r\n            {\r\n                name: 'bookmark',\r\n                index: 'bmk',\r\n            },\r\n            {\r\n                name: 'bookmarked',\r\n                index: 'bookmarked',\r\n            },\r\n            {\r\n                name: 'likeCount',\r\n                index: 'likeCount',\r\n            },\r\n            {\r\n                name: 'viewCount',\r\n                index: 'viewCount',\r\n            },\r\n            {\r\n                name: 'commentCount',\r\n                index: 'commentCount',\r\n            },\r\n            {\r\n                name: 'width',\r\n                index: 'fullWidth',\r\n            },\r\n            {\r\n                name: 'height',\r\n                index: 'fullHeight',\r\n            },\r\n            {\r\n                name: 'xRestrict',\r\n                index: 'xRestrict',\r\n            },\r\n            {\r\n                name: 'date',\r\n                index: 'date',\r\n            },\r\n            {\r\n                name: 'original',\r\n                index: 'original',\r\n            },\r\n            {\r\n                name: 'thumb',\r\n                index: 'thumb',\r\n            },\r\n            // fileName  index \r\n            {\r\n                name: 'fileName',\r\n                index: 'title',\r\n            },\r\n        ];\r\n        window.addEventListener(EVT.list.outputCSV, () => {\r\n            this.beforeCreate();\r\n        });\r\n    }\r\n    beforeCreate() {\r\n        // \r\n        if (store.result.length === 0) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        //  result  resultMeta result resultMeta result \r\n        // 1 result resultMeta \r\n        // 2:  A resultMeta  A  B B  resultMeta  A \r\n        //  result \r\n        this.create(store.result);\r\n    }\r\n    create(data) {\r\n        const body = []; // \r\n        // \r\n        const head = [];\r\n        for (const field of this.fieldCfg) {\r\n            head.push(field.name);\r\n        }\r\n        body.push(head);\r\n        // \r\n        for (const d of data) {\r\n            // \r\n            //  csv \r\n            //  && id  p0 \r\n            if (d.pageCount > 1 && !d.id.endsWith('p0')) {\r\n                continue;\r\n            }\r\n            const bodyItem = []; // \r\n            // \r\n            for (const field of this.fieldCfg) {\r\n                if (field.name === 'fileName') {\r\n                    bodyItem.push(fileName.getFileName(d));\r\n                }\r\n                else {\r\n                    let result = d[field.index];\r\n                    if (result === undefined) {\r\n                        result = '';\r\n                    }\r\n                    // \r\n                    if (field.name === 'type') {\r\n                        result = Config.worksTypeName[result];\r\n                    }\r\n                    if (field.name === 'bookmarked') {\r\n                        result = result ? 'Yes' : 'No';\r\n                    }\r\n                    if (field.name === 'xRestrict') {\r\n                        result = this.xRestrictMap.get(result) || '';\r\n                    }\r\n                    bodyItem.push(result);\r\n                }\r\n            }\r\n            // \r\n            body.push(bodyItem);\r\n        }\r\n        const csv = createCSV.create(body);\r\n        const csvURL = URL.createObjectURL(csv);\r\n        // \r\n        let csvName = Tools.getPageTitle();\r\n        const ogTitle = document.querySelector('meta[property=\"og:title\"]');\r\n        if (ogTitle) {\r\n            csvName = ogTitle.content;\r\n        }\r\n        csvName = `result-${Utils.replaceUnsafeStr(csvName)}-${store.crawlCompleteTime.getTime()}.csv`;\r\n        Utils.downloadFile(csvURL, csvName);\r\n        toast.success(lang.transl('_'));\r\n    }\r\n}\r\nnew ExportResult2CSV();\r\n","import { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\nimport { Utils } from '../utils/Utils';\r\nimport { states } from '../store/States';\r\nimport { store } from '../store/Store';\r\nimport { toast } from '../Toast';\r\nimport { msgBox } from '../MsgBox';\r\nimport { filter } from '../filter/Filter';\r\nclass ImportResult {\r\n    constructor() {\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.importResult, () => {\r\n            if (states.busy) {\r\n                toast.error(lang.transl('_'));\r\n                return;\r\n            }\r\n            this.import();\r\n        });\r\n    }\r\n    async import() {\r\n        const loadedJSON = (await Utils.loadJSONFile().catch((err) => {\r\n            return msgBox.error(err);\r\n        }));\r\n        if (!loadedJSON) {\r\n            return;\r\n        }\r\n        // \r\n        if (!Array.isArray(loadedJSON) || !loadedJSON.length || !loadedJSON[0]) {\r\n            return toast.error('Format error!');\r\n        }\r\n        // \r\n        const keys = Object.keys(loadedJSON[0]);\r\n        const need = ['idNum', 'id', 'original', 'type', 'ext'];\r\n        for (const field of need) {\r\n            if (!keys.includes(field)) {\r\n                return toast.error('Format error!');\r\n            }\r\n        }\r\n        // \r\n        const temp = [];\r\n        for (const result of loadedJSON) {\r\n            const check = await filter.check({\r\n                id: result.idNum,\r\n                workType: result.type,\r\n                pageCount: result.pageCount,\r\n                tags: result.tagsWithTransl,\r\n                bookmarkCount: result.bmk,\r\n                bookmarkData: result.bookmarked,\r\n                width: result.fullWidth,\r\n                height: result.fullHeight,\r\n                createDate: result.date,\r\n                userId: result.userId,\r\n                xRestrict: result.xRestrict,\r\n            });\r\n            if (check) {\r\n                temp.push(result);\r\n            }\r\n        }\r\n        // \r\n        if (temp.length === 0) {\r\n            msgBox.warning(lang.transl('_'));\r\n            return;\r\n        }\r\n        // \r\n        //  store.addResult \r\n        store.reset();\r\n        for (const r of temp) {\r\n            store.addResult(r);\r\n        }\r\n        // \r\n        EVT.fire('resultChange');\r\n        msgBox.success(lang.transl('_'));\r\n    }\r\n}\r\nnew ImportResult();\r\n","import { Utils } from '../utils/Utils';\r\nclass MakeEPUB {\r\n    constructor() { }\r\n    // epub  title  epub \r\n    make(data, saveMeta = true) {\r\n        return new Promise((resolve, reject) => {\r\n            let content = data.content;\r\n            // \r\n            if (saveMeta) {\r\n                content = data.meta + content;\r\n            }\r\n            //  br \r\n            content = content.replace(/\\n/g, '<br/>');\r\n            new EpubMaker()\r\n                .withTemplate('idpf-wasteland')\r\n                .withAuthor(Utils.replaceUnsafeStr(data.userName))\r\n                .withModificationDate(new Date(data.createDate))\r\n                .withRights({\r\n                description: data.description,\r\n                license: '',\r\n            })\r\n                .withAttributionUrl(`https://www.pixiv.net/novel/show.php?id=${data.id}`)\r\n                .withCover(data.coverUrl, {\r\n                license: '',\r\n                attributionUrl: '',\r\n            })\r\n                .withTitle(Utils.replaceUnsafeStr(data.title))\r\n                .withSection(new EpubMaker.Section('1', null, { content: content }, false, true))\r\n                .makeEpub()\r\n                .then((blob) => {\r\n                resolve(blob);\r\n            });\r\n        });\r\n    }\r\n}\r\nconst makeEPUB = new MakeEPUB();\r\nexport { makeEPUB };\r\n","import { settings } from '../setting/Settings';\r\nimport { makeEPUB } from './MakeEPUB';\r\nclass MakeNovelFile {\r\n    static async make(data, type = settings.novelSaveAs) {\r\n        if (type === 'txt') {\r\n            return this.makeTXT(data, settings.saveNovelMeta);\r\n        }\r\n        return makeEPUB.make(data, settings.saveNovelMeta);\r\n    }\r\n    static makeTXT(data, saveMeta = true) {\r\n        let content = data.content;\r\n        // \r\n        if (saveMeta) {\r\n            content = data.meta + content;\r\n        }\r\n        //  html \r\n        content = content.replace(/<br \\/>/g, '\\n').replace(/<\\/?.+?>/g, '');\r\n        return new Blob([content], {\r\n            type: 'text/plain',\r\n        });\r\n    }\r\n}\r\nexport { MakeNovelFile };\r\n","// \r\nimport { store } from '../store/Store';\r\nimport { Tools } from '../Tools';\r\nimport { lang } from '../Lang';\r\n// \r\nclass ProgressBar {\r\n    constructor() {\r\n        this.wrapHTML = `\n  <div class=\"progressBarWrap\">\n  <div class=\"total\">\n  <span class=\"text\">${lang.transl('_')}</span>\n  <div class=\"right1\">\n  <div class=\"progressBar progressBar1\">\n  <div class=\"progress progress1\"></div>\n  </div>\n  <div class=\"totalNumberWrap\">\n  <span class=\"downloaded\">0</span>\n  /\n  <span class=\"imgNum totalNumber\">0</span>\n  </div>\n  </div>\n  </div>\n\n  <ul class=\"progressBarList\"></ul>\n  </div>\n  `;\r\n        this.barHTML = `<li class=\"downloadBar\">\n  <div class=\"progressBar progressBar2\">\n  <div class=\"progress progress2\"></div>\n  </div>\n  <div class=\"progressTip progressTip2\">\n  <span class=\"fileName\"></span>\n  <span class=\"loadedWrap\">\n  <span class=\"loaded\"></span>\n  </span>\n  </div>\n  </li>`;\r\n        this.allProgressBar = [];\r\n        this.KB = 1024;\r\n        this.MB = 1024 * 1024;\r\n        this.wrap = Tools.useSlot('progressBar', this.wrapHTML);\r\n        this.downloadedEl = this.wrap.querySelector('.downloaded');\r\n        this.progressColorEl = this.wrap.querySelector('.progress1');\r\n        this.listWrap = this.wrap.querySelector('.progressBarList');\r\n        this.totalNumberEl = this.wrap.querySelector('.totalNumber');\r\n    }\r\n    // \r\n    reset(progressBarNum, downloaded = 0) {\r\n        if (progressBarNum === 0) {\r\n            //  0\r\n            return this.hide();\r\n        }\r\n        // \r\n        this.setTotalProgress(downloaded);\r\n        this.totalNumberEl.textContent = store.result.length.toString();\r\n        // \r\n        this.listWrap.innerHTML = this.barHTML.repeat(progressBarNum);\r\n        this.show();\r\n        // \r\n        const allProgressBar = this.listWrap.querySelectorAll('.downloadBar');\r\n        this.allProgressBar = [];\r\n        for (const bar of allProgressBar) {\r\n            const data = {\r\n                name: bar.querySelector('.fileName'),\r\n                loaded: bar.querySelector('.loaded'),\r\n                progress: bar.querySelector('.progress'),\r\n            };\r\n            this.allProgressBar.push(data);\r\n        }\r\n    }\r\n    // \r\n    setTotalProgress(downloaded) {\r\n        this.downloadedEl.textContent = downloaded.toString();\r\n        const progress = (downloaded / store.result.length) * 100;\r\n        this.progressColorEl.style.width = progress + '%';\r\n    }\r\n    // \r\n    setProgress(index, data) {\r\n        const bar = this.allProgressBar[index];\r\n        if (!bar) {\r\n            console.error(index, this.allProgressBar);\r\n            return;\r\n        }\r\n        bar.name.textContent = data.name;\r\n        let text = '';\r\n        if (data.total >= this.MB) {\r\n            //  || data.total === 0\r\n            //  MiB\r\n            //  MiB \r\n            text = `${(data.loaded / this.MB).toFixed(1)}/${(data.total / this.MB).toFixed(1)} MiB`;\r\n        }\r\n        else {\r\n            //  KiB \r\n            text = `${Math.floor(data.loaded / this.KB)}/${Math.floor(data.total / this.KB)} KiB`;\r\n        }\r\n        bar.loaded.textContent = text;\r\n        const progress = data.loaded / data.total || 0; //  NaN  0\r\n        bar.progress.style.width = progress * 100 + '%';\r\n    }\r\n    // \r\n    errorColor(index, show) {\r\n        const bar = this.allProgressBar[index];\r\n        if (!bar) {\r\n            console.error(index, this.allProgressBar);\r\n            return;\r\n        }\r\n        bar.name.classList[show ? 'add' : 'remove']('downloadError');\r\n    }\r\n    show() {\r\n        this.wrap.style.display = 'block';\r\n    }\r\n    hide() {\r\n        this.wrap.style.display = 'none';\r\n    }\r\n}\r\nconst progressBar = new ProgressBar();\r\nexport { progressBar };\r\n","import { EVT } from '../EVT';\r\nimport { log } from '../Log';\r\nimport { lang } from '../Lang';\r\nimport { store } from '../store/Store';\r\nimport { states } from '../store/States';\r\nimport { downloadStates } from './DownloadStates';\r\nimport { IndexedDB } from '../utils/IndexedDB';\r\nimport { msgBox } from '../MsgBox';\r\nimport { Utils } from '../utils/Utils';\r\n// \r\nclass Resume {\r\n    constructor() {\r\n        this.flag = false; // \r\n        this.DBName = 'PBD';\r\n        this.DBVer = 3;\r\n        this.metaName = 'taskMeta'; // \r\n        this.dataName = 'taskData'; // \r\n        this.statesName = 'taskStates'; // \r\n        this.part = []; // \r\n        this.try = 0; // \r\n        // \r\n        // \r\n        //  1/2 100 w  100 w50 w25 w12.5 w  4  onceMax\r\n        // \r\n        this.onceMax = 150000;\r\n        this.putStatesTime = 2000; // \r\n        this.needPutStates = false; // \r\n        this.IDB = new IndexedDB();\r\n        this.init();\r\n    }\r\n    async init() {\r\n        if (!Utils.isPixiv()) {\r\n            return;\r\n        }\r\n        await this.initDB();\r\n        this.restoreData();\r\n        this.bindEvents();\r\n        this.regularPutStates();\r\n        this.clearExired();\r\n    }\r\n    // \r\n    async initDB() {\r\n        // \r\n        const onUpdate = (db) => {\r\n            if (!db.objectStoreNames.contains(this.metaName)) {\r\n                const metaStore = db.createObjectStore(this.metaName, {\r\n                    keyPath: 'id',\r\n                });\r\n                metaStore.createIndex('id', 'id', { unique: true });\r\n                metaStore.createIndex('url', 'url', { unique: true });\r\n            }\r\n            if (!db.objectStoreNames.contains(this.dataName)) {\r\n                const dataStore = db.createObjectStore(this.dataName, {\r\n                    keyPath: 'id',\r\n                });\r\n                dataStore.createIndex('id', 'id', { unique: true });\r\n            }\r\n            if (!db.objectStoreNames.contains(this.statesName)) {\r\n                const statesStore = db.createObjectStore(this.statesName, {\r\n                    keyPath: 'id',\r\n                });\r\n                statesStore.createIndex('id', 'id', { unique: true });\r\n            }\r\n        };\r\n        // \r\n        return new Promise(async (resolve, reject) => {\r\n            resolve(await this.IDB.open(this.DBName, this.DBVer, onUpdate));\r\n        });\r\n    }\r\n    // \r\n    async restoreData() {\r\n        // \r\n        if (states.busy) {\r\n            return;\r\n        }\r\n        // 1 \r\n        const meta = (await this.IDB.get(this.metaName, this.getURL(), 'url'));\r\n        if (!meta) {\r\n            this.flag = false;\r\n            return;\r\n        }\r\n        log.warning(lang.transl('_'));\r\n        this.taskId = meta.id;\r\n        // 2 \r\n        //  id \r\n        const dataIdList = this.createIdList(meta.id, meta.part);\r\n        // \r\n        const promiseList = [];\r\n        for (const id of dataIdList) {\r\n            promiseList.push(this.IDB.get(this.dataName, id));\r\n        }\r\n        await Promise.all(promiseList).then((res) => {\r\n            //  store.addResult\r\n            //  store.result\r\n            store.result = [];\r\n            const r = res;\r\n            for (const taskData of r) {\r\n                for (const data of taskData.data) {\r\n                    store.result.push(data);\r\n                }\r\n            }\r\n        });\r\n        // 3 \r\n        const data = (await this.IDB.get(this.statesName, this.taskId));\r\n        if (data) {\r\n            downloadStates.replace(data.states);\r\n        }\r\n        store.crawlCompleteTime = meta.date;\r\n        // \r\n        this.flag = true;\r\n        log.success(lang.transl('_'), 2);\r\n        // \r\n        EVT.fire('resume');\r\n    }\r\n    bindEvents() {\r\n        // \r\n        const evs = [EVT.list.crawlFinish, EVT.list.resultChange];\r\n        for (const ev of evs) {\r\n            window.addEventListener(ev, async () => {\r\n                // \r\n                const taskData = (await this.IDB.get(this.metaName, this.getURL(), 'url'));\r\n                if (taskData) {\r\n                    await this.IDB.delete(this.metaName, taskData.id);\r\n                    await this.IDB.delete(this.statesName, taskData.id);\r\n                }\r\n                // \r\n                // \r\n                if (downloadStates.downloadedCount() === store.result.length) {\r\n                    return;\r\n                }\r\n                log.warning(lang.transl('_'));\r\n                this.taskId = new Date().getTime();\r\n                this.part = [];\r\n                await this.saveTaskData();\r\n                //  meta \r\n                const metaData = {\r\n                    id: this.taskId,\r\n                    url: this.getURL(),\r\n                    part: this.part.length,\r\n                    date: store.crawlCompleteTime,\r\n                };\r\n                this.IDB.add(this.metaName, metaData);\r\n                //  states \r\n                const statesData = {\r\n                    id: this.taskId,\r\n                    states: downloadStates.states,\r\n                };\r\n                this.IDB.add(this.statesName, statesData);\r\n                log.success(lang.transl('_'), 2);\r\n            });\r\n        }\r\n        // \r\n        window.addEventListener(EVT.list.downloadSuccess, () => {\r\n            this.needPutStates = true;\r\n        });\r\n        // \r\n        const clearDataEv = [EVT.list.downloadComplete, EVT.list.downloadStop];\r\n        for (const ev of clearDataEv) {\r\n            window.addEventListener(ev, async () => {\r\n                if (!this.taskId) {\r\n                    return;\r\n                }\r\n                const meta = (await this.IDB.get(this.metaName, this.taskId));\r\n                if (!meta) {\r\n                    return;\r\n                }\r\n                this.IDB.delete(this.metaName, this.taskId);\r\n                this.IDB.delete(this.statesName, this.taskId);\r\n                const dataIdList = this.createIdList(this.taskId, meta.part);\r\n                for (const id of dataIdList) {\r\n                    this.IDB.delete(this.dataName, id);\r\n                }\r\n                this.flag = false;\r\n            });\r\n        }\r\n        // \r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            this.flag = false;\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.pageSwitch, () => {\r\n            this.flag = false;\r\n            this.restoreData();\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.clearSavedCrawl, () => {\r\n            this.flag = false;\r\n            this.clearSavedCrawl();\r\n        });\r\n    }\r\n    //  put \r\n    async regularPutStates() {\r\n        setInterval(() => {\r\n            if (this.needPutStates) {\r\n                const statesData = {\r\n                    id: this.taskId,\r\n                    states: downloadStates.states,\r\n                };\r\n                this.needPutStates = false;\r\n                // \r\n                if (downloadStates.downloadedCount() === store.result.length) {\r\n                    return;\r\n                }\r\n                this.IDB.put(this.statesName, statesData);\r\n            }\r\n        }, this.putStatesTime);\r\n    }\r\n    // \r\n    async saveTaskData() {\r\n        return new Promise(async (resolve, reject) => {\r\n            // (0.5  0  1)\r\n            // \r\n            // \r\n            let tryNum = Math.floor(store.result.length * Math.pow(0.5, this.try));\r\n            // \r\n            tryNum > this.onceMax && (tryNum = this.onceMax);\r\n            let data = {\r\n                id: this.numAppendNum(this.taskId, this.part.length),\r\n                data: store.result.slice(this.getPartTotal(), this.getPartTotal() + tryNum),\r\n            };\r\n            try {\r\n                // \r\n                await this.IDB.add(this.dataName, data);\r\n                this.part.push(data.data.length); // \r\n                this.try = 0; // \r\n                // \r\n                if (this.getPartTotal() >= store.result.length) {\r\n                    resolve(true);\r\n                }\r\n                else {\r\n                    // \r\n                    resolve(this.saveTaskData());\r\n                }\r\n            }\r\n            catch (error) {\r\n                // \r\n                console.error(error);\r\n                if (error.target && error.target.error && error.target.error.message) {\r\n                    const msg = error.target.error.message;\r\n                    if (msg.includes('too large')) {\r\n                        // \r\n                        //  + 1 \r\n                        this.try++;\r\n                        resolve(this.saveTaskData());\r\n                    }\r\n                    else {\r\n                        // \r\n                        this.try = 0;\r\n                        log.error('IndexedDB: ' + msg);\r\n                        reject(error);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    // \r\n    async clearExired() {\r\n        //  30 30*24*60*60*1000\r\n        const expiryTime = 2592000000;\r\n        const nowTime = new Date().getTime();\r\n        const callback = (item) => {\r\n            if (item) {\r\n                const data = item.value;\r\n                // \r\n                if (nowTime - data.id > expiryTime) {\r\n                    this.IDB.delete(this.metaName, data.id);\r\n                    this.IDB.delete(this.statesName, data.id);\r\n                    const dataIdList = this.createIdList(data.id, data.part);\r\n                    for (const id of dataIdList) {\r\n                        this.IDB.delete(this.dataName, id);\r\n                    }\r\n                }\r\n                item.continue();\r\n            }\r\n        };\r\n        this.IDB.openCursor(this.metaName, callback);\r\n    }\r\n    //  part \r\n    getPartTotal() {\r\n        if (this.part.length === 0) {\r\n            return 0;\r\n        }\r\n        return this.part.reduce((prev, curr) => {\r\n            return prev + curr;\r\n        });\r\n    }\r\n    //  url\r\n    getURL() {\r\n        return window.location.href.split('#')[0];\r\n    }\r\n    // \r\n    //  task id  (part)\r\n    numAppendNum(id, num) {\r\n        return parseInt(id.toString() + num);\r\n    }\r\n    //  taskMeta  id  part  taskData  id \r\n    createIdList(taskid, part) {\r\n        // part  1  0 \r\n        //  id  0 \r\n        const arr = [];\r\n        let start = 0;\r\n        while (start < part) {\r\n            arr.push(this.numAppendNum(taskid, start));\r\n            start++;\r\n        }\r\n        return arr;\r\n    }\r\n    // \r\n    async clearSavedCrawl() {\r\n        await Promise.all([\r\n            this.IDB.clear(this.metaName),\r\n            this.IDB.clear(this.dataName),\r\n            this.IDB.clear(this.statesName),\r\n        ]);\r\n        msgBox.success(lang.transl('_'));\r\n    }\r\n}\r\nconst resume = new Resume();\r\nexport { resume };\r\n","import { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\n// \r\nclass ShowConvertCount {\r\n    constructor(el) {\r\n        this.el = el;\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.convertChange, (ev) => {\r\n            const count = ev.detail.data;\r\n            let convertText = '';\r\n            if (count > 0) {\r\n                convertText = lang.transl('_', count.toString());\r\n            }\r\n            this.el.textContent = convertText;\r\n        });\r\n    }\r\n}\r\nexport { ShowConvertCount };\r\n","import { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\n// \r\nclass ShowSkipCount {\r\n    constructor(el) {\r\n        this.count = 0; // \r\n        this.el = el;\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            this.reset();\r\n        });\r\n        window.addEventListener(EVT.list.downloadStop, () => {\r\n            // \r\n            this.count = 0;\r\n        });\r\n        window.addEventListener(EVT.list.skipDownload, () => {\r\n            this.addCount();\r\n        });\r\n        window.addEventListener(EVT.list.downloadStart, () => {\r\n            if (this.count === 0) {\r\n                this.reset();\r\n            }\r\n        });\r\n        window.addEventListener(EVT.list.downloadComplete, () => {\r\n            // \r\n            this.count = 0;\r\n        });\r\n    }\r\n    addCount() {\r\n        this.count++;\r\n        this.el.textContent = lang.transl('_n', this.count.toString());\r\n    }\r\n    reset() {\r\n        this.count = 0;\r\n        this.el.textContent = '';\r\n    }\r\n}\r\nexport { ShowSkipCount };\r\n","import { pageType } from '../PageType';\r\nimport { EVT } from '../EVT';\r\n/**\r\n \r\n \r\n \r\n \r\n \r\n \r\n \r\n*/\r\nvar Flags;\r\n(function (Flags) {\r\n    Flags[\"crawling\"] = \"\\u2191\";\r\n    Flags[\"waiting\"] = \"\\u2192\";\r\n    Flags[\"readyDownload\"] = \"\\u25B6\";\r\n    Flags[\"downloading\"] = \"\\u2193\";\r\n    Flags[\"paused\"] = \"\\u2551\";\r\n    Flags[\"stopped\"] = \"\\u25A0\";\r\n    Flags[\"completed\"] = \"\\u2713\";\r\n    Flags[\"space\"] = \" \";\r\n})(Flags || (Flags = {}));\r\n// \r\nclass showStatusOnTitle {\r\n    constructor() {\r\n        this.timer = 0; // title \r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            this.set(Flags.crawling);\r\n        });\r\n        window.addEventListener(EVT.list.worksUpdate, () => {\r\n            this.set(Flags.waiting);\r\n        });\r\n        for (const ev of [\r\n            EVT.list.crawlFinish,\r\n            EVT.list.resultChange,\r\n            EVT.list.resume,\r\n        ]) {\r\n            window.addEventListener(ev, () => {\r\n                this.set(Flags.readyDownload);\r\n            });\r\n        }\r\n        window.addEventListener(EVT.list.downloadStart, () => {\r\n            this.set(Flags.downloading);\r\n        });\r\n        window.addEventListener(EVT.list.downloadComplete, () => {\r\n            this.set(Flags.completed);\r\n        });\r\n        window.addEventListener(EVT.list.downloadPause, () => {\r\n            this.set(Flags.paused);\r\n        });\r\n        window.addEventListener(EVT.list.downloadStop, () => {\r\n            this.set(Flags.stopped);\r\n        });\r\n        window.addEventListener(EVT.list.crawlEmpty, () => {\r\n            this.reset();\r\n        });\r\n    }\r\n    // \r\n    includeFlag(flag) {\r\n        if (!flag) {\r\n            // \r\n            for (const value of Object.values(Flags)) {\r\n                const str = `[${value}]`;\r\n                if (document.title.includes(str)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // \r\n            const str = `[${flag}]`;\r\n            return document.title.includes(str);\r\n        }\r\n        return false;\r\n    }\r\n    //  title\r\n    reset() {\r\n        clearInterval(this.timer);\r\n        const metaTagPage = [\r\n            pageType.list.Artwork,\r\n            pageType.list.UserHome,\r\n            pageType.list.Novel,\r\n        ];\r\n        //  og:title og:title  og:title \r\n        if (metaTagPage.includes(pageType.type)) {\r\n            const ogTitle = document.querySelector('meta[property=\"og:title\"]');\r\n            if (ogTitle) {\r\n                document.title = ogTitle.content;\r\n                return;\r\n            }\r\n        }\r\n        //  title \r\n        const index = document.title.indexOf(']');\r\n        document.title = document.title.substr(index + 1, document.title.length);\r\n    }\r\n    // \r\n    set(flag) {\r\n        const str = `[${flag}]`;\r\n        //  title \r\n        if (!this.includeFlag()) {\r\n            document.title = `${str} ${document.title}`;\r\n        }\r\n        else {\r\n            // \r\n            document.title = document.title.replace(/\\[.?\\]/, str);\r\n        }\r\n        // \r\n        if (flag === Flags.readyDownload || flag === Flags.waiting) {\r\n            this.flashing(flag);\r\n        }\r\n        else {\r\n            clearInterval(this.timer);\r\n        }\r\n    }\r\n    // \r\n    flashing(flag) {\r\n        clearInterval(this.timer);\r\n        const str = `[${flag}]`;\r\n        const whiteSpace = `[${Flags.space}]`;\r\n        this.timer = window.setInterval(() => {\r\n            if (this.includeFlag(flag)) {\r\n                // \r\n                document.title = document.title.replace(str, whiteSpace);\r\n            }\r\n            else {\r\n                if (this.includeFlag(Flags.space)) {\r\n                    // \r\n                    document.title = document.title.replace(whiteSpace, str);\r\n                }\r\n                else {\r\n                    // \r\n                    clearInterval(this.timer);\r\n                }\r\n            }\r\n        }, 500);\r\n    }\r\n}\r\nnew showStatusOnTitle();\r\n","import { Utils } from '../utils/Utils';\r\n// \r\n//  rgb \r\nclass BlackAndWhiteImage {\r\n    constructor() {\r\n        this.latitude = 1; // \r\n    }\r\n    async check(imgUrl) {\r\n        const img = await this.loadImg(imgUrl).catch((error) => {\r\n            console.error(error);\r\n        });\r\n        // \r\n        if (!img) {\r\n            return false;\r\n        }\r\n        const first = this.getResult(this.getColor(img));\r\n        return first;\r\n        // \r\n        // \r\n    }\r\n    // \r\n    async loadImg(url) {\r\n        return new Promise(async (resolve, reject) => {\r\n            //  blobURL \r\n            if (url.startsWith('blob')) {\r\n                resolve(Utils.loadImg(url));\r\n            }\r\n            else {\r\n                const res = await fetch(url).catch((error) => {\r\n                    console.log(error);\r\n                    console.log(`Load image error! url: ${url}`);\r\n                });\r\n                if (!res) {\r\n                    return;\r\n                }\r\n                const blob = await res.blob();\r\n                const blobURL = URL.createObjectURL(blob);\r\n                resolve(Utils.loadImg(blobURL));\r\n            }\r\n        });\r\n    }\r\n    //  rgb \r\n    getColor(img) {\r\n        const width = img.width;\r\n        const height = img.height;\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        const con = canvas.getContext('2d');\r\n        con.drawImage(img, 0, 0);\r\n        const imageData = con.getImageData(0, 0, width, height);\r\n        const data = imageData.data;\r\n        let r = 0;\r\n        let g = 0;\r\n        let b = 0;\r\n        // \r\n        for (let row = 0; row < height; row++) {\r\n            for (let col = 0; col < width; col++) {\r\n                r += data[(width * row + col) * 4];\r\n                g += data[(width * row + col) * 4 + 1];\r\n                b += data[(width * row + col) * 4 + 2];\r\n            }\r\n        }\r\n        // \r\n        r /= width * height;\r\n        g /= width * height;\r\n        b /= width * height;\r\n        // \r\n        r = Math.round(r);\r\n        g = Math.round(g);\r\n        b = Math.round(b);\r\n        return [r, g, b];\r\n    }\r\n    //  rgb \r\n    getResult(rgb) {\r\n        const [r, g, b] = rgb;\r\n        //  rgb \r\n        if (r === g && g === b) {\r\n            return true;\r\n        }\r\n        else {\r\n            //  rgb \r\n            //  rgb  rgb  1\r\n            const max = Math.max(r, g, b); //  rgb \r\n            const min = max - this.latitude; // \r\n            //  rgb \r\n            return [r, g, b].every((number) => {\r\n                return number >= min;\r\n            });\r\n        }\r\n    }\r\n}\r\nconst blackAndWhiteImage = new BlackAndWhiteImage();\r\nexport { blackAndWhiteImage };\r\n","import { Tools } from '../Tools';\r\nimport { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\nimport { Utils } from '../utils/Utils';\r\nimport { settings, setSetting, } from '../setting/Settings';\r\nimport { API } from '../API';\r\nimport { theme } from '../Theme';\r\nimport { toast } from '../Toast';\r\nimport { msgBox } from '../MsgBox';\r\n//  tag\r\nclass BlockTagsForSpecificUser {\r\n    constructor() {\r\n        this.rules = [];\r\n        this._addWrapShow = false;\r\n        this.wrapHTML = `\n  <div class=\"blockTagsForSpecificUserWrap\">\n\n    <div class=\"controlBar\">\n      <button type=\"button\" class=\"textButton expand\">${lang.transl('_')}</button>\n      <span class=\"total\">0</span>\n      <button type=\"button\" class=\"textButton showAdd\">${lang.transl('_')}</button>\n    </div>\n\n    <div class=\"addWrap\">\n      <div class=\"settingItem addInputWrap\" >\n        <div class=\"inputItem uid\">\n          <span class=\"label uidLabel\">${lang.transl('_id')}</span>\n          <input type=\"text\" class=\"setinput_style1 blue addUidInput\" placeholder=\"${lang.transl('_')}\" />\n        </div>\n\n        <div class=\"inputItem tags\">\n          <span class=\"label tagsLabel\">Tags</span>\n          <input type=\"text\" class=\"setinput_style1 blue addTagsInput\" placeholder=\"${lang.transl('_tag')}\" />\n        </div>\n\n        <div class=\"btns\">\n          <button type=\"button\" class=\"textButton add\" title=\"${lang.transl('_')}\">\n            <svg class=\"icon\" aria-hidden=\"true\">\n              <use xlink:href=\"#icon-wanchengqueding\"></use>\n            </svg>\n          </button>\n\n          \n          <button type=\"button\" class=\"textButton cancel\" title=\"${lang.transl('_')}\">\n            <svg class=\"icon\" aria-hidden=\"true\">\n              <use xlink:href=\"#icon-guanbiquxiao\"></use>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"listWrap\">\n    </div>\n  </div>\n  `;\r\n        this.getRule();\r\n        this.createWrap();\r\n        this.createAllList();\r\n        theme.register(this.wrap);\r\n        this.listWrapShow = this.listWrapShow;\r\n        this.updateWrapDisplay();\r\n        this.showTotal();\r\n        this.bindEvents();\r\n    }\r\n    set addWrapShow(val) {\r\n        this._addWrapShow = val;\r\n        this.addWrap.style.display = val ? 'block' : 'none';\r\n        if (!val) {\r\n            this.addInputUid.value = '';\r\n            this.addInputTags.value = '';\r\n        }\r\n    }\r\n    get addWrapShow() {\r\n        return this._addWrapShow;\r\n    }\r\n    set listWrapShow(val) {\r\n        setSetting('blockTagsForSpecificUserShowList', val);\r\n        this.listWrap.style.display = val ? 'block' : 'none';\r\n        this.expandBtn.textContent = val\r\n            ? lang.transl('_')\r\n            : lang.transl('_');\r\n    }\r\n    get listWrapShow() {\r\n        return settings.blockTagsForSpecificUserShowList;\r\n    }\r\n    // html\r\n    createWrap() {\r\n        this.wrap = Tools.useSlot('blockTagsForSpecificUser', this.wrapHTML);\r\n        this.expandBtn = this.wrap.querySelector('.expand');\r\n        this.showAddBtn = this.wrap.querySelector('.showAdd');\r\n        this.totalSpan = this.wrap.querySelector('.total');\r\n        this.addWrap = this.wrap.querySelector('.addWrap');\r\n        this.addInputUid = this.wrap.querySelector('.addUidInput');\r\n        this.addInputTags = this.wrap.querySelector('.addTagsInput');\r\n        this.addBtn = this.wrap.querySelector('.add');\r\n        this.cancelBtn = this.wrap.querySelector('.cancel');\r\n        this.listWrap = this.wrap.querySelector('.listWrap');\r\n        // /\r\n        this.expandBtn.addEventListener('click', () => {\r\n            this.listWrapShow = !this.listWrapShow;\r\n            if (this.listWrapShow && this.rules.length === 0) {\r\n                toast.error(lang.transl('_'));\r\n            }\r\n        });\r\n        // \r\n        this.showAddBtn.addEventListener('click', () => {\r\n            this.addWrapShow = !this.addWrapShow;\r\n            if (this.addWrapShow) {\r\n                this.addInputUid.focus();\r\n            }\r\n        });\r\n        // \r\n        this.addBtn.addEventListener('click', () => {\r\n            this.addRule(this.addInputUid.value, this.addInputTags.value);\r\n        });\r\n        // \r\n        this.cancelBtn.addEventListener('click', () => {\r\n            this.addWrapShow = false;\r\n        });\r\n    }\r\n    //  html\r\n    createAllList() {\r\n        for (const data of this.rules) {\r\n            this.createList(data);\r\n        }\r\n    }\r\n    // \r\n    createList(data) {\r\n        const { uid, user, tags } = data;\r\n        const html = `\n    <div class=\"settingItem\" data-key=\"${uid}\">\n      <div class=\"inputItem uid\">\n        <span class=\"label uidLabel\">${lang.transl('_id')}</span>\n        <input type=\"text\" class=\"setinput_style1 blue\" data-uidInput=\"${uid}\" value=\"${uid}\" />\n      </div>\n\n      <div class=\"inputItem tags\">\n        <span class=\"label tagsLabel\">Tags</span>\n        <input type=\"text\" class=\"setinput_style1 blue\" data-tagsInput=\"${uid}\" value=\"${tags.toString()}\" />\n      </div>\n\n      <div class=\"btns\">\n\n        <button type=\"button\" class=\"textButton\" data-updateRule=\"${uid}\" title=\"${lang.transl('_')}\">\n          <svg class=\"icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#icon-gengxin\"></use>\n          </svg>\n        </button>\n\n        <button type=\"button\" class=\"textButton\" data-deleteRule=\"${uid}\" title=\"${lang.transl('_')}\">\n          <svg class=\"icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#icon-shanchu1\"></use>\n          </svg>\n        </button>\n      </div>\n    </div>`;\r\n        // \r\n        this.listWrap.insertAdjacentHTML('afterbegin', html);\r\n        const uidLabel = this.listWrap.querySelector('.uidLabel');\r\n        if (user) {\r\n            uidLabel.textContent = user;\r\n        }\r\n        else {\r\n            this.updateUserName(data);\r\n        }\r\n        const updateRule = this.listWrap.querySelector(`button[data-updateRule='${uid}']`);\r\n        const deleteRule = this.listWrap.querySelector(`button[data-deleteRule='${uid}']`);\r\n        const uidInput = this.listWrap.querySelector(`input[data-uidInput='${uid}']`);\r\n        const tagsInput = this.listWrap.querySelector(`input[data-tagsInput='${uid}']`);\r\n        [uidInput, tagsInput].forEach((el) => {\r\n            el === null || el === void 0 ? void 0 : el.addEventListener('change', () => {\r\n                if (el.value) {\r\n                    this.updateRule(uid, uidInput.value, tagsInput.value, false);\r\n                }\r\n            });\r\n        });\r\n        // \r\n        updateRule === null || updateRule === void 0 ? void 0 : updateRule.addEventListener('click', () => {\r\n            this.updateRule(uid, uidInput.value, tagsInput.value);\r\n        });\r\n        // \r\n        deleteRule === null || deleteRule === void 0 ? void 0 : deleteRule.addEventListener('click', () => {\r\n            this.deleteRule(uid);\r\n        });\r\n    }\r\n    // \r\n    async updateUserName(data) {\r\n        const profile = await API.getUserProfile(data.uid.toString()).catch((err) => {\r\n            console.log(err);\r\n        });\r\n        if (profile && profile.body.name) {\r\n            const name = profile.body.name;\r\n            const index = this.findIndex(data.uid);\r\n            if (index > -1) {\r\n                this.rules[index].user = name;\r\n                setSetting('blockTagsForSpecificUserList', [...this.rules]);\r\n                // \r\n                const listElement = this.listWrap.querySelector(`.settingItem[data-key='${data.uid}']`);\r\n                if (listElement) {\r\n                    const label = listElement.querySelector('.uidLabel');\r\n                    label && (label.textContent = name);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // \r\n    checkValue(uidInput, tagsInput) {\r\n        const tags = Utils.string2array(tagsInput);\r\n        if (!uidInput || !tagsInput || tags.length === 0) {\r\n            msgBox.error(lang.transl('_'));\r\n            return false;\r\n        }\r\n        const uid = Number.parseInt(uidInput);\r\n        if (!uid || isNaN(uid)) {\r\n            msgBox.error(lang.transl('_ID'));\r\n            return false;\r\n        }\r\n        return {\r\n            uid,\r\n            tags,\r\n        };\r\n    }\r\n    findIndex(uid) {\r\n        return this.rules.findIndex((rule) => rule.uid === uid);\r\n    }\r\n    // \r\n    addRule(uidInput, tagsInput) {\r\n        const check = this.checkValue(uidInput, tagsInput);\r\n        if (!check) {\r\n            return;\r\n        }\r\n        const { uid, tags } = check;\r\n        // \r\n        const index = this.findIndex(uid);\r\n        if (index > -1) {\r\n            //  tag \r\n            const joinTags = this.rules[index].tags.concat(tags);\r\n            return this.updateRule(uid, uid.toString(), joinTags.toString());\r\n        }\r\n        this.rules.push(check);\r\n        setSetting('blockTagsForSpecificUserList', [...this.rules]);\r\n        this.createList({\r\n            uid,\r\n            tags,\r\n            user: '',\r\n        });\r\n        this.addWrapShow = false;\r\n        this.listWrapShow = true;\r\n        toast.success(lang.transl('_'));\r\n    }\r\n    // \r\n    // tip \r\n    updateRule(oldUid, uidInput, tagsInput, tip = true) {\r\n        const check = this.checkValue(uidInput, tagsInput);\r\n        if (!check) {\r\n            return;\r\n        }\r\n        const { uid, tags } = check;\r\n        const index = this.findIndex(oldUid);\r\n        this.rules[index] = check;\r\n        setSetting('blockTagsForSpecificUserList', [...this.rules]);\r\n        const listElement = this.listWrap.querySelector(`.settingItem[data-key='${oldUid}']`);\r\n        listElement === null || listElement === void 0 ? void 0 : listElement.remove();\r\n        this.createList({ uid, tags, user: '' });\r\n        if (tip) {\r\n            toast.success(lang.transl('_'));\r\n        }\r\n        this.addWrapShow = false;\r\n    }\r\n    // \r\n    deleteRule(uid) {\r\n        const index = this.findIndex(uid);\r\n        this.rules.splice(index, 1);\r\n        setSetting('blockTagsForSpecificUserList', [...this.rules]);\r\n        const listElement = this.listWrap.querySelector(`.settingItem[data-key='${uid}']`);\r\n        listElement === null || listElement === void 0 ? void 0 : listElement.remove();\r\n    }\r\n    getRule() {\r\n        this.rules = [...settings.blockTagsForSpecificUserList];\r\n    }\r\n    updateWrapDisplay() {\r\n        this.wrap.style.display = settings.blockTagsForSpecificUser\r\n            ? 'block'\r\n            : 'none';\r\n    }\r\n    showTotal() {\r\n        this.totalSpan.textContent = this.rules.length.toString();\r\n    }\r\n    bindEvents() {\r\n        // \r\n        window.addEventListener(EVT.list.settingChange, (ev) => {\r\n            const data = ev.detail.data;\r\n            if (data.name.includes('blockTagsForSpecificUser')) {\r\n                this.showTotal();\r\n                this.updateWrapDisplay();\r\n            }\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.resetSettingsEnd, () => {\r\n            this.getRule();\r\n            this.listWrap.innerHTML = '';\r\n            this.createAllList();\r\n            this.listWrapShow = this.listWrapShow;\r\n        });\r\n    }\r\n    //  true\r\n    check(uid, tags) {\r\n        if (typeof uid === 'string') {\r\n            uid = Number.parseInt(uid);\r\n        }\r\n        // \r\n        const index = this.findIndex(uid);\r\n        if (index === -1) {\r\n            return false;\r\n        }\r\n        //  tag\r\n        const rule = this.rules[index];\r\n        const tagsString = tags.toString().toLowerCase();\r\n        for (const tag of rule.tags) {\r\n            if (tagsString.includes(tag.toLowerCase())) {\r\n                return true;\r\n            }\r\n        }\r\n        //  tag\r\n        return false;\r\n    }\r\n}\r\nconst blockTagsForSpecificUser = new BlockTagsForSpecificUser();\r\nexport { blockTagsForSpecificUser };\r\n","import { lang } from '../Lang';\r\nimport { log } from '../Log';\r\nimport { EVT } from '../EVT';\r\nimport { states } from '../store/States';\r\nimport { settings } from '../setting/Settings';\r\nimport { blackAndWhiteImage } from './BlackandWhiteImage';\r\nimport { mute } from './Mute';\r\nimport { blockTagsForSpecificUser } from './BlockTagsForSpecificUser';\r\nimport { msgBox } from '../MsgBox';\r\n// \r\nclass Filter {\r\n    constructor() {\r\n        this.MiB = 1024 * 1024;\r\n        this.oneDayTime = 24 * 60 * 60 * 1000; // \r\n        this.bindEvents();\r\n    }\r\n    // \r\n    showTip() {\r\n        this.getDownType();\r\n        this.getDownTypeByAge();\r\n        this.getDownTypeByImgCount();\r\n        this.getDownTypeByColor();\r\n        this.getDownTypeByBmked();\r\n        this.getBMKNum();\r\n        this.getSetWh();\r\n        this.getRatio();\r\n        this.getIdRange();\r\n        this.getPostDate();\r\n        this.getIncludeTag();\r\n        this.getExcludeTag();\r\n        if (states.debut) {\r\n            log.warning(lang.transl('_Title'));\r\n        }\r\n        this.getBlockList();\r\n        this.getSize();\r\n    }\r\n    // \r\n    //  await \r\n    //  FilterOption \r\n    //  undefined \r\n    //  boolean true false \r\n    async check(option) {\r\n        // \r\n        if (!this.checkDownType(option.workType)) {\r\n            return false;\r\n        }\r\n        if (!this.checkDownTypeByAge(option.xRestrict)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkPageCount(option.workType, option.pageCount)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkDownTypeByBmked(option.bookmarkData)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkBMK(option.bookmarkCount, option.createDate)) {\r\n            return false;\r\n        }\r\n        //  tag\r\n        if (!this.checkExcludeTag(option.tags)) {\r\n            return false;\r\n        }\r\n        //  tag\r\n        if (!this.checkIncludeTag(option.tags)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkSetWh(option.width, option.height)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkRatio(option.width, option.height)) {\r\n            return false;\r\n        }\r\n        //  id \r\n        if (!this.checkIdRange(option.id)) {\r\n            return false;\r\n        }\r\n        //  Pixiv \r\n        if (!(await this.checkMuteUser(option.userId))) {\r\n            return false;\r\n        }\r\n        if (!(await this.checkMuteTag(option.tags))) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkBlockList(option.userId)) {\r\n            return false;\r\n        }\r\n        //  tags\r\n        if (!this.checkBlockTagsForSpecificUser(option.userId, option.tags)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkPostDate(option.createDate)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkDebut(option.yes_rank)) {\r\n            return false;\r\n        }\r\n        // \r\n        if (!this.checkSize(option.size)) {\r\n            return false;\r\n        }\r\n        // \r\n        // \r\n        if (!(await this.checkBlackWhite(option.mini))) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    // ---------------- get ----------------\r\n    // \r\n    getDownType() {\r\n        // \r\n        if (!settings.downType0 &&\r\n            !settings.downType1 &&\r\n            !settings.downType2 &&\r\n            !settings.downType3) {\r\n            this.showWarning(lang.transl('_'));\r\n        }\r\n        const tips = [];\r\n        !settings.downType0 && tips.push(lang.transl('_'));\r\n        !settings.downType1 && tips.push(lang.transl('_'));\r\n        !settings.downType2 && tips.push(lang.transl('_'));\r\n        !settings.downType3 && tips.push(lang.transl('_'));\r\n        if (tips.length > 0) {\r\n            log.warning(lang.transl('_') + tips.toString());\r\n        }\r\n    }\r\n    getDownTypeByAge() {\r\n        // \r\n        if (!settings.downAllAges && !settings.downR18 && !settings.downR18G) {\r\n            this.showWarning(lang.transl('_'));\r\n        }\r\n        const tips = [];\r\n        !settings.downAllAges && tips.push(lang.transl('_'));\r\n        !settings.downR18 && tips.push('R-18');\r\n        !settings.downR18G && tips.push('R-18G');\r\n        if (tips.length > 0) {\r\n            log.warning(lang.transl('_') + tips.toString());\r\n        }\r\n    }\r\n    getDownTypeByImgCount() {\r\n        const tips = [];\r\n        !settings.downSingleImg && tips.push(lang.transl('_'));\r\n        !settings.downMultiImg && tips.push(lang.transl('_'));\r\n        if (tips.length > 0) {\r\n            log.warning(lang.transl('_') + tips.toString());\r\n        }\r\n    }\r\n    // \r\n    getDownTypeByColor() {\r\n        // \r\n        if (!settings.downColorImg && !settings.downBlackWhiteImg) {\r\n            this.showWarning(lang.transl('_'));\r\n        }\r\n        const tips = [];\r\n        !settings.downColorImg && tips.push(lang.transl('_'));\r\n        !settings.downBlackWhiteImg && tips.push(lang.transl('_'));\r\n        if (tips.length > 0) {\r\n            log.warning(lang.transl('_') + tips.toString());\r\n        }\r\n    }\r\n    // \r\n    getDownTypeByBmked() {\r\n        // \r\n        if (!settings.downNotBookmarked && !settings.downBookmarked) {\r\n            this.showWarning(lang.transl('_'));\r\n        }\r\n        const tips = [];\r\n        !settings.downNotBookmarked && tips.push(lang.transl('_'));\r\n        !settings.downBookmarked && tips.push(lang.transl('_'));\r\n        if (tips.length > 0) {\r\n            log.warning(lang.transl('_') + tips.toString());\r\n        }\r\n    }\r\n    // tag\r\n    getIncludeTag() {\r\n        if (!settings.needTagSwitch) {\r\n            return;\r\n        }\r\n        if (settings.needTag.length > 0) {\r\n            log.warning(lang.transl('_tag') + settings.needTag.toString());\r\n        }\r\n    }\r\n    // tag\r\n    getExcludeTag() {\r\n        if (!settings.notNeedTagSwitch) {\r\n            return;\r\n        }\r\n        if (settings.notNeedTag.length > 0) {\r\n            log.warning(lang.transl('_tag') + settings.notNeedTag.toString());\r\n        }\r\n    }\r\n    // \r\n    getSetWh() {\r\n        if (!settings.setWHSwitch) {\r\n            return;\r\n        }\r\n        if (settings.setWidth || settings.setHeight) {\r\n            const andOr = settings.setWidthAndOr\r\n                .replace('|', lang.transl('_'))\r\n                .replace('&', lang.transl('_'));\r\n            const text = `${lang.transl('_')} ${settings.widthHeightLimit} ${settings.setWidth} ${andOr} ${lang.transl('_')} ${settings.widthHeightLimit} ${settings.setHeight}`;\r\n            log.warning(text);\r\n        }\r\n    }\r\n    // \r\n    getBMKNum() {\r\n        if (!settings.BMKNumSwitch) {\r\n            return;\r\n        }\r\n        const min = settings.BMKNumMin;\r\n        const max = settings.BMKNumMax;\r\n        const average = settings.BMKNumAverage;\r\n        if (min >= 0) {\r\n            log.warning(lang.transl('_') + min);\r\n        }\r\n        if (max >= 0) {\r\n            log.warning(lang.transl('_') + max);\r\n        }\r\n        if (average >= 0 && settings.BMKNumAverageSwitch) {\r\n            log.warning(`${lang.transl('_')} >= ${average}`);\r\n        }\r\n    }\r\n    // \r\n    getRatio() {\r\n        if (!settings.ratioSwitch) {\r\n            return '0';\r\n        }\r\n        let result = settings.ratio;\r\n        if (result === 'square') {\r\n            log.warning(lang.transl('_', lang.transl('_')));\r\n        }\r\n        else if (result === 'horizontal') {\r\n            log.warning(lang.transl('_', lang.transl('_')));\r\n        }\r\n        else if (result === 'vertical') {\r\n            log.warning(lang.transl('_', lang.transl('_')));\r\n        }\r\n        else if (result === 'userSet') {\r\n            // \r\n            log.warning(lang.transl('_') + settings.userRatio);\r\n        }\r\n        return result;\r\n    }\r\n    //  id \r\n    getIdRange() {\r\n        if (!settings.idRangeSwitch) {\r\n            return;\r\n        }\r\n        log.warning(`id ${settings.idRange} ${settings.idRangeInput}`);\r\n    }\r\n    // \r\n    getPostDate() {\r\n        if (!settings.postDate) {\r\n            return;\r\n        }\r\n        if (isNaN(settings.postDateStart) || isNaN(settings.postDateStart)) {\r\n            const msg = 'Date format error!';\r\n            this.showWarning(msg);\r\n        }\r\n        else {\r\n            const start = new Date(settings.postDateStart).toLocaleString();\r\n            const end = new Date(settings.postDateEnd).toLocaleString();\r\n            log.warning(`${lang.transl('_')}: ${start} - ${end}`);\r\n        }\r\n    }\r\n    // \r\n    getSize() {\r\n        if (!settings.sizeSwitch) {\r\n            return;\r\n        }\r\n        log.warning(`Size: ${settings.sizeMin}MiB - ${settings.sizeMax}MiB`);\r\n    }\r\n    getBlockList() {\r\n        if (!settings.userBlockList) {\r\n            return;\r\n        }\r\n        for (const uid of settings.blockList) {\r\n            if (isNaN(Number.parseInt(uid))) {\r\n                return this.showWarning(lang.transl('_ID'));\r\n            }\r\n        }\r\n        if (settings.blockList.length > 0) {\r\n            log.warning(lang.transl('_') + ': ' + settings.blockList.toString());\r\n        }\r\n    }\r\n    // ---------------- check ----------------\r\n    // \r\n    checkDownType(workType) {\r\n        switch (workType) {\r\n            case 0:\r\n                return settings.downType0;\r\n            case 1:\r\n                return settings.downType1;\r\n            case 2:\r\n                return settings.downType2;\r\n            case 3:\r\n                return settings.downType3;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n    checkDownTypeByAge(xRestrict) {\r\n        switch (xRestrict) {\r\n            case 0:\r\n                return settings.downAllAges;\r\n            case 1:\r\n                return settings.downR18;\r\n            case 2:\r\n                return settings.downR18G;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n    // \r\n    checkPageCount(workType, pageCount) {\r\n        if (workType === undefined || pageCount === undefined) {\r\n            return true;\r\n        }\r\n        // \r\n        if (workType === 2) {\r\n            pageCount = 1;\r\n        }\r\n        if (pageCount === 1) {\r\n            return settings.downSingleImg;\r\n        }\r\n        if (pageCount > 1) {\r\n            return settings.downMultiImg;\r\n        }\r\n        return false;\r\n    }\r\n    // \r\n    async checkBlackWhite(imgUrl) {\r\n        // \r\n        if (!imgUrl || (settings.downColorImg && settings.downBlackWhiteImg)) {\r\n            return true;\r\n        }\r\n        // result  truefalse \r\n        const result = await blackAndWhiteImage.check(imgUrl);\r\n        return ((result && settings.downBlackWhiteImg) ||\r\n            (!result && settings.downColorImg));\r\n    }\r\n    // \r\n    checkDownTypeByBmked(bookmarked) {\r\n        // \r\n        if (bookmarked === undefined) {\r\n            return true;\r\n        }\r\n        if (settings.downNotBookmarked && settings.downBookmarked) {\r\n            return true;\r\n        }\r\n        if (!settings.downNotBookmarked && settings.downBookmarked) {\r\n            // \r\n            return !!bookmarked;\r\n        }\r\n        else if (settings.downNotBookmarked && !settings.downBookmarked) {\r\n            // \r\n            return !bookmarked;\r\n        }\r\n        return false;\r\n    }\r\n    // \r\n    checkBMK(bmk, date) {\r\n        if (bmk === undefined || !settings.BMKNumSwitch) {\r\n            return true;\r\n        }\r\n        // \r\n        const checkNumber = bmk >= settings.BMKNumMin && bmk <= settings.BMKNumMax;\r\n        // \r\n        if (!settings.BMKNumAverageSwitch || date === undefined) {\r\n            return checkNumber;\r\n        }\r\n        // \r\n        const createTime = new Date(date).getTime();\r\n        const nowTime = new Date().getTime();\r\n        const day = (nowTime - createTime) / this.oneDayTime; // \r\n        const average = bmk / day;\r\n        const checkAverage = average >= settings.BMKNumAverage;\r\n        // \r\n        return checkNumber || checkAverage;\r\n    }\r\n    //  tag \r\n    checkIncludeTag(tags) {\r\n        if (!settings.needTagSwitch ||\r\n            settings.needTag.length === 0 ||\r\n            tags === undefined) {\r\n            return true;\r\n        }\r\n        let result = false;\r\n        //  tag \r\n        const needTags = settings.needTag.map((val) => {\r\n            return val.toLowerCase();\r\n        });\r\n        //  tag\r\n        if (needTags.length > 0) {\r\n            //  tag \r\n            // Fate/grandorder  Fate/GrandOrder  tag Set  id 51811780\r\n            const workTags = new Set();\r\n            for (const tag of tags) {\r\n                workTags.add(tag.toLowerCase());\r\n            }\r\n            // \r\n            if (settings.needTagMode === 'all') {\r\n                let tagNeedMatched = 0;\r\n                for (const tag of workTags) {\r\n                    for (const need of needTags) {\r\n                        if (tag === need) {\r\n                            tagNeedMatched++;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                // \r\n                if (tagNeedMatched >= needTags.length) {\r\n                    result = true;\r\n                }\r\n            }\r\n            else {\r\n                // \r\n                for (const tag of workTags.values()) {\r\n                    if (needTags.includes(tag)) {\r\n                        result = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            result = true;\r\n        }\r\n        return result;\r\n    }\r\n    //  tag , \r\n    checkExcludeTag(tags) {\r\n        if (!settings.notNeedTagSwitch ||\r\n            settings.notNeedTag.length === 0 ||\r\n            tags === undefined) {\r\n            return true;\r\n        }\r\n        let result = true;\r\n        const notNeedTags = settings.notNeedTag.map((val) => {\r\n            return val.toLowerCase();\r\n        });\r\n        //  tag\r\n        if (notNeedTags.length > 0) {\r\n            for (const tag of tags) {\r\n                for (const notNeed of notNeedTags) {\r\n                    if (tag.toLowerCase() === notNeed) {\r\n                        result = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    // \r\n    checkSetWh(width, height) {\r\n        if (!settings.setWHSwitch) {\r\n            return true;\r\n        }\r\n        // \r\n        if (width === undefined || height === undefined) {\r\n            return true;\r\n        }\r\n        const setWidth = settings.setWidth;\r\n        const setHeight = settings.setHeight;\r\n        // \r\n        if (setWidth === 0 && setHeight === 0) {\r\n            return true;\r\n        }\r\n        if (settings.widthHeightLimit === '>=') {\r\n            // \r\n            if (settings.setWidthAndOr === '&') {\r\n                return width >= setWidth && height >= setHeight;\r\n            }\r\n            else {\r\n                return width >= setWidth || height >= setHeight;\r\n            }\r\n        }\r\n        else if (settings.widthHeightLimit === '<=') {\r\n            // \r\n            if (settings.setWidthAndOr === '&') {\r\n                return width <= setWidth && height <= setHeight;\r\n            }\r\n            else {\r\n                return width <= setWidth || height <= setHeight;\r\n            }\r\n        }\r\n        else {\r\n            // \r\n            if (settings.setWidthAndOr === '&') {\r\n                return width === setWidth && height === setHeight;\r\n            }\r\n            else {\r\n                return width === setWidth || height === setHeight;\r\n            }\r\n        }\r\n    }\r\n    // \r\n    checkRatio(width, height) {\r\n        if (!settings.ratioSwitch) {\r\n            return true;\r\n        }\r\n        if (width === undefined || height === undefined) {\r\n            return true;\r\n        }\r\n        if (settings.ratio === 'square') {\r\n            return width === height;\r\n        }\r\n        else if (settings.ratio === 'horizontal') {\r\n            return width / height > 1;\r\n        }\r\n        else if (settings.ratio === 'vertical') {\r\n            return width / height < 1;\r\n        }\r\n        else {\r\n            return width / height >= settings.userRatio;\r\n        }\r\n    }\r\n    //  id \r\n    checkIdRange(id) {\r\n        if (id === undefined || !settings.idRangeSwitch) {\r\n            return true;\r\n        }\r\n        const setId = settings.idRangeInput;\r\n        let nowId;\r\n        if (typeof id !== 'number') {\r\n            nowId = parseInt(id);\r\n        }\r\n        else {\r\n            nowId = id;\r\n        }\r\n        if (settings.idRange === '>') {\r\n            return nowId > setId;\r\n        }\r\n        else {\r\n            return nowId < setId;\r\n        }\r\n    }\r\n    // \r\n    checkPostDate(date) {\r\n        if (!settings.postDate || date === undefined) {\r\n            return true;\r\n        }\r\n        const nowDate = new Date(date);\r\n        return (nowDate.getTime() >= settings.postDateStart &&\r\n            nowDate.getTime() <= settings.postDateEnd);\r\n    }\r\n    // \r\n    // yes_rank  0\r\n    checkDebut(yes_rank) {\r\n        if (!states.debut || yes_rank === undefined) {\r\n            return true;\r\n        }\r\n        return yes_rank === 0;\r\n    }\r\n    checkBlockList(userId) {\r\n        if (!settings.userBlockList || userId === undefined) {\r\n            return true;\r\n        }\r\n        //  id false \r\n        return !settings.blockList.includes(userId);\r\n    }\r\n    // \r\n    checkSize(size) {\r\n        if (!settings.sizeSwitch || size === undefined) {\r\n            return true;\r\n        }\r\n        return (size >= settings.sizeMin * this.MiB && size <= settings.sizeMax * this.MiB);\r\n    }\r\n    async checkMuteUser(userId) {\r\n        if (userId === undefined) {\r\n            return true;\r\n        }\r\n        return !(await mute.checkUser(userId));\r\n    }\r\n    async checkMuteTag(tags) {\r\n        if (tags === undefined) {\r\n            return true;\r\n        }\r\n        //  tag  mute \r\n        for (const tag of tags) {\r\n            if (await mute.checkTag(tag)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n        // return !(tags.some((mute.checkTag.bind(mute))))\r\n    }\r\n    checkBlockTagsForSpecificUser(userId, tags) {\r\n        if (!settings.blockTagsForSpecificUser ||\r\n            userId === undefined ||\r\n            tags === undefined) {\r\n            return true;\r\n        }\r\n        // \r\n        return !blockTagsForSpecificUser.check(userId, tags);\r\n    }\r\n    // \r\n    showWarning(msg) {\r\n        EVT.fire('wrongSetting');\r\n        msgBox.error(msg);\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            this.showTip();\r\n        });\r\n    }\r\n}\r\nconst filter = new Filter();\r\nexport { filter };\r\n","import { API } from '../API';\r\n//  Pixiv / tag\r\nclass Mute {\r\n    constructor() {\r\n        this.userList = [];\r\n        this.tagList = [];\r\n        this.got = false; // \r\n    }\r\n    /** user id  */\r\n    async checkUser(id) {\r\n        // \r\n        if (!this.got) {\r\n            await this.getMuteSettings();\r\n        }\r\n        if (typeof id === 'number') {\r\n            id = id.toString();\r\n        }\r\n        return this.userList.includes(id);\r\n    }\r\n    /** tag  */\r\n    async checkTag(tag) {\r\n        if (!this.got) {\r\n            await this.getMuteSettings();\r\n        }\r\n        return this.tagList.includes(tag);\r\n    }\r\n    // \r\n    //  check \r\n    // \r\n    async getMuteSettings() {\r\n        this.userList = [];\r\n        this.tagList = [];\r\n        const response = await API.getMuteSettings();\r\n        const items = response.body.mute_items;\r\n        for (const item of items) {\r\n            if (item.type === 'user') {\r\n                this.userList.push(item.value);\r\n            }\r\n            if (item.type === 'tag') {\r\n                this.tagList.push(item.value);\r\n            }\r\n        }\r\n        this.got = true;\r\n    }\r\n}\r\nconst mute = new Mute();\r\nexport { mute };\r\n","import { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\nimport { store } from '../store/Store';\r\nimport { Utils } from '../utils/Utils';\r\nimport { Config } from '../config/Config';\r\nimport { theme } from '../Theme';\r\nimport { toast } from '../Toast';\r\n// \r\nclass OutputPanel {\r\n    constructor() {\r\n        this.addOutPutPanel();\r\n        theme.register(this.outputPanel);\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        this.closeBtn.addEventListener('click', () => {\r\n            this.close();\r\n        });\r\n        this.outputPanel.addEventListener('click', (e) => {\r\n            const ev = e || window.event;\r\n            ev.stopPropagation();\r\n        });\r\n        document.addEventListener('click', () => {\r\n            if (this.outputPanel.style.display !== 'none') {\r\n                this.close();\r\n            }\r\n        });\r\n        window.addEventListener(EVT.list.closeCenterPanel, () => {\r\n            this.close();\r\n        });\r\n        // \r\n        this.copyBtn.addEventListener('click', () => {\r\n            const range = document.createRange();\r\n            range.selectNodeContents(this.outputContent);\r\n            window.getSelection().removeAllRanges();\r\n            window.getSelection().addRange(range);\r\n            document.execCommand('copy');\r\n            // \r\n            this.copyBtn.textContent = lang.transl('_');\r\n            setTimeout(() => {\r\n                window.getSelection().removeAllRanges();\r\n                this.copyBtn.textContent = lang.transl('_');\r\n            }, 1000);\r\n        });\r\n        window.addEventListener(EVT.list.output, (ev) => {\r\n            this.output(ev.detail.data);\r\n        });\r\n    }\r\n    addOutPutPanel() {\r\n        const html = `\n    <div class=\"outputWrap\">\n    <div class=\"outputClose\" title=\"${lang.transl('_')}\"></div>\n    <div class=\"outputTitle\">${lang.transl('_')}</div>\n    <div class=\"outputContent beautify_scrollbar\"></div>\n    <div class=\"outputFooter\">\n    <button class=\"outputCopy\" title=\"\">${lang.transl('_')}</button>\n    </div>\n    </div>\n    `;\r\n        document.body.insertAdjacentHTML('beforeend', html);\r\n        this.outputPanel = document.querySelector('.outputWrap');\r\n        this.outputTitle = this.outputPanel.querySelector('.outputTitle');\r\n        this.outputContent = this.outputPanel.querySelector('.outputContent');\r\n        this.copyBtn = this.outputPanel.querySelector('.outputCopy');\r\n        this.closeBtn = this.outputPanel.querySelector('.outputClose');\r\n    }\r\n    // \r\n    output(data) {\r\n        //  txt \r\n        if (store.result.length > Config.outputMax) {\r\n            const con = data.content.replace(/<br>/g, '\\n'); // \r\n            const file = new Blob([con], {\r\n                type: 'text/plain',\r\n            });\r\n            const url = URL.createObjectURL(file);\r\n            const fileName = new Date().toLocaleString() + '.txt';\r\n            Utils.downloadFile(url, fileName);\r\n            // \r\n            this.copyBtn.disabled = true;\r\n            data.content = lang.transl('_');\r\n        }\r\n        else {\r\n            this.copyBtn.disabled = false;\r\n        }\r\n        if (data.content) {\r\n            this.outputContent.innerHTML = data.content;\r\n            this.outputPanel.style.display = 'block';\r\n            this.outputTitle.textContent = data.title;\r\n        }\r\n        else {\r\n            return toast.error(lang.transl('_'));\r\n        }\r\n    }\r\n    // \r\n    close() {\r\n        this.outputPanel.style.display = 'none';\r\n        this.outputContent.innerHTML = '';\r\n    }\r\n}\r\nnew OutputPanel();\r\n","import { store } from '../store/Store';\r\nimport { EVT } from '../EVT';\r\nimport { fileName } from '../FileName';\r\nimport { lang } from '../Lang';\r\nimport { Config } from '../config/Config';\r\nimport { toast } from '../Toast';\r\n// \r\nclass PreviewFileName {\r\n    constructor() {\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.previewFileName, () => {\r\n            this.previewFileName();\r\n        });\r\n    }\r\n    previewFileName() {\r\n        if (store.result.length === 0) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        // \r\n        const resultArr = [];\r\n        const length = store.result.length;\r\n        for (let i = 0; i < length; i++) {\r\n            const data = store.result[i];\r\n            //  data.id\r\n            let nowResult = '';\r\n            let defaultName = '';\r\n            const fullName = fileName.getFileName(data);\r\n            if (data.type !== 3) {\r\n                //  url \r\n                defaultName = data.original.replace(/.*\\//, '');\r\n                nowResult = `${defaultName}: ${fullName}<br>`;\r\n            }\r\n            else {\r\n                // \r\n                nowResult = `${fullName}<br>`;\r\n            }\r\n            if (length < Config.outputMax) {\r\n                //  HTML \r\n                const defaultNameHtml = `<span class=\"color999\">${defaultName}</span>`;\r\n                const part = fullName.split('/');\r\n                const length = part.length;\r\n                for (let i = 0; i < length; i++) {\r\n                    const str = part[i];\r\n                    if (i < length - 1) {\r\n                        // \r\n                        part[i] = `<span class=\"color666\">${str}</span>`;\r\n                    }\r\n                    else {\r\n                        // \r\n                        part[i] = `<span class=\"color000\">${str}</span>`;\r\n                    }\r\n                }\r\n                const fullNameHtml = part.join('/');\r\n                if (defaultName) {\r\n                    nowResult = `<p class=\"result\">${defaultNameHtml}: ${fullNameHtml}</p>`;\r\n                }\r\n                else {\r\n                    nowResult = `<p class=\"result\">${fullNameHtml}</p>`;\r\n                }\r\n            }\r\n            // \r\n            resultArr.push(nowResult);\r\n        }\r\n        // \r\n        const result = resultArr.join('');\r\n        EVT.fire('output', {\r\n            content: result,\r\n            title: lang.transl('_'),\r\n        });\r\n    }\r\n}\r\nnew PreviewFileName();\r\n","import { store } from '../store/Store';\r\nimport { EVT } from '../EVT';\r\nimport { lang } from '../Lang';\r\nimport { settings } from '../setting/Settings';\r\nimport { toast } from '../Toast';\r\n//  url\r\nclass ShowURLs {\r\n    constructor() {\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.showURLs, () => {\r\n            this.showURLs();\r\n        });\r\n    }\r\n    showURLs() {\r\n        if (store.result.length === 0) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        const urls = [];\r\n        const size = settings.imageSize;\r\n        for (const result of store.result) {\r\n            urls.push(result[size]);\r\n        }\r\n        EVT.fire('output', {\r\n            content: urls.join('<br>'),\r\n            title: lang.transl('_url'),\r\n        });\r\n    }\r\n}\r\nnew ShowURLs();\r\n","import { API } from '../API';\r\nimport { lang } from '../Lang';\r\nimport { EVT } from '../EVT';\r\nimport { toast } from '../Toast';\r\nimport { Bookmark } from '../Bookmark';\r\nimport { Tools } from '../Tools';\r\nclass BookmarkAllWorks {\r\n    constructor(tipWrap) {\r\n        this.idList = [];\r\n        this.bookmarKData = [];\r\n        this.tipWrap = document.createElement('button');\r\n        if (tipWrap) {\r\n            this.tipWrap = tipWrap;\r\n        }\r\n    }\r\n    //  workList id\r\n    //  type url \r\n    //  type\r\n    sendWorkList(list, type) {\r\n        this.reset();\r\n        if (type === undefined) {\r\n            type = window.location.pathname.includes('/novel') ? 'novels' : 'illusts';\r\n        }\r\n        const regExp = type === 'illusts' ? /\\/artworks\\/(\\d*)/ : /\\?id=(\\d*)/;\r\n        for (const el of list) {\r\n            const a = el.querySelector('a');\r\n            if (a) {\r\n                // \"https://www.pixiv.net/artworks/82618568\"\r\n                // \"https://www.pixiv.net/novel/show.php?id=12350618\"\r\n                const test = regExp.exec(a.href);\r\n                if (test && test.length > 1) {\r\n                    this.idList.push({\r\n                        type,\r\n                        id: test[1],\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        this.startBookmark();\r\n    }\r\n    //  id \r\n    sendIdList(list) {\r\n        this.reset();\r\n        this.idList = list;\r\n        this.startBookmark();\r\n    }\r\n    reset() {\r\n        this.idList = [];\r\n        this.bookmarKData = [];\r\n    }\r\n    // \r\n    async startBookmark() {\r\n        if (this.idList.length === 0) {\r\n            toast.error(lang.transl('_'));\r\n            return;\r\n        }\r\n        this.tipWrap.textContent = `Checking`;\r\n        this.tipWrap.setAttribute('disabled', 'disabled');\r\n        await this.getTagData();\r\n        await this.addBookmarkAll();\r\n        this.complete();\r\n    }\r\n    //  tag \r\n    async getTagData() {\r\n        return new Promise(async (resolve) => {\r\n            for (const id of this.idList) {\r\n                this.tipWrap.textContent = `Get data ${this.bookmarKData.length} / ${this.idList.length}`;\r\n                let data;\r\n                if (id.type === 'novels') {\r\n                    data = await API.getNovelData(id.id);\r\n                }\r\n                else {\r\n                    data = await API.getArtworkData(id.id);\r\n                }\r\n                this.bookmarKData.push({\r\n                    type: id.type,\r\n                    id: data.body.id,\r\n                    tags: Tools.extractTags(data),\r\n                    restrict: false,\r\n                });\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    //  tag  tag\r\n    async addBookmarkAll() {\r\n        return new Promise(async (resolve) => {\r\n            let index = 0;\r\n            for (const data of this.bookmarKData) {\r\n                this.tipWrap.textContent = `Add bookmark ${index} / ${this.bookmarKData.length}`;\r\n                await Bookmark.add(data.id, data.type, data.tags);\r\n                index++;\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    complete() {\r\n        this.tipWrap.textContent = ` Complete`;\r\n        this.tipWrap.removeAttribute('disabled');\r\n        EVT.fire('bookmarkModeEnd');\r\n        toast.success(' Complete');\r\n    }\r\n}\r\nexport { BookmarkAllWorks };\r\n","import { API } from '../API';\r\nimport { Tools } from '../Tools';\r\nimport { token } from '../Token';\r\nimport { toast } from '../Toast';\r\n//  tag\r\nclass BookmarksAddTag {\r\n    constructor(btn) {\r\n        this.type = 'illusts'; // \r\n        this.addTagList = []; //  tag \r\n        this.addIndex = 0; //  tag \r\n        this.once = 100; // \r\n        this.btn = btn;\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        this.btn.addEventListener('click', () => {\r\n            // \r\n            this.addTagList = [];\r\n            this.addIndex = 0;\r\n            this.btn.setAttribute('disabled', 'disabled');\r\n            this.btn.textContent = `Checking`;\r\n            if (window.location.pathname.includes('/novel')) {\r\n                this.type = 'novels';\r\n            }\r\n            this.readyAddTag();\r\n        });\r\n    }\r\n    //  tagloop \r\n    async readyAddTag(loop = 0) {\r\n        const offset = loop * this.once; // \r\n        let errorFlag = false;\r\n        // \r\n        const [showData, hideData] = await Promise.all([\r\n            API.getBookmarkData(Tools.getUserId(), this.type, '', offset, false),\r\n            API.getBookmarkData(Tools.getUserId(), this.type, '', offset, true),\r\n        ]).catch((error) => {\r\n            if (error.status && error.status === 403) {\r\n                this.btn.textContent = ` Permission denied`;\r\n            }\r\n            errorFlag = true;\r\n            return [];\r\n        });\r\n        if (errorFlag) {\r\n            return;\r\n        }\r\n        // \r\n        for (const data of [showData, hideData]) {\r\n            const works = data.body.works;\r\n            //  bookmarkData \r\n            if (works.length > 0 && works[0].bookmarkData) {\r\n                works.forEach((work) => {\r\n                    this.addTagList.push({\r\n                        id: work.id,\r\n                        tags: work.tags,\r\n                        restrict: work.bookmarkData.private,\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        //  100  100  0  total \r\n        // \r\n        const total = offset + this.once;\r\n        if (total >= showData.body.total && total >= hideData.body.total) {\r\n            if (this.addTagList.length === 0) {\r\n                // \r\n                this.btn.textContent = ` No need`;\r\n                this.btn.removeAttribute('disabled');\r\n                return;\r\n            }\r\n            else {\r\n                //  tag\r\n                this.addTag();\r\n            }\r\n        }\r\n        else {\r\n            // \r\n            this.readyAddTag(++loop);\r\n        }\r\n    }\r\n    //  tag\r\n    async addTag() {\r\n        const item = this.addTagList[this.addIndex];\r\n        //  Bookmark.add  tags\r\n        await API.addBookmark(this.type, item.id, item.tags, item.restrict, token.token);\r\n        if (this.addIndex < this.addTagList.length - 1) {\r\n            this.addIndex++;\r\n            this.btn.textContent = `${this.addIndex} / ${this.addTagList.length}`;\r\n            // \r\n            return this.addTag();\r\n        }\r\n        else {\r\n            // \r\n            this.btn.textContent = ` Complete`;\r\n            this.btn.removeAttribute('disabled');\r\n            toast.success(' Complete');\r\n        }\r\n    }\r\n}\r\nexport { BookmarksAddTag };\r\n","// \r\nimport { log } from '../Log';\r\nimport { lang } from '../Lang';\r\nimport { Colors } from '../config/Colors';\r\nimport { Tools } from '../Tools';\r\nimport { states } from '../store/States';\r\nimport { EVT } from '../EVT';\r\nimport { msgBox } from '../MsgBox';\r\nimport { Utils } from '../utils/Utils';\r\nclass DeleteWorks {\r\n    constructor(worksSelectors) {\r\n        this.worksSelector = ''; // \r\n        this.multipleSelector = ''; // \r\n        this.ugoiraSelector = ''; // \r\n        this.delMode = false; // \r\n        this.delBtn = document.createElement('button');\r\n        this.iconId = 'deleteWorkEl';\r\n        this.left = 0;\r\n        this.top = 0;\r\n        this.half = 12;\r\n        this.deleteWorkCallback = () => { }; //  callback \r\n        this.worksSelector = worksSelectors;\r\n        this.icon = this.createDeleteIcon();\r\n        this.bindEvents();\r\n    }\r\n    createDeleteIcon() {\r\n        const el = document.createElement('div');\r\n        el.id = this.iconId;\r\n        document.body.appendChild(el);\r\n        return el;\r\n    }\r\n    updateDeleteIcon() {\r\n        if (!this.icon) {\r\n            return;\r\n        }\r\n        this.icon.style.display = this.delMode ? 'block' : 'none';\r\n        // \r\n        if (this.delMode) {\r\n            this.icon.style.left = this.left - this.half + 'px';\r\n            this.icon.style.top = this.top - this.half + 'px';\r\n        }\r\n    }\r\n    bindEvents() {\r\n        // \r\n        window.addEventListener(EVT.list.worksUpdate, () => {\r\n            if (this.delMode) {\r\n                this.bindDeleteEvent();\r\n            }\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.pageSwitch, () => {\r\n            if (this.delMode) {\r\n                this.toggleDeleteMode();\r\n            }\r\n        });\r\n        // \r\n        window.addEventListener('mousemove', (ev) => {\r\n            this.moveEvent(ev);\r\n        }, true);\r\n    }\r\n    // \r\n    moveEvent(ev) {\r\n        this.left = ev.x;\r\n        this.top = ev.y;\r\n        this.updateDeleteIcon();\r\n    }\r\n    // \r\n    addClearMultipleBtn(selector, callback = () => { }) {\r\n        this.multipleSelector = selector;\r\n        Tools.addBtn('crawlBtns', Colors.bgRed, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            if (states.busy) {\r\n                msgBox.error(lang.transl('_'));\r\n                return;\r\n            }\r\n            EVT.fire('closeCenterPanel');\r\n            this.clearMultiple();\r\n            callback();\r\n        }, false);\r\n    }\r\n    // \r\n    addClearUgoiraBtn(selector, callback = () => { }) {\r\n        this.ugoiraSelector = selector;\r\n        Tools.addBtn('crawlBtns', Colors.bgRed, lang.transl('_'), [\r\n            ['title', lang.transl('_Title')],\r\n        ]).addEventListener('click', () => {\r\n            if (states.busy) {\r\n                msgBox.error(lang.transl('_'));\r\n                return;\r\n            }\r\n            EVT.fire('closeCenterPanel');\r\n            this.ClearUgoira();\r\n            callback();\r\n        }, false);\r\n    }\r\n    // \r\n    addManuallyDeleteBtn(callback = () => { }) {\r\n        this.deleteWorkCallback = callback;\r\n        this.delBtn = Tools.addBtn('crawlBtns', Colors.bgRed, lang.transl('_'), [['title', lang.transl('_Title')]]);\r\n        this.delBtn.addEventListener('click', () => {\r\n            this.toggleDeleteMode();\r\n        });\r\n    }\r\n    // \r\n    toggleDeleteMode() {\r\n        this.delMode = !this.delMode;\r\n        this.bindDeleteEvent();\r\n        this.updateDeleteIcon();\r\n        if (this.delMode) {\r\n            this.delBtn.textContent = lang.transl('_');\r\n            setTimeout(() => {\r\n                EVT.fire('closeCenterPanel');\r\n            }, 100);\r\n        }\r\n        else {\r\n            this.delBtn.textContent = lang.transl('_');\r\n        }\r\n    }\r\n    // \r\n    clearMultiple() {\r\n        const allPicArea = document.querySelectorAll(this.worksSelector);\r\n        allPicArea.forEach((el) => {\r\n            if (el.querySelector(this.multipleSelector)) {\r\n                el.remove();\r\n            }\r\n        });\r\n        this.showWorksCount();\r\n    }\r\n    // \r\n    ClearUgoira() {\r\n        const allPicArea = document.querySelectorAll(this.worksSelector);\r\n        allPicArea.forEach((el) => {\r\n            if (el.querySelector(this.ugoiraSelector)) {\r\n                el.remove();\r\n            }\r\n        });\r\n        this.showWorksCount();\r\n    }\r\n    // \r\n    // \r\n    bindDeleteEvent() {\r\n        const listElement = document.querySelectorAll(this.worksSelector);\r\n        listElement.forEach((el) => {\r\n            el.onclick = (ev) => {\r\n                if (this.delMode) {\r\n                    ev.preventDefault();\r\n                    if (states.busy) {\r\n                        msgBox.error(lang.transl('_'));\r\n                        return;\r\n                    }\r\n                    const target = ev.currentTarget;\r\n                    target.remove();\r\n                    this.showWorksCount();\r\n                    this.deleteWorkCallback(target);\r\n                }\r\n            };\r\n        });\r\n    }\r\n    // \r\n    showWorksCount() {\r\n        const selector = this.worksSelector;\r\n        log.success(lang.transl('_', Utils.getVisibleEl(selector).length.toString()), 2, false);\r\n    }\r\n}\r\nexport { DeleteWorks };\r\n","import { pageType } from '../PageType';\r\nimport { EVT } from '../EVT';\r\n// \r\n//  destory \r\nclass DestroyManager {\r\n    constructor() {\r\n        this.list = new Map();\r\n        this.lastType = pageType.type;\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.pageSwitchedTypeChange, () => {\r\n            const fun = this.list.get(this.lastType);\r\n            fun && fun();\r\n            this.lastType = pageType.type;\r\n        });\r\n    }\r\n    //  destory \r\n    register(fun) {\r\n        this.list.set(pageType.type, fun);\r\n    }\r\n}\r\nconst destroyManager = new DestroyManager();\r\nexport { destroyManager };\r\n","import { EVT } from '../EVT';\r\nimport { Tools } from '../Tools';\r\nimport { theme } from '../Theme';\r\n// \r\nclass FastScreen {\r\n    constructor() {\r\n        this.favNums = [\r\n            '100users',\r\n            '500users',\r\n            '1000users',\r\n            '3000users',\r\n            '5000users',\r\n            '10000users',\r\n            '20000users',\r\n            '30000users',\r\n            '50000users',\r\n        ]; // 200  2000 40000 \r\n        this.create();\r\n        window.addEventListener(EVT.list.pageSwitchedTypeChange, () => {\r\n            this.destroy();\r\n        });\r\n    }\r\n    // \r\n    create() {\r\n        // \r\n        const target = document.querySelector('#root>div');\r\n        if (!target) {\r\n            setTimeout(() => {\r\n                this.create();\r\n            }, 300);\r\n            return;\r\n        }\r\n        const fastScreenArea = document.createElement('div');\r\n        fastScreenArea.className = 'fastScreenArea';\r\n        this.favNums.forEach((secondTag) => {\r\n            const a = document.createElement('a');\r\n            a.innerText = secondTag;\r\n            a.href = 'javascript:viod(0)';\r\n            a.onclick = () => {\r\n                this.openFastScreenLink(secondTag);\r\n            };\r\n            fastScreenArea.appendChild(a);\r\n        });\r\n        theme.register(fastScreenArea);\r\n        target.insertAdjacentElement('afterend', fastScreenArea);\r\n    }\r\n    // \r\n    openFastScreenLink(secondTag) {\r\n        //  tag tag\r\n        const nowTag = Tools.getTagFromURL();\r\n        const firstTag = nowTag.split(' ')[0];\r\n        const fullTag = encodeURIComponent(firstTag + ' ' + secondTag);\r\n        //  tag  tag\r\n        const newURL = location.href.replace(encodeURIComponent(nowTag), fullTag);\r\n        //  s_mode=s_tag \r\n        const u = new URL(newURL);\r\n        u.searchParams.set('s_mode', 's_tag');\r\n        location.href = u.toString();\r\n    }\r\n    destroy() {\r\n        // \r\n        const fastScreen = document.querySelector('.fastScreenArea');\r\n        fastScreen === null || fastScreen === void 0 ? void 0 : fastScreen.remove();\r\n    }\r\n}\r\nexport { FastScreen };\r\n","// \r\nimport { API } from '../API';\r\nimport { Tools } from '../Tools';\r\nimport { lang } from '../Lang';\r\nimport { token } from '../Token';\r\nimport { Utils } from '../utils/Utils';\r\nimport { Bookmark } from '../Bookmark';\r\nclass QuickBookmark {\r\n    constructor() {\r\n        this.btn = document.createElement('a'); // \r\n        this.btnId = 'quickBookmarkEl'; //  id\r\n        this.redClass = 'bookmarkedColor'; // \r\n        this.likeBtnClass = '_35vRH4a'; //  class\r\n        this.isNovel = false;\r\n        this.timer = 0;\r\n        this.flag = 'xzFlag'; // \r\n        this.init();\r\n    }\r\n    async init() {\r\n        //  token \r\n        if (!token.token) {\r\n            return;\r\n        }\r\n        this.isNovel = window.location.href.includes('/novel');\r\n        this.timer = window.setInterval(() => {\r\n            this.initBtn();\r\n        }, 300);\r\n    }\r\n    // \r\n    async initBtn() {\r\n        // \r\n        const toolbarParent = document.querySelectorAll('main > section');\r\n        for (const el of toolbarParent) {\r\n            const test = el.querySelector('div>section');\r\n            if (test) {\r\n                this.toolbar = test;\r\n                break;\r\n            }\r\n        }\r\n        if (this.toolbar) {\r\n            //  div\r\n            this.pixivBMKDiv = this.toolbar.childNodes[2];\r\n            // \r\n            if (!this.pixivBMKDiv) {\r\n                return;\r\n            }\r\n            if (!this.isNovel) {\r\n                // \r\n                // \r\n                if (this.pixivBMKDiv.classList.contains(this.flag)) {\r\n                    return;\r\n                }\r\n                else {\r\n                    // \r\n                    this.pixivBMKDiv.classList.add(this.flag);\r\n                }\r\n            }\r\n            window.clearInterval(this.timer);\r\n            // \r\n            const oldBtn = this.toolbar.querySelector('#' + this.btnId);\r\n            if (oldBtn) {\r\n                oldBtn.remove();\r\n            }\r\n            // \r\n            this.workData = await this.getWorkData();\r\n            this.isBookmarked = !!this.workData.body.bookmarkData;\r\n            // \r\n            //  buttonbutton  a \r\n            if (!this.isBookmarked) {\r\n                this.ob = new MutationObserver((mutations) => {\r\n                    for (const change of mutations) {\r\n                        if (change.type === 'childList') {\r\n                            const added = change.addedNodes;\r\n                            if (added.length > 0 && added[0].nodeName === 'A') {\r\n                                this.isBookmarked = true;\r\n                                this.bookmarked();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                this.ob.observe(this.pixivBMKDiv, {\r\n                    childList: true,\r\n                });\r\n            }\r\n            // \r\n            this.btn = this.createBtn();\r\n            this.toolbar.insertBefore(this.btn, this.toolbar.childNodes[3]);\r\n            if (this.isBookmarked) {\r\n                this.bookmarked();\r\n            }\r\n            else {\r\n                this.btn.addEventListener('click', () => {\r\n                    this.addBookmark();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    //\r\n    createBtn() {\r\n        const btn = document.createElement('a');\r\n        btn.id = this.btnId;\r\n        btn.textContent = '';\r\n        btn.href = 'javascript:void(0)';\r\n        btn.title = lang.transl('_');\r\n        return btn;\r\n    }\r\n    async getWorkData() {\r\n        const id = this.isNovel ? Tools.getNovelId() : Tools.getIllustId();\r\n        return this.isNovel\r\n            ? await API.getNovelData(id)\r\n            : await API.getArtworkData(id);\r\n    }\r\n    async addBookmark() {\r\n        const type = this.isNovel ? 'novels' : 'illusts';\r\n        const id = this.isNovel ? Tools.getNovelId() : Tools.getIllustId();\r\n        this.like(type, id);\r\n        if (this.isBookmarked) {\r\n            return;\r\n        }\r\n        await Bookmark.add(id, type, Tools.extractTags(this.workData));\r\n        // \r\n        this.isBookmarked = true;\r\n        this.bookmarked();\r\n        // \r\n        if (!this.isNovel) {\r\n            this.changePixivBMKDiv();\r\n        }\r\n    }\r\n    // \r\n    like(type, id) {\r\n        API.addLike(id, type, token.token);\r\n        // \r\n        if (this.isNovel) {\r\n            return;\r\n        }\r\n        // \r\n        let likeBtn = document.querySelector(`.${this.likeBtnClass}`);\r\n        if (!likeBtn) {\r\n            //  class \r\n            //  button \r\n            console.error('likeBtn class is not available');\r\n            const btnList = this.toolbar.querySelectorAll('button');\r\n            likeBtn = btnList[btnList.length - 1];\r\n        }\r\n        likeBtn.style.color = '#0096fa';\r\n    }\r\n    getEditBookmarkLink() {\r\n        if (this.isNovel) {\r\n            return `/novel/bookmark_add.php?id=${Tools.getNovelId()}`;\r\n        }\r\n        else {\r\n            return `/bookmark_add.php?type=illust&illust_id=${Tools.getIllustId()}`;\r\n        }\r\n    }\r\n    // \r\n    bookmarked() {\r\n        this.btn.classList.add(this.redClass);\r\n        this.btn.href = this.getEditBookmarkLink();\r\n    }\r\n    // \r\n    changePixivBMKDiv() {\r\n        if (!this.pixivBMKDiv) {\r\n            return;\r\n        }\r\n        // \r\n        if (this.ob) {\r\n            this.ob.disconnect();\r\n        }\r\n        const svg = this.pixivBMKDiv.querySelector('svg');\r\n        if (!svg) {\r\n            return;\r\n        }\r\n        // \r\n        const redStyle = `\n    .${this.redClass} mask path{\n      fill: white !important;\n    }`;\r\n        Utils.addStyle(redStyle);\r\n        //  a  button\r\n        const a = document.createElement('a');\r\n        a.href = this.getEditBookmarkLink();\r\n        a.appendChild(svg);\r\n        //  button a \r\n        const btn = this.pixivBMKDiv.querySelector('button');\r\n        btn && btn.remove();\r\n        this.pixivBMKDiv.insertAdjacentElement('afterbegin', a);\r\n        //  svg  class\r\n        svg.classList.add(this.redClass);\r\n        //  a  a pixiv  tag \r\n        a.addEventListener('click', (ev) => {\r\n            ev.stopPropagation();\r\n        }, true);\r\n    }\r\n}\r\nexport { QuickBookmark };\r\n","import { lang } from '../Lang';\r\nimport { API } from '../API';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { EVT } from '../EVT';\r\nimport { img2ico } from '../utils/imageToIcon';\r\nimport { Utils } from '../utils/Utils';\r\n// \r\nclass SaveAvatarIcon {\r\n    constructor() {\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.saveAvatarIcon, () => {\r\n            this.saveAvatarIcon();\r\n        });\r\n    }\r\n    async saveAvatarIcon() {\r\n        const userId = Tools.getUserId();\r\n        const userProfile = await API.getUserProfile(userId);\r\n        const bigImg = userProfile.body.imageBig; // imageBig  170 px \r\n        const fullSizeImg = bigImg.replace('_170', ''); //  170 \r\n        //  ico \r\n        //  256 128 windows  48 \r\n        const blob = await img2ico.convert({\r\n            size: [256],\r\n            source: fullSizeImg,\r\n            shape: 'fillet',\r\n            bleed: true,\r\n        });\r\n        // \r\n        const url = URL.createObjectURL(blob);\r\n        const name = `${userProfile.body.name}_${userId}_icon.ico`;\r\n        Utils.downloadFile(url, name);\r\n        log.success(' ' + lang.transl('_'));\r\n        EVT.fire('closeCenterPanel');\r\n    }\r\n}\r\nnew SaveAvatarIcon();\r\n","import { lang } from '../Lang';\r\nimport { API } from '../API';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\n// \r\nclass SaveAvatarImage {\r\n    constructor() {\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.saveAvatarImage, () => {\r\n            this.saveAvatarImage();\r\n        });\r\n    }\r\n    async saveAvatarImage() {\r\n        const userId = Tools.getUserId();\r\n        const userProfile = await API.getUserProfile(userId);\r\n        const bigImg = userProfile.body.imageBig; // imageBig  170 px \r\n        const fullSizeImg = bigImg.replace('_170', ''); //  170 \r\n        // \r\n        const img = await fetch(fullSizeImg);\r\n        const blob = await img.blob();\r\n        // \r\n        const arr = fullSizeImg.split('.');\r\n        const ext = arr[arr.length - 1];\r\n        // \r\n        const url = URL.createObjectURL(blob);\r\n        const name = `${userProfile.body.name}_${userId}_avatar.${ext}`;\r\n        Utils.downloadFile(url, name);\r\n        log.success(' ' + lang.transl('_'));\r\n        EVT.fire('closeCenterPanel');\r\n    }\r\n}\r\nnew SaveAvatarImage();\r\n","import { lang } from '../Lang';\r\nimport { API } from '../API';\r\nimport { log } from '../Log';\r\nimport { Tools } from '../Tools';\r\nimport { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\nimport { toast } from '../Toast';\r\n// \r\nclass SaveUserCover {\r\n    constructor() {\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.saveUserCover, () => {\r\n            this.saveUserCover();\r\n        });\r\n    }\r\n    async saveUserCover() {\r\n        const userId = Tools.getUserId();\r\n        const userProfile = await API.getUserProfile(userId);\r\n        const bgData = userProfile.body.background;\r\n        if (bgData === null) {\r\n            return toast.error(lang.transl('_'));\r\n        }\r\n        const bgUrl = bgData.url;\r\n        if (!bgUrl) {\r\n            return toast.error(lang.transl('_'));\r\n        }\r\n        // \r\n        const img = await fetch(bgUrl);\r\n        const blob = await img.blob();\r\n        // \r\n        const arr = bgUrl.split('.');\r\n        const ext = arr[arr.length - 1];\r\n        // \r\n        const url = URL.createObjectURL(blob);\r\n        const name = `${userProfile.body.name}_${userId}_cover.${ext}`;\r\n        Utils.downloadFile(url, name);\r\n        log.success(' ' + lang.transl('_'));\r\n        EVT.fire('closeCenterPanel');\r\n    }\r\n}\r\nnew SaveUserCover();\r\n","import { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\nimport { IndexedDB } from '../utils/IndexedDB';\r\nimport { settings } from './Settings';\r\nclass BG {\r\n    constructor(wrap) {\r\n        this.id = 'xzBG';\r\n        this.flagClassName = 'xzBG';\r\n        this.haveImage = false;\r\n        this.DBName = 'PBDBG';\r\n        this.DBVer = 1;\r\n        this.storeName = 'bg';\r\n        this.keyName = 'bg';\r\n        // \r\n        this.onUpdate = (db) => {\r\n            if (!db.objectStoreNames.contains(this.storeName)) {\r\n                db.createObjectStore(this.storeName, {\r\n                    keyPath: 'key',\r\n                });\r\n            }\r\n        };\r\n        this.wrap = wrap;\r\n        this.el = this.createEl();\r\n        this.IDB = new IndexedDB();\r\n        this.init();\r\n    }\r\n    async init() {\r\n        this.bindEvents();\r\n        await this.initDB();\r\n        this.restore();\r\n    }\r\n    async initDB() {\r\n        await this.IDB.open(this.DBName, this.DBVer, this.onUpdate);\r\n    }\r\n    createEl() {\r\n        const div = document.createElement('div');\r\n        div.id = this.id;\r\n        const el = this.wrap.insertAdjacentElement('afterbegin', div);\r\n        return el;\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.selectBG, () => {\r\n            this.selectBG();\r\n        });\r\n        window.addEventListener(EVT.list.clearBG, () => {\r\n            this.clearBG();\r\n        });\r\n        window.addEventListener(EVT.list.settingChange, (ev) => {\r\n            const data = ev.detail.data;\r\n            if (data.name === 'bgDisplay') {\r\n                this.setDisplay();\r\n            }\r\n            if (data.name === 'bgOpacity') {\r\n                this.setOpacity();\r\n            }\r\n            if (data.name === 'bgPositionY') {\r\n                this.setPositionY();\r\n            }\r\n        });\r\n    }\r\n    async restore() {\r\n        const data = (await this.IDB.get(this.storeName, this.keyName));\r\n        if (!data || !data.file) {\r\n            return;\r\n        }\r\n        const url = URL.createObjectURL(data.file);\r\n        this.setBGImage(url);\r\n    }\r\n    async selectBG() {\r\n        const file = (await Utils.selectFile('.jpg,.jpeg,.png,.bmp'))[0];\r\n        const url = URL.createObjectURL(file);\r\n        this.setBGImage(url);\r\n        const data = {\r\n            key: this.keyName,\r\n            file: file,\r\n        };\r\n        const test = await this.IDB.get(this.storeName, this.keyName);\r\n        this.IDB[test ? 'put' : 'add'](this.storeName, data);\r\n    }\r\n    async setBGImage(url) {\r\n        this.setPositionY();\r\n        this.setOpacity();\r\n        // \r\n        // \r\n        await Utils.loadImg(url);\r\n        this.el.style.backgroundImage = `url(${url})`;\r\n        this.haveImage = true;\r\n        this.setDisplay();\r\n    }\r\n    setDisplay() {\r\n        this.el.style.display = settings.bgDisplay ? 'block' : 'none';\r\n        if (!this.haveImage) {\r\n            this.wrap.classList.remove(this.flagClassName);\r\n        }\r\n        else {\r\n            this.wrap.classList[settings.bgDisplay ? 'add' : 'remove'](this.flagClassName);\r\n        }\r\n    }\r\n    setOpacity() {\r\n        this.el.style.opacity = (settings.bgOpacity / 100).toString();\r\n    }\r\n    setPositionY() {\r\n        this.el.style.backgroundPositionY = settings.bgPositionY;\r\n    }\r\n    clearBG() {\r\n        this.el.style.backgroundImage = 'none';\r\n        this.IDB.clear(this.storeName);\r\n        this.haveImage = false;\r\n        this.setDisplay();\r\n    }\r\n}\r\nexport { BG };\r\n","// \r\nclass ConvertOldSettings {\r\n    constructor() {\r\n        // \r\n        // \r\n        this.data = {\r\n            ratio: {\r\n                '0': 'square',\r\n                '1': 'horizontal',\r\n                '2': 'vertical',\r\n                '3': 'userSet',\r\n            },\r\n            workDirName: {\r\n                '1': 'id',\r\n                '2': 'rule',\r\n            },\r\n            idRange: {\r\n                '1': '>',\r\n                '2': '<',\r\n            },\r\n            widthTag: {\r\n                '1': 'yes',\r\n                '-1': 'no',\r\n            },\r\n            restrict: {\r\n                '1': 'yes',\r\n                '-1': 'no',\r\n            },\r\n            userSetLang: {\r\n                '-1': 'auto',\r\n                '0': 'zh-cn',\r\n                '1': 'ja',\r\n                '2': 'en',\r\n                '3': 'zh-tw',\r\n            },\r\n        };\r\n    }\r\n    // \r\n    convert(key, value) {\r\n        const map = this.data[key];\r\n        // \r\n        if (map) {\r\n            // \r\n            //  undefined \r\n            const newValue = map[value];\r\n            if (newValue !== undefined) {\r\n                return newValue;\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n}\r\nconst convertOldSettings = new ConvertOldSettings();\r\nexport { convertOldSettings };\r\n","import { EVT } from '../EVT';\r\nimport { Tools } from '../Tools';\r\nimport { Colors } from '../config/Colors';\r\nimport { lang } from '../Lang';\r\nimport { formHtml } from './FormHTML';\r\nimport { SaveNamingRule } from './SaveNamingRule';\r\nimport { theme } from '../Theme';\r\nimport { FormSettings } from './FormSettings';\r\nimport { Utils } from '../utils/Utils';\r\n// \r\nclass Form {\r\n    constructor() {\r\n        this.chooseKeys = ['Enter', 'NumpadEnter']; // \r\n        this.tipCreateFolderFlag = 'tipCreateFolder'; // \r\n        this.tipCreateFolderId = 'tipCreateFolder'; //  id\r\n        this.form = Tools.useSlot('form', formHtml);\r\n        theme.register(this.form);\r\n        this.allCheckBox = this.form.querySelectorAll('input[type=\"checkbox\"]');\r\n        this.allRadio = this.form.querySelectorAll('input[type=\"radio\"]');\r\n        this.allSwitch = this.form.querySelectorAll('.checkbox_switch');\r\n        this.allLabel = this.form.querySelectorAll('label');\r\n        new SaveNamingRule(this.form.userSetName);\r\n        this.formSettings = new FormSettings(this.form);\r\n        this.bindEvents();\r\n        this.initFormBueatiful();\r\n        this.checkTipCreateFolder();\r\n    }\r\n    // \r\n    initFormBueatiful() {\r\n        //  label \r\n        this.resetLabelActive();\r\n        // /\r\n        this.resetSubOptionDisplay();\r\n    }\r\n    bindEvents() {\r\n        // \r\n        for (const checkbox of this.allCheckBox) {\r\n            this.bindCheckboxEvent(checkbox);\r\n        }\r\n        // \r\n        for (const radio of this.allRadio) {\r\n            this.bindRadioEvent(radio);\r\n        }\r\n        // \r\n        window.addEventListener(EVT.list.settingChange, (ev) => {\r\n            this.formSettings.restoreFormSettings();\r\n            this.initFormBueatiful();\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.resetSettingsEnd, () => {\r\n            this.form.reset();\r\n            this.formSettings.restoreFormSettings();\r\n            // \r\n            this.initFormBueatiful();\r\n        });\r\n        // \r\n        Tools.addBtn('namingBtns', Colors.bgGreen, lang.transl('_')).addEventListener('click', () => {\r\n            EVT.fire('previewFileName');\r\n        }, false);\r\n        //  pixiv \r\n        if (Utils.isPixiv()) {\r\n            //  csv\r\n            Tools.addBtn('exportResult', Colors.bgGreen, lang.transl('_csv')).addEventListener('click', () => {\r\n                EVT.fire('outputCSV');\r\n            }, false);\r\n            // \r\n            Tools.addBtn('exportResult', Colors.bgGreen, lang.transl('_')).addEventListener('click', () => {\r\n                EVT.fire('exportResult');\r\n            }, false);\r\n            // \r\n            Tools.addBtn('exportResult', Colors.bgGreen, lang.transl('_')).addEventListener('click', () => {\r\n                EVT.fire('importResult');\r\n            }, false);\r\n        }\r\n        // \r\n        {\r\n            const el = this.form.querySelector('#selectBG');\r\n            if (el) {\r\n                el.addEventListener('click', () => {\r\n                    EVT.fire('selectBG');\r\n                });\r\n            }\r\n        }\r\n        // \r\n        {\r\n            const el = this.form.querySelector('#clearBG');\r\n            if (el) {\r\n                el.addEventListener('click', () => {\r\n                    EVT.fire('clearBG');\r\n                });\r\n            }\r\n        }\r\n        // \r\n        {\r\n            const el = this.form.querySelector('#resetSettings');\r\n            if (el) {\r\n                el.addEventListener('click', () => {\r\n                    const result = window.confirm(lang.transl('_'));\r\n                    if (result) {\r\n                        EVT.fire('resetSettings');\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        // \r\n        {\r\n            const el = this.form.querySelector('#exportSettings');\r\n            if (el) {\r\n                el.addEventListener('click', () => {\r\n                    EVT.fire('exportSettings');\r\n                });\r\n            }\r\n        }\r\n        // \r\n        {\r\n            const el = this.form.querySelector('#importSettings');\r\n            if (el) {\r\n                el.addEventListener('click', () => {\r\n                    EVT.fire('importSettings');\r\n                });\r\n            }\r\n        }\r\n        // \r\n        this.form\r\n            .querySelector('.showFileNameTip')\r\n            .addEventListener('click', () => Utils.toggleEl(document.querySelector('.fileNameTip')));\r\n        // \r\n        this.form\r\n            .querySelector('.showDateTip')\r\n            .addEventListener('click', () => Utils.toggleEl(document.querySelector('.dateFormatTip')));\r\n        // \r\n        const centerInputs = this.form.querySelectorAll('input[type=text]');\r\n        for (const el of centerInputs) {\r\n            if (el.name !== 'userSetName') {\r\n                el.addEventListener('focus', function () {\r\n                    this.select();\r\n                });\r\n            }\r\n        }\r\n        // \r\n        this.insertValueToInput(this.form.fileNameSelect, this.form.userSetName);\r\n    }\r\n    // \r\n    insertValueToInput(from, to) {\r\n        from.addEventListener('change', () => {\r\n            if (from.value !== 'default') {\r\n                // ,\r\n                const position = to.selectionStart;\r\n                to.value =\r\n                    to.value.substr(0, position) +\r\n                        from.value +\r\n                        to.value.substr(position, to.value.length);\r\n                to.selectionStart = position + from.value.length;\r\n                to.selectionEnd = position + from.value.length;\r\n                to.focus();\r\n            }\r\n        });\r\n    }\r\n    // \r\n    bindCheckboxEvent(el) {\r\n        // \r\n        el.addEventListener('keydown', (event) => {\r\n            if (this.chooseKeys.includes(event.code)) {\r\n                el.click();\r\n            }\r\n        });\r\n        // \r\n        el.nextElementSibling.addEventListener('click', () => {\r\n            el.click();\r\n        });\r\n        //  label  lable  input  click settings  click  label  settingChange  label \r\n    }\r\n    // \r\n    bindRadioEvent(el) {\r\n        // \r\n        el.nextElementSibling.addEventListener('click', () => {\r\n            el.click();\r\n        });\r\n        //  label \r\n    }\r\n    //  label \r\n    resetLabelActive() {\r\n        //  label \r\n        for (const checkbox of this.allCheckBox) {\r\n            this.setLabelActive(checkbox);\r\n        }\r\n        //  label \r\n        for (const radio of this.allRadio) {\r\n            this.setLabelActive(radio);\r\n        }\r\n    }\r\n    //  input  label \r\n    setLabelActive(input) {\r\n        const label = this.form.querySelector(`label[for=\"${input.id}\"]`);\r\n        if (label) {\r\n            const method = input.checked ? 'add' : 'remove';\r\n            label.classList[method]('active');\r\n        }\r\n    }\r\n    // /\r\n    resetSubOptionDisplay() {\r\n        for (const _switch of this.allSwitch) {\r\n            const subOption = this.form.querySelector(`.subOptionWrap[data-show=\"${_switch.name}\"]`);\r\n            if (subOption) {\r\n                subOption.style.display = _switch.checked ? 'inline' : 'none';\r\n            }\r\n        }\r\n    }\r\n    // \r\n    checkTipCreateFolder() {\r\n        if (!Utils.isPixiv()) {\r\n            return;\r\n        }\r\n        const tip = this.form.querySelector('#' + this.tipCreateFolderId);\r\n        if (!tip) {\r\n            return;\r\n        }\r\n        // \r\n        if (!window.localStorage.getItem(this.tipCreateFolderFlag)) {\r\n            tip.style.display = 'block';\r\n            // \r\n            const btn = tip.querySelector('button');\r\n            if (btn) {\r\n                btn.addEventListener('click', () => {\r\n                    tip.style.display = 'none';\r\n                    window.localStorage.setItem(this.tipCreateFolderFlag, '1');\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\nconst form = new Form().form;\r\nexport { form };\r\n","import { Config } from '../config/Config';\r\nimport { lang } from '../Lang';\r\nexport const formHtml = `<form class=\"settingForm\">\n    <div class=\"tabsContnet\">\n      <p class=\"option\" data-no=\"1\">\n      <span class=\"setWantPageWrap\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\"><span class=\"setWantPageTip1\">${lang.transl('_')}</span><span class=\"gray1\"> ? </span></span>\n      <input type=\"text\" name=\"setWantPage\" class=\"setinput_style1 blue setWantPage\"\n      value = '-1'>&nbsp;\n      <span class=\"setWantPageTip2 gray1\">-1  0 </span>\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"2\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"downType0\" id=\"setWorkType0\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setWorkType0\"> ${lang.transl('_')}&nbsp;</label>\n      <input type=\"checkbox\" name=\"downType1\" id=\"setWorkType1\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setWorkType1\"> ${lang.transl('_')}&nbsp;</label>\n      <input type=\"checkbox\" name=\"downType2\" id=\"setWorkType2\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setWorkType2\"> ${lang.transl('_')}&nbsp;</label>\n      <input type=\"checkbox\" name=\"downType3\" id=\"setWorkType3\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setWorkType3\"> ${lang.transl('_')}&nbsp;</label>\n      </p>\n\n      <p class=\"option\" data-no=\"44\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"downAllAges\" id=\"downAllAges\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"downAllAges\"> ${lang.transl('_')}&nbsp;</label>\n      <input type=\"checkbox\" name=\"downR18\" id=\"downR18\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"downR18\"> R-18&nbsp;</label>\n      <input type=\"checkbox\" name=\"downR18G\" id=\"downR18G\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"downR18G\"> R-18G&nbsp;</label>\n      </p>\n\n      <p class=\"option\" data-no=\"6\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"downNotBookmarked\" id=\"setDownNotBookmarked\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setDownNotBookmarked\"> ${lang.transl('_')}&nbsp;</label>\n      <input type=\"checkbox\" name=\"downBookmarked\" id=\"setDownBookmarked\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setDownBookmarked\"> ${lang.transl('_')}&nbsp;</label>\n      </p>\n      \n      <p class=\"option\" data-no=\"23\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"downColorImg\" id=\"setDownColorImg\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setDownColorImg\"> ${lang.transl('_')}&nbsp;</label>\n      <input type=\"checkbox\" name=\"downBlackWhiteImg\" id=\"setDownBlackWhiteImg\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setDownBlackWhiteImg\"> ${lang.transl('_')}&nbsp;</label>\n      </p>\n\n      <p class=\"option\" data-no=\"21\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"downSingleImg\" id=\"setDownSingleImg\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setDownSingleImg\"> ${lang.transl('_')}&nbsp;</label>\n      <input type=\"checkbox\" name=\"downMultiImg\" id=\"setDownMultiImg\" class=\"need_beautify checkbox_common\" checked>\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"setDownMultiImg\"> ${lang.transl('_')}&nbsp;</label>\n      </p>\n\n      <p class=\"option\" data-no=\"3\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_') + ', ' + lang.transl('_0')}\" >${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"firstFewImagesSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"firstFewImagesSwitch\">\n      ${lang.transl('_')}&nbsp;\n      <input type=\"text\" name=\"firstFewImages\" class=\"setinput_style1 blue\" value=\"1\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"5\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"BMKNumSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"BMKNumSwitch\">\n      <span>${lang.transl('_')}&nbsp;</span>\n      <input type=\"text\" name=\"BMKNumMin\" class=\"setinput_style1 blue bmkNum\" value=\"0\">\n      <span>${lang.transl('_')}&nbsp;</span>\n      <input type=\"text\" name=\"BMKNumMax\" class=\"setinput_style1 blue bmkNum\" value=\"${Config.BookmarkCountLimit}\">\n      <span>${lang.transl('_')}</span>\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">\n      ${lang.transl('_')}\n      <span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"BMKNumAverageSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"BMKNumAverageSwitch\">\n        <input type=\"text\" name=\"BMKNumAverage\" class=\"setinput_style1 blue bmkNum\" value=\"600\">\n      </span>\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"8\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_Title')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"ratioSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"ratioSwitch\">\n      <input type=\"radio\" name=\"ratio\" id=\"ratio1\" class=\"need_beautify radio\" value=\"horizontal\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"ratio1\"> ${lang.transl('_')}&nbsp; </label>\n\n      <input type=\"radio\" name=\"ratio\" id=\"ratio2\" class=\"need_beautify radio\" value=\"vertical\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"ratio2\"> ${lang.transl('_')}&nbsp; </label>\n      \n      <input type=\"radio\" name=\"ratio\" id=\"ratio0\" class=\"need_beautify radio\" value=\"square\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"ratio0\"> ${lang.transl('_')}&nbsp; </label>\n\n      <input type=\"radio\" name=\"ratio\" id=\"ratio3\" class=\"need_beautify radio\" value=\"userSet\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"ratio3\"> ${lang.transl('_')}</label>\n      <input type=\"text\" name=\"userRatio\" class=\"setinput_style1 blue\" value=\"1.4\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"7\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_Title')} ${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"setWHSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"setWHSwitch\">\n\n      <input type=\"radio\" name=\"widthHeightLimit\" id=\"widthHeightLimit1\" class=\"need_beautify radio\" value=\">=\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"widthHeightLimit1\">&gt;=&nbsp;</label>\n\n      <input type=\"radio\" name=\"widthHeightLimit\" id=\"widthHeightLimit2\" class=\"need_beautify radio\" value=\"=\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"widthHeightLimit2\">=&nbsp;</label>\n      \n      <input type=\"radio\" name=\"widthHeightLimit\" id=\"widthHeightLimit3\" class=\"need_beautify radio\" value=\"<=\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"widthHeightLimit3\">&lt;=&nbsp;</label>\n\n      <input type=\"text\" name=\"setWidth\" class=\"setinput_style1 blue\" value=\"0\">\n      <input type=\"radio\" name=\"setWidthAndOr\" id=\"setWidth_AndOr1\" class=\"need_beautify radio\" value=\"&\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"setWidth_AndOr1\">and&nbsp;</label>\n      <input type=\"radio\" name=\"setWidthAndOr\" id=\"setWidth_AndOr2\" class=\"need_beautify radio\" value=\"|\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"setWidth_AndOr2\">or&nbsp;</label>\n      <input type=\"text\" name=\"setHeight\" class=\"setinput_style1 blue\" value=\"0\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"9\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_id')}\">${lang.transl('_id')}&nbsp;&nbsp; <span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"idRangeSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"idRangeSwitch\">\n      <input type=\"radio\" name=\"idRange\" id=\"idRange1\" class=\"need_beautify radio\" value=\">\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"idRange1\">  ${lang.transl('_')}&nbsp; </label>\n      <input type=\"radio\" name=\"idRange\" id=\"idRange2\" class=\"need_beautify radio\" value=\"<\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"idRange2\">  ${lang.transl('_')}&nbsp; </label>\n      <input type=\"text\" name=\"idRangeInput\" class=\"setinput_style1 w100 blue\" value=\"\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"10\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')} <span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"postDate\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"postDate\">\n      <input type=\"datetime-local\" name=\"postDateStart\" placeholder=\"yyyy-MM-dd HH:mm\" class=\"setinput_style1 postDate blue\" value=\"\">\n      &nbsp;-&nbsp;\n      <input type=\"datetime-local\" name=\"postDateEnd\" placeholder=\"yyyy-MM-dd HH:mm\" class=\"setinput_style1 postDate blue\" value=\"\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"11\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_tag')}\">${lang.transl('_tag')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"needTagSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"needTagSwitch\">\n      <input type=\"radio\" name=\"needTagMode\" id=\"needTagMode1\" class=\"need_beautify radio\" value=\"all\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"needTagMode1\">  ${lang.transl('_')}&nbsp; </label>\n      <input type=\"radio\" name=\"needTagMode\" id=\"needTagMode2\" class=\"need_beautify radio\" value=\"one\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"needTagMode2\">  ${lang.transl('_')}&nbsp; </label>\n      <input type=\"text\" name=\"needTag\" class=\"setinput_style1 blue setinput_tag\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"12\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_tag')}\">${lang.transl('_tag')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"notNeedTagSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"notNeedTagSwitch\">\n      <input type=\"text\" name=\"notNeedTag\" class=\"setinput_style1 blue setinput_tag\">\n      </span>\n      </p>\n\n      <div class=\"centerWrap_btns\">\n        <slot data-name=\"crawlBtns\"></slot>\n        <slot data-name=\"selectWorkBtns\"></slot>\n      </div>\n    </div>\n    <div class=\"tabsContnet\">\n    <p class=\"option\" data-no=\"13\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_') + '<br>' + '{user}/{id}'}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"text\" name=\"userSetName\" class=\"setinput_style1 blue fileNameRule\" value=\"{id}\">\n      &nbsp;\n      <select name=\"fileNameSelect\" class=\"beautify_scrollbar\">\n        <option value=\"default\"></option>\n        <option value=\"{id}\">{id}</option>\n        <option value=\"{user}\">{user}</option>\n        <option value=\"{user_id}\">{user_id}</option>\n        <option value=\"{title}\">{title}</option>\n        <option value=\"{p_title}\">{p_title}</option>\n        <option value=\"{tags}\">{tags}</option>\n        <option value=\"{tags_translate}\">{tags_translate}</option>\n        <option value=\"{tags_transl_only}\">{tags_transl_only}</option>\n        <option value=\"{p_tag}\">{p_tag}</option>\n        <option value=\"{type}\">{type}</option>\n        <option value=\"{like}\">{like}</option>\n        <option value=\"{bmk}\">{bmk}</option>\n        <option value=\"{view}\">{view}</option>\n        <option value=\"{rank}\">{rank}</option>\n        <option value=\"{date}\">{date}</option>\n        <option value=\"{task_date}\">{task_date}</option>\n        <option value=\"{px}\">{px}</option>\n        <option value=\"{series_title}\">{series_title}</option>\n        <option value=\"{series_order}\">{series_order}</option>\n        <option value=\"{id_num}\">{id_num}</option>\n        <option value=\"{p_num}\">{p_num}</option>\n        </select>\n      &nbsp;\n      <slot data-name=\"saveNamingRule\"></slot>\n      <button class=\"showFileNameTip textButton\" type=\"button\">?</button>\n      </p>\n      <p class=\"tip tipWithBtn\" id=\"tipCreateFolder\">\n        <span class=\"left\">\n        ${lang.transl('_')}<strong>{user}/{id}</strong>\n        </span>\n        <span class=\"right\">\n         <button type=\"button\" class=\"textButton gray1\" id=\"tipCreateFolderBtn\">\n         ${lang.transl('_')}\n         </button>\n        </span>\n      </p>\n      <p class=\"fileNameTip tip\">\n      ${lang.transl('_')}<strong>{user}/{id}</strong>\n      <br>\n      ${lang.transl('_')}\n      <br>\n      <span class=\"blue\">{id}</span>\n      ${lang.transl('_id')}\n      <br>\n      <span class=\"blue\">{user}</span>\n      ${lang.transl('_user')}\n      <br>\n      <span class=\"blue\">{user_id}</span>\n      ${lang.transl('_id')}\n      <br>\n      <span class=\"blue\">{title}</span>\n      ${lang.transl('_title')}\n      <br>\n      <span class=\"blue\">{p_title}</span>\n      ${lang.transl('_PTitle')}\n      <br>\n      <span class=\"blue\">{tags}</span>\n      ${lang.transl('_tags')}\n      <br>\n      <span class=\"blue\">{tags_translate}</span>\n      ${lang.transl('_tags_trans')}\n      <br>\n      <span class=\"blue\">{tags_transl_only}</span>\n      ${lang.transl('_tags_transl_only')}\n      <br>\n      <span class=\"blue\">{p_tag}</span>\n      ${lang.transl('_PTag')}\n      <br>\n      <span class=\"blue\">{type}</span>\n      ${lang.transl('_type')} ${Config.worksTypeName.join(', ')}\n      <br>\n      <span class=\"blue\">{like}</span>\n      ${lang.transl('_like')}\n      <br>\n      <span class=\"blue\">{bmk}</span>\n      ${lang.transl('_bmk')}\n      <br>\n      <span class=\"blue\">{view}</span>\n      ${lang.transl('_view')}\n      <br>\n      <span class=\"blue\">{rank}</span>\n      ${lang.transl('_rank')}\n      <br>\n      <span class=\"blue\">{date}</span>\n      ${lang.transl('_date')}\n      <br>\n      <span class=\"blue\">{task_date}</span>\n      ${lang.transl('_taskDate')}\n      <br>\n      <span class=\"blue\">{px}</span>\n      ${lang.transl('_px')}\n      <br>\n      <span class=\"blue\">{series_title}</span>\n      ${lang.transl('_seriesTitle')}\n      <br>\n      <span class=\"blue\">{series_order}</span>\n      ${lang.transl('_seriesOrder')}\n      <br>\n      <span class=\"blue\">{id_num}</span>\n      ${lang.transl('_id_num')}\n      <br>\n      <span class=\"blue\">{p_num}</span>\n      ${lang.transl('_p_num')}\n      </p>\n\n      <p class=\"option\" data-no=\"14\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"tagNameToFileName\" id=\"setTagNameToFileName\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      </p>\n\n      <p class=\"option\" data-no=\"22\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"noSerialNo\" id=\"setNoSerialNo\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      </p>\n      \n      <p class=\"option\" data-no=\"42\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}</span>\n      <input type=\"checkbox\" name=\"createFolderByType\" class=\"need_beautify checkbox_switch\" >\n      <span class=\"beautify_switch\"></span>\n\n      <span class=\"subOptionWrap\" data-show=\"createFolderByType\">\n      <input type=\"checkbox\" name=\"createFolderByTypeIllust\" id=\"createFolderByTypeIllust\" class=\"need_beautify checkbox_common\">\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"createFolderByTypeIllust\" class=\"has_tip\" data-tip=\"${Config.worksTypeName[0]}\"> ${lang.transl('_')}&nbsp;</label>\n\n      <input type=\"checkbox\" name=\"createFolderByTypeManga\" id=\"createFolderByTypeManga\" class=\"need_beautify checkbox_common\">\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"createFolderByTypeManga\" class=\"has_tip\" data-tip=\"${Config.worksTypeName[1]}\"> ${lang.transl('_')}&nbsp;</label>\n\n      <input type=\"checkbox\" name=\"createFolderByTypeUgoira\" id=\"createFolderByTypeUgoira\" class=\"need_beautify checkbox_common\">\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"createFolderByTypeUgoira\" class=\"has_tip\" data-tip=\"${Config.worksTypeName[2]}\"> ${lang.transl('_')}&nbsp;</label>\n\n      <input type=\"checkbox\" name=\"createFolderByTypeNovel\" id=\"createFolderByTypeNovel\" class=\"need_beautify checkbox_common\">\n      <span class=\"beautify_checkbox\"></span>\n      <label for=\"createFolderByTypeNovel\" class=\"has_tip\" data-tip=\"${Config.worksTypeName[3]}\"> ${lang.transl('_')}&nbsp;</label>\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"43\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_tag')}\">${lang.transl('_tag')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"createFolderByTag\" class=\"need_beautify checkbox_switch\" >\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"createFolderByTag\">\n      <span class=\"gray1\">${lang.transl('_tag')}</span>\n      <br>\n      <textarea class=\"centerPanelTextArea beautify_scrollbar\" name=\"createFolderTagList\" rows=\"1\"></textarea>\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"38\">\n      <span class=\"settingNameStyle1\">${lang.transl('_r18')}</span>\n      <input type=\"checkbox\" name=\"r18Folder\" class=\"need_beautify checkbox_switch\" >\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"r18Folder\">\n      <span>${lang.transl('_')}</span>\n      <input type=\"text\" name=\"r18FolderName\" class=\"setinput_style1 blue\" style=\"width:150px;min-width: 150px;\" value=\"[R-18&R-18G]\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"19\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}</span>\n      <input type=\"checkbox\" name=\"workDir\" class=\"need_beautify checkbox_switch\" >\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"workDir\">\n      <span>${lang.transl('_')}</span>\n      <input type=\"text\" name=\"workDirFileNumber\" class=\"setinput_style1 blue\" value=\"1\" style=\"width:30px;min-width: 30px;\">\n      <span>&nbsp;</span>\n      <span>${lang.transl('_')}</span>\n      <input type=\"radio\" name=\"workDirName\" id=\"workDirName1\" class=\"need_beautify radio\" value=\"id\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"workDirName1\"> ID&nbsp; </label>\n      <input type=\"radio\" name=\"workDirName\" id=\"workDirName2\" class=\"need_beautify radio\" value=\"rule\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"workDirName2\"> ${lang.transl('_')}&nbsp; </label>\n      </span>\n      </p>\n\n      <div class=\"centerWrap_btns\">\n        <slot data-name=\"namingBtns\"></slot>\n        <slot data-name=\"exportResult\"></slot>\n      </div>\n\n      <p class=\"option\" data-no=\"16\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"text\" name=\"downloadThread\" class=\"setinput_style1 blue\" value=\"5\">\n      </p>\n\n      <p class=\"option\" data-no=\"17\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"quietDownload\" id=\"setQuietDownload\" class=\"need_beautify checkbox_switch\" checked>\n      <span class=\"beautify_switch\"></span>\n      </p>\n\n      <p class=\"option\" data-no=\"33\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">\n      ${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"bmkAfterDL\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      </p>\n\n      <slot data-name=\"downloadArea\"></slot>\n      <slot data-name=\"progressBar\"></slot>\n    </div>\n    \n    <div class=\"tabsContnet\">\n\n      <p class=\"option\" data-no=\"4\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_title')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"radio\" name=\"ugoiraSaveAs\" id=\"ugoiraSaveAs1\" class=\"need_beautify radio\" value=\"webm\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"ugoiraSaveAs1\"> ${lang.transl('_webmVideo')} &nbsp;</label>\n      <input type=\"radio\" name=\"ugoiraSaveAs\" id=\"ugoiraSaveAs3\" class=\"need_beautify radio\" value=\"gif\"> \n      <span class=\"beautify_radio\"></span>\n      <label for=\"ugoiraSaveAs3\">${lang.transl('_gif')} &nbsp;</label>\n      <input type=\"radio\" name=\"ugoiraSaveAs\" id=\"ugoiraSaveAs4\" class=\"need_beautify radio\" value=\"png\"> \n      <span class=\"beautify_radio\"></span>\n      <label for=\"ugoiraSaveAs4\" class=\"has_tip\" data-tip=\"${lang.transl('_')}\">${lang.transl('_apng')} &nbsp;</label>\n      <input type=\"radio\" name=\"ugoiraSaveAs\" id=\"ugoiraSaveAs2\" class=\"need_beautify radio\" value=\"zip\"> \n      <span class=\"beautify_radio\"></span>\n      <label for=\"ugoiraSaveAs2\">${lang.transl('_zipFile')} &nbsp;</label>\n      </p>\n\n      <p class=\"option\" data-no=\"24\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}</span>\n      <input type=\"text\" name=\"convertUgoiraThread\" class=\"setinput_style1 blue\" value=\"1\">\n      <span class=\"has_tip gray1\" data-tip=\"${lang.transl('_')}\"> ${lang.transl('_')} </span>\n      </p>\n\n      <p class=\"option\" data-no=\"26\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}<span class=\"gray1\"> &nbsp; </span></span>\n      <input type=\"radio\" name=\"novelSaveAs\" id=\"novelSaveAs1\" class=\"need_beautify radio\" value=\"txt\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"novelSaveAs1\"> TXT &nbsp;</label>\n      <input type=\"radio\" name=\"novelSaveAs\" id=\"novelSaveAs2\" class=\"need_beautify radio\" value=\"epub\"> \n      <span class=\"beautify_radio\"></span>\n      <label for=\"novelSaveAs2\"> EPUB &nbsp;</label>\n      </p>\n      \n      <p class=\"option\" data-no=\"27\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"saveNovelMeta\" class=\"need_beautify checkbox_switch\" >\n      <span class=\"beautify_switch\"></span>\n      </p>\n\n      <p class=\"option\" data-no=\"29\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}</span>\n      <input type=\"checkbox\" name=\"fileNameLengthLimitSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"fileNameLengthLimitSwitch\">\n      <input type=\"text\" name=\"fileNameLengthLimit\" class=\"setinput_style1 blue\" value=\"200\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"30\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')} </span>\n      <input type=\"radio\" name=\"imageSize\" id=\"imageSize1\" class=\"need_beautify radio\" value=\"original\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"imageSize1\"> ${lang.transl('_')} </label>\n      &nbsp;\n      <input type=\"radio\" name=\"imageSize\" id=\"imageSize2\" class=\"need_beautify radio\" value=\"regular\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"imageSize2\"> ${lang.transl('_')} </label>\n      <span class=\"gray1\">(1200*1200)</span>\n      &nbsp;\n      <input type=\"radio\" name=\"imageSize\" id=\"imageSize3\" class=\"need_beautify radio\" value=\"small\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"imageSize3\"> ${lang.transl('_')} </label>\n      <span class=\"gray1\">(540*540)</span>\n      </p>\n  \n      <p class=\"option\" data-no=\"25\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">\n      ${lang.transl('_')} <span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"sizeSwitch\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"sizeSwitch\">\n      <input type=\"text\" name=\"sizeMin\" class=\"setinput_style1 blue\" value=\"0\">MiB\n      &nbsp;-&nbsp;\n      <input type=\"text\" name=\"sizeMax\" class=\"setinput_style1 blue\" value=\"100\">MiB\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"28\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">\n      ${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"deduplication\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"deduplication\">\n      <span>&nbsp; ${lang.transl('_')}</span>\n      <input type=\"radio\" name=\"dupliStrategy\" id=\"dupliStrategy1\" class=\"need_beautify radio\" value=\"strict\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label class=\"has_tip\" for=\"dupliStrategy1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}</label>\n      &nbsp;\n      <input type=\"radio\" name=\"dupliStrategy\" id=\"dupliStrategy2\" class=\"need_beautify radio\" value=\"loose\">\n      <span class=\"beautify_radio\"></span>\n      <label class=\"has_tip\" for=\"dupliStrategy2\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}</label>\n      &nbsp;\n      <button class=\"textButton gray1\" type=\"button\" id=\"exportDownloadRecord\">${lang.transl('_')}</button>\n      <button class=\"textButton gray1\" type=\"button\" id=\"importDownloadRecord\">${lang.transl('_')}</button>\n      <button class=\"textButton gray1\" type=\"button\" id=\"clearDownloadRecord\">${lang.transl('_')}</button>\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"35\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"userBlockList\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"userBlockList\">\n      <input type=\"text\" name=\"blockList\" class=\"setinput_style1 blue setinput_tag\" placeholder=\"${lang.transl('_ID')}\">\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"39\">\n      <span class=\"settingNameStyle1\">${lang.transl('_tag')}</span>\n      <input type=\"checkbox\" name=\"blockTagsForSpecificUser\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n      <span class=\"subOptionWrap\" data-show=\"blockTagsForSpecificUser\">\n      <slot data-name=\"blockTagsForSpecificUser\"></slot>\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"34\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}</span>\n      \n      <input type=\"radio\" name=\"widthTag\" id=\"widthTag1\" class=\"need_beautify radio\" value=\"yes\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"widthTag1\">${lang.transl('_tag')}&nbsp;</label>\n      <input type=\"radio\" name=\"widthTag\" id=\"widthTag2\" class=\"need_beautify radio\" value=\"no\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"widthTag2\">${lang.transl('_tag')}</label>\n\n      <span class=\"verticalSplit\"></span>\n      \n      <input type=\"radio\" name=\"restrict\" id=\"restrict1\" class=\"need_beautify radio\" value=\"no\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"restrict1\">${lang.transl('_')}&nbsp;</label>\n      <input type=\"radio\" name=\"restrict\" id=\"restrict2\" class=\"need_beautify radio\" value=\"yes\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"restrict2\">${lang.transl('_')}</label>\n      </p>\n\n      <p class=\"option\" data-no=\"18\">\n      <span class=\"has_tip settingNameStyle1\" data-tip=\"${lang.transl('_')}\">${lang.transl('_')}<span class=\"gray1\"> ? </span></span>\n      <input type=\"checkbox\" name=\"previewResult\" id=\"setPreviewResult\" class=\"need_beautify checkbox_switch\" checked>\n      <span class=\"beautify_switch\"></span>\n      </p>\n\n      <p class=\"option\" data-no=\"40\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')} </span>\n      <input type=\"checkbox\" name=\"magnifier\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n\n      <span class=\"subOptionWrap\" data-show=\"magnifier\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')} </span>\n      <input type=\"radio\" name=\"magnifierSize\" id=\"magnifierSize1\" class=\"need_beautify radio\" value=\"original\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"magnifierSize1\"> ${lang.transl('_')} </label>\n      &nbsp;\n      <input type=\"radio\" name=\"magnifierSize\" id=\"magnifierSize2\" class=\"need_beautify radio\" value=\"regular\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"magnifierSize2\"> ${lang.transl('_')} </label>\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"31\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}</span>\n      <input type=\"text\" name=\"dateFormat\" class=\"setinput_style1 blue\" style=\"width:250px;\" value=\"YYYY-MM-DD\">\n      <button type=\"button\" class=\"gray1 textButton showDateTip\">${lang.transl('_')}</button>\n      </p>\n      <p class=\"dateFormatTip tip\" style=\"display:none\">\n      <span>${lang.transl('_')}</span>\n      <br>\n      <span class=\"blue\">YYYY</span> <span>2021</span>\n      <br>\n      <span class=\"blue\">YY</span> <span>21</span>\n      <br>\n      <span class=\"blue\">MM</span> <span>04</span>\n      <br>\n      <span class=\"blue\">MMM</span> <span>Apr</span>\n      <br>\n      <span class=\"blue\">MMMM</span> <span>April</span>\n      <br>\n      <span class=\"blue\">DD</span> <span>30</span>\n      <br>\n      <span class=\"blue\">hh</span> <span>06</span>\n      <br>\n      <span class=\"blue\">mm</span> <span>40</span>\n      <br>\n      <span class=\"blue\">ss</span> <span>08</span>\n      <br>\n      </p>\n\n      <p class=\"option\" data-no=\"36\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}</span>\n      <input type=\"radio\" name=\"theme\" id=\"theme1\" class=\"need_beautify radio\" value=\"auto\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"theme1\">${lang.transl('_')}</label>\n      &nbsp;\n      <input type=\"radio\" name=\"theme\" id=\"theme2\" class=\"need_beautify radio\" value=\"white\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"theme2\">White</label>\n      &nbsp;\n      <input type=\"radio\" name=\"theme\" id=\"theme3\" class=\"need_beautify radio\" value=\"dark\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"theme3\">Dark</label>\n      </p>\n\n      <p class=\"option\" data-no=\"41\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')} </span>\n      <input type=\"checkbox\" name=\"bgDisplay\" class=\"need_beautify checkbox_switch\">\n      <span class=\"beautify_switch\"></span>\n\n      <span class=\"subOptionWrap\" data-show=\"bgDisplay\">\n\n      <button class=\"textButton gray1\" type=\"button\" id=\"selectBG\">${lang.transl('_')}</button>\n      <button class=\"textButton gray1\" type=\"button\" id=\"clearBG\">${lang.transl('_')}</button>\n      \n      &nbsp;\n      <span>${lang.transl('_')}&nbsp;</span>\n      <input type=\"radio\" name=\"bgPositionY\" id=\"bgPosition1\" class=\"need_beautify radio\" value=\"center\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"bgPosition1\">${lang.transl('_')}</label>\n      <input type=\"radio\" name=\"bgPositionY\" id=\"bgPosition2\" class=\"need_beautify radio\" value=\"top\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"bgPosition2\">${lang.transl('_')}</label>\n\n      &nbsp;\n      <span>${lang.transl('_')}&nbsp;</span>\n      <input name=\"bgOpacity\" type=\"range\" />\n      </span>\n      </p>\n\n      <p class=\"option\" data-no=\"32\">\n      <span class=\"settingNameStyle1\">Language</span>\n      <input type=\"radio\" name=\"userSetLang\" id=\"userSetLang1\" class=\"need_beautify radio\" value=\"auto\" checked>\n      <span class=\"beautify_radio\"></span>\n      <label for=\"userSetLang1\">${lang.transl('_')}</label>\n      &nbsp;\n      <input type=\"radio\" name=\"userSetLang\" id=\"userSetLang2\" class=\"need_beautify radio\" value=\"zh-cn\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"userSetLang2\"></label>\n      &nbsp;\n      <input type=\"radio\" name=\"userSetLang\" id=\"userSetLang3\" class=\"need_beautify radio\" value=\"zh-tw\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"userSetLang3\"></label>\n      &nbsp;\n      <input type=\"radio\" name=\"userSetLang\" id=\"userSetLang4\" class=\"need_beautify radio\" value=\"ja\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"userSetLang4\"></label>\n      &nbsp;\n      <input type=\"radio\" name=\"userSetLang\" id=\"userSetLang5\" class=\"need_beautify radio\" value=\"en\">\n      <span class=\"beautify_radio\"></span>\n      <label for=\"userSetLang5\">English</label>\n      &nbsp;\n      </p>\n\n      <p class=\"option\" data-no=\"37\">\n      <span class=\"settingNameStyle1\">${lang.transl('_')}</span>\n      <button class=\"textButton gray1\" type=\"button\" id=\"exportSettings\">${lang.transl('_')}</button>\n      <button class=\"textButton gray1\" type=\"button\" id=\"importSettings\">${lang.transl('_')}</button>\n      <button class=\"textButton gray1\" type=\"button\" id=\"resetSettings\">${lang.transl('_')}</button>\n      </p>\n\n      <div class=\"centerWrap_btns\">\n        <slot data-name=\"otherBtns\"></slot>\n      </div>\n    </div>\n</form>`;\r\n","import { EVT } from '../EVT';\r\nimport { pageType } from '../PageType';\r\nimport { settings, setSetting } from './Settings';\r\nimport { DateFormat } from '../utils/DateFormat';\r\nclass FormSettings {\r\n    constructor(form) {\r\n        this.inputFileds = {\r\n            checkbox: [\r\n                'downType0',\r\n                'downType1',\r\n                'downType2',\r\n                'downType3',\r\n                'downAllAges',\r\n                'downR18',\r\n                'downR18G',\r\n                'downSingleImg',\r\n                'downMultiImg',\r\n                'downColorImg',\r\n                'downBlackWhiteImg',\r\n                'downNotBookmarked',\r\n                'downBookmarked',\r\n                'firstFewImagesSwitch',\r\n                'saveNovelMeta',\r\n                'BMKNumSwitch',\r\n                'BMKNumAverageSwitch',\r\n                'setWHSwitch',\r\n                'ratioSwitch',\r\n                'postDate',\r\n                'idRangeSwitch',\r\n                'needTagSwitch',\r\n                'notNeedTagSwitch',\r\n                'magnifier',\r\n                'tagNameToFileName',\r\n                'noSerialNo',\r\n                'createFolderByTag',\r\n                'workDir',\r\n                'r18Folder',\r\n                'sizeSwitch',\r\n                'quietDownload',\r\n                'previewResult',\r\n                'deduplication',\r\n                'fileNameLengthLimitSwitch',\r\n                'bmkAfterDL',\r\n                'userBlockList',\r\n                'blockTagsForSpecificUser',\r\n                'bgDisplay',\r\n                'createFolderByType',\r\n                'createFolderByTypeIllust',\r\n                'createFolderByTypeManga',\r\n                'createFolderByTypeUgoira',\r\n                'createFolderByTypeNovel',\r\n            ],\r\n            text: [\r\n                'setWantPage',\r\n                'firstFewImages',\r\n                'convertUgoiraThread',\r\n                'BMKNumMin',\r\n                'BMKNumMax',\r\n                'BMKNumAverage',\r\n                'setWidth',\r\n                'setHeight',\r\n                'userRatio',\r\n                'idRangeInput',\r\n                'needTag',\r\n                'notNeedTag',\r\n                'userSetName',\r\n                'workDirFileNumber',\r\n                'r18FolderName',\r\n                'sizeMin',\r\n                'sizeMax',\r\n                'downloadThread',\r\n                'fileNameLengthLimit',\r\n                'dateFormat',\r\n                'blockList',\r\n                'bgOpacity',\r\n            ],\r\n            radio: [\r\n                'ugoiraSaveAs',\r\n                'novelSaveAs',\r\n                'widthHeightLimit',\r\n                'setWidthAndOr',\r\n                'ratio',\r\n                'idRange',\r\n                'magnifierSize',\r\n                'workDirName',\r\n                'dupliStrategy',\r\n                'imageSize',\r\n                'userSetLang',\r\n                'restrict',\r\n                'widthTag',\r\n                'needTagMode',\r\n                'theme',\r\n                'bgPositionY',\r\n            ],\r\n            textarea: ['createFolderTagList'],\r\n            datetime: ['postDateStart', 'postDateEnd'],\r\n        };\r\n        this.form = form;\r\n        this.bindEvents();\r\n        this.restoreFormSettings();\r\n        this.ListenChange();\r\n    }\r\n    bindEvents() {\r\n        // /\r\n        window.addEventListener(EVT.list.pageSwitchedTypeChange, () => {\r\n            this.restoreWantPage();\r\n        });\r\n    }\r\n    // \r\n    // \r\n    ListenChange() {\r\n        for (const name of this.inputFileds.text) {\r\n            // setWantPage  wantPageArr\r\n            if (name === 'setWantPage') {\r\n                this.form.setWantPage.addEventListener('change', () => {\r\n                    const temp = Array.from(settings.wantPageArr);\r\n                    temp[pageType.type] = Number.parseInt(this.form.setWantPage.value);\r\n                    setSetting('wantPageArr', temp);\r\n                });\r\n                continue;\r\n            }\r\n            //  focus \r\n            if (name === 'userSetName') {\r\n                this.form.userSetName.addEventListener('focus', (ev) => {\r\n                    setSetting(name, this.form.userSetName.value);\r\n                });\r\n            }\r\n            this.saveTextInput(name);\r\n        }\r\n        for (const name of this.inputFileds.textarea) {\r\n            this.saveTextInput(name);\r\n        }\r\n        for (const name of this.inputFileds.datetime) {\r\n            this.saveTextInput(name);\r\n        }\r\n        for (const name of this.inputFileds.radio) {\r\n            this.saveRadio(name);\r\n        }\r\n        for (const name of this.inputFileds.checkbox) {\r\n            this.saveCheckBox(name);\r\n        }\r\n    }\r\n    // \r\n    restoreFormSettings() {\r\n        for (const name of this.inputFileds.text) {\r\n            // setWantPage  wantPageArr \r\n            if (name === 'setWantPage') {\r\n                this.restoreWantPage();\r\n                continue;\r\n            }\r\n            this.restoreString(name);\r\n        }\r\n        for (const name of this.inputFileds.radio) {\r\n            this.restoreString(name);\r\n        }\r\n        for (const name of this.inputFileds.textarea) {\r\n            this.restoreString(name);\r\n        }\r\n        for (const name of this.inputFileds.checkbox) {\r\n            this.restoreBoolean(name);\r\n        }\r\n        for (const name of this.inputFileds.datetime) {\r\n            this.restoreDate(name);\r\n        }\r\n    }\r\n    // ---------------------\r\n    //  change  value\r\n    saveTextInput(name) {\r\n        const el = this.form[name];\r\n        el.addEventListener('change', () => {\r\n            setSetting(name, el.value);\r\n            setSetting('setWidthAndOr', '');\r\n        });\r\n    }\r\n    //  click  checked\r\n    saveCheckBox(name) {\r\n        const el = this.form[name];\r\n        el.addEventListener('click', () => {\r\n            setSetting(name, el.checked);\r\n        });\r\n    }\r\n    //  click  value\r\n    saveRadio(name) {\r\n        const radios = this.form[name];\r\n        for (const radio of radios) {\r\n            radio.addEventListener('click', () => {\r\n                setSetting(name, radio.value);\r\n            });\r\n        }\r\n    }\r\n    //  Boolean \r\n    restoreBoolean(name) {\r\n        if (settings[name] !== undefined) {\r\n            this.form[name].checked = settings[name];\r\n        }\r\n    }\r\n    //  string \r\n    restoreString(name) {\r\n        if (settings[name] !== undefined) {\r\n            this.form[name].value = settings[name].toString();\r\n        }\r\n    }\r\n    // \r\n    restoreDate(name) {\r\n        if (settings[name] !== undefined) {\r\n            //  input \r\n            const date = settings[name];\r\n            this.form[name].value = DateFormat.format(date, 'YYYY-MM-DDThh:mm');\r\n        }\r\n    }\r\n    // /\r\n    restoreWantPage() {\r\n        const want = settings.wantPageArr[pageType.type];\r\n        if (want !== undefined) {\r\n            this.form.setWantPage.value = want.toString();\r\n        }\r\n    }\r\n}\r\nexport { FormSettings };\r\n","import { settings, setSetting } from './Settings';\r\nimport { secretSignal } from '../utils/SecretSignal';\r\nimport { log } from '../Log';\r\nimport { toast } from '../Toast';\r\n// \r\nclass InvisibleSettings {\r\n    constructor() {\r\n        this.list = [\r\n            {\r\n                name: 'createFolderBySl',\r\n                code: 'switchsl',\r\n            },\r\n            {\r\n                name: 'createFolderBySl',\r\n                code: 'kaiguansl',\r\n            },\r\n            {\r\n                name: 'downloadUgoiraFirst',\r\n                code: 'dlugoirafirst',\r\n            },\r\n            {\r\n                name: 'downloadUgoiraFirst',\r\n                code: 'qw111',\r\n            },\r\n            {\r\n                name: 'mouseEnterSwitchTabbar',\r\n                code: 'mouseenter',\r\n            },\r\n        ];\r\n        this.register();\r\n    }\r\n    register() {\r\n        for (const item of this.list) {\r\n            secretSignal.register(item.code, () => {\r\n                this.onChange(item.name);\r\n            });\r\n        }\r\n    }\r\n    onChange(name) {\r\n        const nowValue = settings[name];\r\n        if (typeof nowValue !== 'boolean') {\r\n            return;\r\n        }\r\n        // \r\n        const newValue = !settings[name];\r\n        setSetting(name, newValue);\r\n        // \r\n        if (settings[name]) {\r\n            const msg = name + ' on';\r\n            log.success(msg);\r\n            toast.success(msg);\r\n        }\r\n        else {\r\n            const msg = name + ' off';\r\n            log.warning(msg);\r\n            toast.warning(msg);\r\n        }\r\n    }\r\n}\r\nnew InvisibleSettings();\r\n","import { form } from './Form';\r\n// \r\n// /\r\nclass Options {\r\n    constructor() {\r\n        this.allOption = form.querySelectorAll('.option');\r\n        // /\r\n        const wantPageOption = this.getOption(1);\r\n        this.wantPageEls = {\r\n            text: wantPageOption.querySelector('.setWantPageTip1'),\r\n            rangTip: wantPageOption.querySelector('.setWantPageTip2'),\r\n            input: wantPageOption.querySelector('.setWantPage'),\r\n        };\r\n    }\r\n    // \r\n    getOption(no) {\r\n        for (const option of this.allOption) {\r\n            if (option.dataset.no === no.toString()) {\r\n                return option;\r\n            }\r\n        }\r\n        throw `Not found this option: ${no}`;\r\n    }\r\n    // \r\n    setOptionDisplay(no, display) {\r\n        for (const number of no) {\r\n            this.getOption(number).style.display = display;\r\n        }\r\n    }\r\n    // \r\n    // \r\n    showAllOption() {\r\n        for (const el of this.allOption) {\r\n            el.style.display = 'block';\r\n        }\r\n    }\r\n    // \r\n    hideOption(no) {\r\n        this.setOptionDisplay(no, 'none');\r\n    }\r\n    // \r\n    showOption(no) {\r\n        this.setOptionDisplay(no, 'block');\r\n    }\r\n    //  / \r\n    setWantPageTip(arg) {\r\n        this.wantPageEls.text.textContent = arg.text;\r\n        this.wantPageEls.text.dataset.tip = arg.tip;\r\n        this.wantPageEls.rangTip.textContent = arg.rangTip;\r\n    }\r\n}\r\nconst options = new Options();\r\nexport { options };\r\n","import { EVT } from '../EVT';\r\nimport { Tools } from '../Tools';\r\nimport { lang } from '../Lang';\r\nimport { theme } from '../Theme';\r\nimport { settings, setSetting } from './Settings';\r\nimport { toast } from '../Toast';\r\n// \r\nclass SaveNamingRule {\r\n    constructor(ruleInput) {\r\n        this.limit = 20; // \r\n        this._show = false; // \r\n        this.html = `\n  <div class=\"saveNamingRuleWrap\">\n  <button class=\"nameSave textButton has_tip\" type=\"button\" data-tip=\"${lang.transl('_', this.limit.toString())}\">${lang.transl('_')}</button>\n  <button class=\"nameLoad textButton\" type=\"button\">${lang.transl('_')}</button>\n  <ul class=\"namingRuleList\"></ul>\n  </div>`;\r\n        this.ruleInput = ruleInput;\r\n        Tools.clearSlot('saveNamingRule');\r\n        const wrap = Tools.useSlot('saveNamingRule', this.html);\r\n        theme.register(wrap);\r\n        this.saveBtn = wrap.querySelector('button.nameSave');\r\n        this.loadBtn = wrap.querySelector('button.nameLoad');\r\n        this.listWrap = wrap.querySelector('ul.namingRuleList');\r\n        this.createList();\r\n        this.bindEvents();\r\n    }\r\n    set show(boolean) {\r\n        this._show = boolean;\r\n        boolean ? this.showListWrap() : this.hideListWrap();\r\n    }\r\n    get show() {\r\n        return this._show;\r\n    }\r\n    bindEvents() {\r\n        this.saveBtn.addEventListener('click', () => {\r\n            this.add(this.ruleInput.value);\r\n        });\r\n        this.loadBtn.addEventListener('click', () => {\r\n            this.show = !this.show;\r\n        });\r\n        this.listWrap.addEventListener('mouseleave', () => {\r\n            this.show = false;\r\n        });\r\n        // \r\n        window.addEventListener(EVT.list.settingChange, (ev) => {\r\n            const data = ev.detail.data;\r\n            if (data.name === 'namingRuleList') {\r\n                this.createList();\r\n            }\r\n        });\r\n    }\r\n    add(rule) {\r\n        if (settings.namingRuleList.length === this.limit) {\r\n            this.delete(0);\r\n        }\r\n        // \r\n        if (!settings.namingRuleList.includes(rule)) {\r\n            const list = Array.from(settings.namingRuleList);\r\n            list.push(rule);\r\n            setSetting('namingRuleList', list);\r\n        }\r\n        toast.success(lang.transl('_'));\r\n    }\r\n    delete(index) {\r\n        const list = Array.from(settings.namingRuleList);\r\n        list.splice(index, 1);\r\n        setSetting('namingRuleList', list);\r\n    }\r\n    select(rule) {\r\n        this.ruleInput.value = rule;\r\n        setSetting('userSetName', rule);\r\n    }\r\n    createList() {\r\n        const htmlArr = [];\r\n        for (let i = 0; i < settings.namingRuleList.length; i++) {\r\n            const html = `<li>\n      <span class=\"rule\">${settings.namingRuleList[i]}</span>\n      <button class=\"delete textButton\" type=\"button\" data-index=\"${i}\"></button>\n    </li>`;\r\n            htmlArr.push(html);\r\n        }\r\n        if (settings.namingRuleList.length === 0) {\r\n            htmlArr.push(`<li><i>&nbsp;&nbsp;&nbsp;&nbsp;no data</i></li>`);\r\n        }\r\n        this.listWrap.innerHTML = htmlArr.join('');\r\n        const ruleEls = this.listWrap.querySelectorAll('.rule');\r\n        for (const el of ruleEls) {\r\n            el.addEventListener('click', () => {\r\n                this.select(el.textContent);\r\n                this.show = false;\r\n            });\r\n        }\r\n        const deleteEls = this.listWrap.querySelectorAll('.delete');\r\n        for (const el of deleteEls) {\r\n            el.addEventListener('click', () => {\r\n                const index = parseInt(el.dataset.index);\r\n                this.delete(index);\r\n            });\r\n        }\r\n    }\r\n    showListWrap() {\r\n        this.listWrap.style.display = 'block';\r\n    }\r\n    hideListWrap() {\r\n        this.listWrap.style.display = 'none';\r\n    }\r\n}\r\nexport { SaveNamingRule };\r\n","// settings \r\n//  settings  EVT.list.settingChange  {name:string, value:any}\r\n//  settings  localStorage  settings  localStorage \r\nimport { EVT } from '../EVT';\r\nimport { Utils } from '../utils/Utils';\r\nimport { convertOldSettings } from './ConvertOldSettings';\r\nimport { msgBox } from '../MsgBox';\r\nimport { Config } from '../config/Config';\r\nimport { secretSignal } from '../utils/SecretSignal';\r\nimport { toast } from '../Toast';\r\nclass Settings {\r\n    constructor() {\r\n        // \r\n        this.defaultSettings = {\r\n            setWantPage: -1,\r\n            wantPageArr: [\r\n                -1,\r\n                -1,\r\n                -1,\r\n                -1,\r\n                -1,\r\n                1000,\r\n                -1,\r\n                500,\r\n                -1,\r\n                1000,\r\n                100,\r\n                -1,\r\n                100,\r\n                -1,\r\n                -1,\r\n                1000,\r\n                100,\r\n                100,\r\n                100,\r\n                100,\r\n                -1,\r\n            ],\r\n            firstFewImagesSwitch: false,\r\n            firstFewImages: 1,\r\n            downType0: true,\r\n            downType1: true,\r\n            downType2: true,\r\n            downType3: true,\r\n            downAllAges: true,\r\n            downR18: true,\r\n            downR18G: true,\r\n            downSingleImg: true,\r\n            downMultiImg: true,\r\n            downColorImg: true,\r\n            downBlackWhiteImg: true,\r\n            downNotBookmarked: true,\r\n            downBookmarked: true,\r\n            ugoiraSaveAs: 'webm',\r\n            convertUgoiraThread: 1,\r\n            needTag: [],\r\n            notNeedTag: [],\r\n            quietDownload: true,\r\n            downloadThread: 5,\r\n            userSetName: '{id}',\r\n            namingRuleList: [],\r\n            tagNameToFileName: false,\r\n            workDir: false,\r\n            workDirFileNumber: 1,\r\n            workDirName: 'id',\r\n            showOptions: true,\r\n            postDate: false,\r\n            postDateStart: 946684800000,\r\n            postDateEnd: 4102444800000,\r\n            previewResult: true,\r\n            BMKNumSwitch: false,\r\n            BMKNumMin: 0,\r\n            BMKNumMax: Config.BookmarkCountLimit,\r\n            BMKNumAverageSwitch: false,\r\n            BMKNumAverage: 600,\r\n            setWHSwitch: false,\r\n            widthHeightLimit: '>=',\r\n            setWidthAndOr: '&',\r\n            setWidth: 0,\r\n            setHeight: 0,\r\n            ratioSwitch: false,\r\n            ratio: 'horizontal',\r\n            userRatio: 1.4,\r\n            idRangeSwitch: false,\r\n            idRangeInput: 0,\r\n            idRange: '>',\r\n            needTagSwitch: false,\r\n            notNeedTagSwitch: false,\r\n            noSerialNo: false,\r\n            filterBlackWhite: false,\r\n            sizeSwitch: false,\r\n            sizeMin: 0,\r\n            sizeMax: 100,\r\n            novelSaveAs: 'txt',\r\n            saveNovelMeta: false,\r\n            deduplication: false,\r\n            dupliStrategy: 'loose',\r\n            fileNameLengthLimitSwitch: false,\r\n            fileNameLengthLimit: 200,\r\n            imageSize: 'original',\r\n            dateFormat: 'YYYY-MM-DD',\r\n            userSetLang: 'auto',\r\n            bmkAfterDL: false,\r\n            widthTag: 'yes',\r\n            restrict: 'no',\r\n            widthTagBoolean: true,\r\n            restrictBoolean: false,\r\n            userBlockList: false,\r\n            blockList: [],\r\n            theme: 'auto',\r\n            needTagMode: 'all',\r\n            r18Folder: false,\r\n            r18FolderName: '[R-18&R-18G]',\r\n            blockTagsForSpecificUser: false,\r\n            blockTagsForSpecificUserShowList: true,\r\n            blockTagsForSpecificUserList: [],\r\n            magnifier: true,\r\n            magnifierSize: 'regular',\r\n            bgDisplay: false,\r\n            bgOpacity: 50,\r\n            bgPositionY: 'center',\r\n            createFolderByType: false,\r\n            createFolderByTypeIllust: false,\r\n            createFolderByTypeManga: false,\r\n            createFolderByTypeUgoira: false,\r\n            createFolderByTypeNovel: false,\r\n            createFolderByTag: false,\r\n            createFolderTagList: [],\r\n            createFolderBySl: false,\r\n            downloadUgoiraFirst: false,\r\n            mouseEnterSwitchTabbar: true,\r\n        };\r\n        this.allSettingKeys = Object.keys(this.defaultSettings);\r\n        this.floatNumberKey = ['userRatio', 'sizeMin', 'sizeMax'];\r\n        this.numberArrayKey = ['wantPageArr'];\r\n        this.stringArrayKey = [\r\n            'namingRuleList',\r\n            'blockList',\r\n            'needTag',\r\n            'notNeedTag',\r\n            'createFolderTagList',\r\n        ];\r\n        // \r\n        this.settings = Utils.deepCopy(this.defaultSettings);\r\n        this.restore();\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        // \r\n        window.addEventListener(EVT.list.settingChange, () => {\r\n            localStorage.setItem(Config.settingStoreName, JSON.stringify(this.settings));\r\n        });\r\n        window.addEventListener(EVT.list.resetSettings, () => {\r\n            this.reset();\r\n        });\r\n        window.addEventListener(EVT.list.exportSettings, () => {\r\n            this.exportSettings();\r\n        });\r\n        window.addEventListener(EVT.list.importSettings, () => {\r\n            this.importSettings();\r\n        });\r\n        // /\r\n        const codes = ['onlyugoira', 'qw222'];\r\n        for (const code of codes) {\r\n            secretSignal.register(code, () => {\r\n                // \r\n                // \r\n                if (this.settings.downType2 &&\r\n                    !this.settings.downType0 &&\r\n                    !this.settings.downType1 &&\r\n                    !this.settings.downType3) {\r\n                    this.settings.downType0 = true;\r\n                    this.settings.downType1 = true;\r\n                    this.settings.downType3 = true;\r\n                    // \r\n                    this.setSetting('downType0', true);\r\n                    toast.warning('onlyUgoira off');\r\n                }\r\n                else {\r\n                    this.settings.downType0 = false;\r\n                    this.settings.downType1 = false;\r\n                    this.settings.downType2 = true;\r\n                    this.settings.downType3 = false;\r\n                    this.setSetting('downType2', true);\r\n                    toast.success('onlyUgoira on');\r\n                }\r\n            });\r\n        }\r\n    }\r\n    // \r\n    restore() {\r\n        let restoreData = this.defaultSettings;\r\n        const savedSettings = localStorage.getItem(Config.settingStoreName);\r\n        if (savedSettings) {\r\n            restoreData = JSON.parse(savedSettings);\r\n        }\r\n        this.assignSettings(restoreData);\r\n    }\r\n    //  settings \r\n    // \r\n    // 1.  number  stringsetSetting \r\n    // 2. \r\n    assignSettings(data) {\r\n        const origin = Utils.deepCopy(data);\r\n        for (const [key, value] of Object.entries(origin)) {\r\n            this.setSetting(key, value);\r\n        }\r\n    }\r\n    exportSettings() {\r\n        const blob = Utils.json2Blob(this.settings);\r\n        const url = URL.createObjectURL(blob);\r\n        Utils.downloadFile(url, Config.appName + ` Settings.json`);\r\n    }\r\n    async importSettings() {\r\n        const loadedJSON = (await Utils.loadJSONFile().catch((err) => {\r\n            return msgBox.error(err);\r\n        }));\r\n        if (!loadedJSON) {\r\n            return;\r\n        }\r\n        // \r\n        if (loadedJSON.downloadThread === undefined) {\r\n            return msgBox.error('Format error!');\r\n        }\r\n        // \r\n        this.reset(loadedJSON);\r\n    }\r\n    // \r\n    // \r\n    reset(data) {\r\n        this.assignSettings(data ? data : this.defaultSettings);\r\n        EVT.fire('resetSettingsEnd');\r\n    }\r\n    tipError(key) {\r\n        msgBox.error(`${key}: Invalid value`);\r\n    }\r\n    // \r\n    // \r\n    // \r\n    // 1.  string  'a,b,c' string[]  ['a','b','c']\r\n    // 2.  string[] string  'a,b,c' string[]\r\n    setSetting(key, value) {\r\n        if (!this.allSettingKeys.includes(key)) {\r\n            return;\r\n        }\r\n        const keyType = typeof this.defaultSettings[key];\r\n        const valueType = typeof value;\r\n        //  string \r\n        if (valueType === 'string') {\r\n            value = convertOldSettings.convert(key, value);\r\n        }\r\n        // \r\n        if (keyType === 'string' && valueType !== 'string') {\r\n            value = value.toString();\r\n        }\r\n        if (keyType === 'number' && valueType !== 'number') {\r\n            //  number \r\n            if (key === 'postDateStart' || key == 'postDateEnd') {\r\n                if (valueType === 'string') {\r\n                    if (value === '') {\r\n                        // \r\n                        value = this.defaultSettings[key];\r\n                    }\r\n                    else {\r\n                        // \r\n                        const date = new Date(value);\r\n                        value = date.getTime();\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                //  number \r\n                if (this.floatNumberKey.includes(key)) {\r\n                    value = Number.parseFloat(value);\r\n                }\r\n                else {\r\n                    value = Number.parseInt(value);\r\n                }\r\n            }\r\n            if (isNaN(value)) {\r\n                return this.tipError(key);\r\n            }\r\n        }\r\n        if (keyType === 'boolean' && valueType !== 'boolean') {\r\n            value = !!value;\r\n        }\r\n        if (Array.isArray(this.defaultSettings[key])) {\r\n            if (this.stringArrayKey.includes(key)) {\r\n                //  string[]\r\n                if (valueType === 'string') {\r\n                    value = Utils.string2array(value);\r\n                }\r\n            }\r\n            if (this.numberArrayKey.includes(key)) {\r\n                //  number[]\r\n                if (Array.isArray(value)) {\r\n                    value = value.map((val) => {\r\n                        if (typeof val !== 'number') {\r\n                            return Number(val);\r\n                        }\r\n                        else {\r\n                            return val;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        // \r\n        if (key === 'firstFewImages' && value < 1) {\r\n            // value = this.defaultSettings[key]\r\n            return;\r\n        }\r\n        // \r\n        ;\r\n        this.settings[key] = value;\r\n        // \r\n        if (key === 'widthTag') {\r\n            this.settings.widthTagBoolean = value === 'yes';\r\n        }\r\n        if (key === 'restrict') {\r\n            this.settings.restrictBoolean = value === 'yes';\r\n        }\r\n        // \r\n        EVT.fire('settingChange', { name: key, value: value });\r\n    }\r\n}\r\nconst self = new Settings();\r\nconst settings = self.settings;\r\nconst setSetting = self.setSetting.bind(self);\r\nexport { settings, setSetting };\r\n","import { store } from './Store';\r\nimport { Utils } from '../utils/Utils';\r\n//  id \r\n//  id  id  id \r\nclass IdListWithPageNo {\r\n    constructor() {\r\n        //  id  flag \r\n        this.allList = {};\r\n    }\r\n    // \r\n    add(flag, idData, page) {\r\n        if (this.allList[flag] === undefined) {\r\n            this.allList[flag] = [];\r\n        }\r\n        this.allList[flag].push({\r\n            id: idData.id,\r\n            type: idData.type,\r\n            page: page,\r\n        });\r\n    }\r\n    // \r\n    clear(flag) {\r\n        if (this.allList[flag]) {\r\n            delete this.allList[flag];\r\n        }\r\n    }\r\n    // \r\n    sort(flag) {\r\n        if (this.allList[flag]) {\r\n            this.allList[flag].sort(Utils.sortByProperty('page', 'asc'));\r\n        }\r\n    }\r\n    //  store.idList \r\n    // \r\n    // \r\n    store(flag) {\r\n        if (this.allList[flag]) {\r\n            this.sort(flag);\r\n            for (const data of this.allList[flag]) {\r\n                store.idList.push({\r\n                    id: data.id,\r\n                    type: data.type,\r\n                });\r\n            }\r\n            this.clear(flag);\r\n        }\r\n    }\r\n    //  undefined\r\n    get(flag) {\r\n        return this.allList[flag];\r\n    }\r\n}\r\nconst idListWithPageNo = new IdListWithPageNo();\r\nexport { idListWithPageNo };\r\n","import { API } from '../API';\r\nimport { filter } from '../filter/Filter';\r\nimport { settings } from '../setting/Settings';\r\nimport { store } from './Store';\r\nimport { Tools } from '../Tools';\r\n// \r\nclass SaveArtworkData {\r\n    async save(data) {\r\n        // \r\n        const body = data.body;\r\n        const fullWidth = body.width; // \r\n        const fullHeight = body.height; // \r\n        const bmk = body.bookmarkCount; // \r\n        const tags = Tools.extractTags(data); // tag \r\n        let tagsWithTransl = Tools.extractTags(data, 'both'); //  tag  tag\r\n        let tagsTranslOnly = Tools.extractTags(data, 'transl'); //  tag \r\n        const filterOpt = {\r\n            createDate: body.createDate,\r\n            id: body.id,\r\n            workType: body.illustType,\r\n            tags: tagsWithTransl,\r\n            pageCount: body.pageCount,\r\n            bookmarkCount: bmk,\r\n            bookmarkData: body.bookmarkData,\r\n            width: fullWidth,\r\n            height: fullHeight,\r\n            mini: body.urls.mini,\r\n            userId: body.userId,\r\n            xRestrict: body.xRestrict,\r\n        };\r\n        // \r\n        // \r\n        if (await filter.check(filterOpt)) {\r\n            const idNum = parseInt(body.id);\r\n            const title = body.title; // \r\n            const userId = body.userId; // id\r\n            const user = body.userName; // \r\n            const pageCount = body.pageCount;\r\n            const bookmarked = !!body.bookmarkData;\r\n            // \r\n            const rankData = store.getRankList(body.id);\r\n            const rank = rankData ? rankData : null;\r\n            const seriesTitle = body.seriesNavData ? body.seriesNavData.title : '';\r\n            const seriesOrder = body.seriesNavData\r\n                ? '#' + body.seriesNavData.order\r\n                : '';\r\n            // \r\n            if (body.illustType === 0 || body.illustType === 1) {\r\n                // \r\n                const imgUrl = body.urls.original; //  URL\r\n                const tempExt = imgUrl.split('.');\r\n                const ext = tempExt[tempExt.length - 1];\r\n                // \r\n                store.addResult({\r\n                    id: body.id,\r\n                    idNum: idNum,\r\n                    //  url\r\n                    thumb: body.pageCount > 1\r\n                        ? Tools.convertArtworkThumbURL(body.urls.thumb, 0)\r\n                        : body.urls.thumb,\r\n                    pageCount: pageCount,\r\n                    original: imgUrl,\r\n                    regular: body.urls.regular,\r\n                    small: body.urls.small,\r\n                    title: title,\r\n                    tags: tags,\r\n                    tagsWithTransl: tagsWithTransl,\r\n                    tagsTranslOnly: tagsTranslOnly,\r\n                    user: user,\r\n                    userId: userId,\r\n                    fullWidth: fullWidth,\r\n                    fullHeight: fullHeight,\r\n                    ext: ext,\r\n                    bmk: bmk,\r\n                    bookmarked: bookmarked,\r\n                    date: body.createDate,\r\n                    type: body.illustType,\r\n                    rank: rank,\r\n                    seriesTitle: seriesTitle,\r\n                    seriesOrder: seriesOrder,\r\n                    viewCount: body.viewCount,\r\n                    likeCount: body.likeCount,\r\n                    commentCount: body.commentCount,\r\n                    xRestrict: body.xRestrict,\r\n                    sl: body.sl,\r\n                });\r\n            }\r\n            else if (body.illustType === 2) {\r\n                // \r\n                // \r\n                const meta = await API.getUgoiraMeta(body.id);\r\n                // \r\n                const ugoiraInfo = {\r\n                    frames: meta.body.frames,\r\n                    mime_type: meta.body.mime_type,\r\n                };\r\n                const ext = settings.ugoiraSaveAs;\r\n                store.addResult({\r\n                    id: body.id,\r\n                    idNum: idNum,\r\n                    thumb: body.urls.thumb,\r\n                    pageCount: pageCount,\r\n                    original: meta.body.originalSrc,\r\n                    regular: meta.body.src,\r\n                    small: meta.body.src,\r\n                    title: title,\r\n                    tags: tags,\r\n                    tagsWithTransl: tagsWithTransl,\r\n                    tagsTranslOnly: tagsTranslOnly,\r\n                    user: user,\r\n                    userId: userId,\r\n                    fullWidth: fullWidth,\r\n                    fullHeight: fullHeight,\r\n                    ext: ext,\r\n                    bmk: bmk,\r\n                    bookmarked: bookmarked,\r\n                    date: body.createDate,\r\n                    type: body.illustType,\r\n                    rank: rank,\r\n                    ugoiraInfo: ugoiraInfo,\r\n                    seriesTitle: seriesTitle,\r\n                    seriesOrder: seriesOrder,\r\n                    viewCount: body.viewCount,\r\n                    likeCount: body.likeCount,\r\n                    commentCount: body.commentCount,\r\n                    xRestrict: body.xRestrict,\r\n                    sl: body.sl,\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\nconst saveArtworkData = new SaveArtworkData();\r\nexport { saveArtworkData };\r\n","import { filter } from '../filter/Filter';\r\nimport { store } from './Store';\r\nimport { settings } from '../setting/Settings';\r\nimport { Tools } from '../Tools';\r\n// \r\nclass SaveNovelData {\r\n    async save(data) {\r\n        //  illustType   illustType  3\r\n        const illustType = 3;\r\n        // \r\n        const body = data.body;\r\n        const bmk = body.bookmarkCount; // \r\n        const tags = Tools.extractTags(data); // tag \r\n        // \r\n        const filterOpt = {\r\n            createDate: body.createDate,\r\n            id: body.id,\r\n            workType: illustType,\r\n            tags: tags,\r\n            bookmarkCount: bmk,\r\n            bookmarkData: body.bookmarkData,\r\n            userId: body.userId,\r\n            xRestrict: body.xRestrict,\r\n        };\r\n        // \r\n        if (await filter.check(filterOpt)) {\r\n            const id = body.id;\r\n            const idNum = parseInt(id);\r\n            const title = body.title;\r\n            const userId = body.userId;\r\n            const user = body.userName;\r\n            const bookmarked = !!body.bookmarkData;\r\n            // \r\n            const rankData = store.getRankList(id);\r\n            const rank = rankData ? rankData : null;\r\n            // \r\n            const seriesTitle = body.seriesNavData ? body.seriesNavData.title : '';\r\n            const seriesOrder = body.seriesNavData\r\n                ? '#' + body.seriesNavData.order\r\n                : '';\r\n            // \r\n            let meta = '';\r\n            let metaArr = [];\r\n            const pageUrl = `https://www.pixiv.net/novel/show.php?id=${id}`;\r\n            const tagsA = [];\r\n            for (const tag of tags) {\r\n                tagsA.push('#' + tag);\r\n            }\r\n            metaArr.push(title, user, pageUrl, body.description, tagsA.join('\\n'));\r\n            meta = metaArr.join('\\n\\n') + '\\n\\n\\n';\r\n            // \r\n            store.addResult({\r\n                id: id,\r\n                idNum: idNum,\r\n                thumb: body.coverUrl || undefined,\r\n                title: title,\r\n                tags: tags,\r\n                tagsWithTransl: tags,\r\n                tagsTranslOnly: tags,\r\n                user: user,\r\n                userId: userId,\r\n                //  ext  novelSaveAs \r\n                ext: settings.novelSaveAs,\r\n                bmk: bmk,\r\n                bookmarked: bookmarked,\r\n                date: body.createDate,\r\n                type: illustType,\r\n                rank: rank,\r\n                seriesTitle: seriesTitle,\r\n                seriesOrder: seriesOrder,\r\n                viewCount: body.viewCount,\r\n                likeCount: body.likeCount,\r\n                commentCount: body.commentCount,\r\n                novelMeta: {\r\n                    id: body.id,\r\n                    title: body.title,\r\n                    content: this.replaceFlag(body.content),\r\n                    description: body.description,\r\n                    coverUrl: body.coverUrl,\r\n                    createDate: body.createDate,\r\n                    userName: body.userName,\r\n                    meta: meta,\r\n                },\r\n                xRestrict: body.xRestrict,\r\n            });\r\n        }\r\n    }\r\n    // '[[jumpuri:>https://www.amazon.co.jp/dp/4758092486]]'\r\n    // \r\n    // 'https://www.amazon.co.jp/dp/4758092486'\r\n    replaceJumpuri(str) {\r\n        let reg = /\\[\\[jumpuri:(.*?)>(.*?)\\]\\]/g;\r\n        let temp;\r\n        while ((temp = reg.exec(str))) {\r\n            str = str.replace(temp[0], `${temp[1].trim()}${temp[2].trim()}`);\r\n            reg.lastIndex = 0;\r\n        }\r\n        return str;\r\n    }\r\n    // > '[[rb: > Lilith]]'\r\n    // \r\n    // 'Lilith'\r\n    replaceRb(str) {\r\n        let reg = /\\[\\[rb:(.*?)>(.*?)\\]\\]/g;\r\n        let temp;\r\n        while ((temp = reg.exec(str))) {\r\n            str = str.replace(temp[0], `${temp[1].trim()}${temp[2].trim()}`);\r\n            reg.lastIndex = 0;\r\n        }\r\n        return str;\r\n    }\r\n    // > '[chapter:]'\r\n    // \r\n    // ''\r\n    replaceChapter(str) {\r\n        const reg = /\\[chapter:(.*?)\\]/g;\r\n        let temp;\r\n        while ((temp = reg.exec(str))) {\r\n            str = str.replace(temp[0], temp[1]);\r\n            reg.lastIndex = 0;\r\n        }\r\n        return str;\r\n    }\r\n    // > [pixivimage:70551567]\r\n    // \r\n    // [pixiv image link: <a href=\"http://pixiv.net/i/70551567\" target=\"_blank\">http://pixiv.net/i/70551567</a>]\r\n    replacePixivImage(str) {\r\n        let reg = /\\[pixivimage:(.*?)\\]/g;\r\n        let temp;\r\n        while ((temp = reg.exec(str))) {\r\n            const url = `http://pixiv.net/i/${temp[1].trim()}`;\r\n            str = str.replace(temp[0], `[pixiv image link: <a href=\"${url}\" target=\"_blank\">${url}</a>]`);\r\n            reg.lastIndex = 0;\r\n        }\r\n        return str;\r\n    }\r\n    // \r\n    replaceFlag(str) {\r\n        str = str.replace(/\\[newpage\\]/g, '');\r\n        str = this.replaceJumpuri(str);\r\n        str = str.replace(/\\[jump:.*?\\]/g, '');\r\n        str = this.replaceRb(str);\r\n        str = this.replaceChapter(str);\r\n        str = this.replacePixivImage(str);\r\n        return str;\r\n    }\r\n}\r\nconst saveNovelData = new SaveNovelData();\r\nexport { saveNovelData };\r\n","import { EVT } from '../EVT';\r\n// \r\n// \r\n// \r\nclass States {\r\n    constructor() {\r\n        // \r\n        //  true false\r\n        // \r\n        this.busy = false;\r\n        //  true \r\n        // \r\n        //  true false\r\n        this.quickCrawl = false;\r\n        // \r\n        // \r\n        //  quickCrawl\r\n        this.downloadFromViewer = false;\r\n        //  true\r\n        // InitSearchArtworkPage \r\n        this.notAutoDownload = false;\r\n        // \r\n        // InitRankingArtworkPage \r\n        this.debut = false;\r\n        // \r\n        // \r\n        //  true false\r\n        this.bookmarkMode = false;\r\n        this.bindEvents();\r\n    }\r\n    bindEvents() {\r\n        const idle = [\r\n            EVT.list.crawlFinish,\r\n            EVT.list.downloadPause,\r\n            EVT.list.downloadStop,\r\n            EVT.list.downloadComplete,\r\n            EVT.list.bookmarkModeEnd,\r\n        ];\r\n        idle.forEach((type) => {\r\n            window.addEventListener(type, () => {\r\n                this.busy = false;\r\n            });\r\n        });\r\n        const busy = [\r\n            EVT.list.crawlStart,\r\n            EVT.list.downloadStart,\r\n            EVT.list.bookmarkModeStart,\r\n        ];\r\n        busy.forEach((type) => {\r\n            window.addEventListener(type, () => {\r\n                this.busy = true;\r\n            });\r\n        });\r\n        window.addEventListener(EVT.list.bookmarkModeStart, () => {\r\n            this.bookmarkMode = true;\r\n        });\r\n        window.addEventListener(EVT.list.bookmarkModeEnd, () => {\r\n            this.bookmarkMode = false;\r\n        });\r\n        // \r\n        const resetQuickState = [\r\n            EVT.list.crawlEmpty,\r\n            EVT.list.downloadStop,\r\n            EVT.list.downloadPause,\r\n            EVT.list.downloadComplete,\r\n            EVT.list.downloadCancel,\r\n        ];\r\n        for (const ev of resetQuickState) {\r\n            window.addEventListener(ev, () => {\r\n                this.quickCrawl = false;\r\n                this.downloadFromViewer = false;\r\n            });\r\n        }\r\n    }\r\n}\r\nconst states = new States();\r\nexport { states };\r\n","import { EVT } from '../EVT';\r\nimport { settings } from '../setting/Settings';\r\nimport { Tools } from '../Tools';\r\n// \r\nclass Store {\r\n    constructor() {\r\n        this.idList = []; //  id\r\n        this.resultMeta = []; // \r\n        // \r\n        this.artworkIDList = []; //  id \r\n        this.novelIDList = []; //  id \r\n        this.result = []; // \r\n        this.rankList = {}; // \r\n        this.tag = ''; //  tag\r\n        this.title = ''; //  title\r\n        this.crawlCompleteTime = new Date();\r\n        this.fileDataDefault = {\r\n            idNum: 0,\r\n            id: '',\r\n            original: '',\r\n            thumb: '',\r\n            regular: '',\r\n            small: '',\r\n            title: '',\r\n            pageCount: 1,\r\n            dlCount: 1,\r\n            tags: [],\r\n            tagsWithTransl: [],\r\n            tagsTranslOnly: [],\r\n            user: '',\r\n            userId: '',\r\n            fullWidth: 0,\r\n            fullHeight: 0,\r\n            ext: '',\r\n            bmk: 0,\r\n            bookmarked: false,\r\n            date: '',\r\n            type: 0,\r\n            rank: null,\r\n            ugoiraInfo: null,\r\n            seriesTitle: null,\r\n            seriesOrder: null,\r\n            novelMeta: null,\r\n            likeCount: 0,\r\n            viewCount: 0,\r\n            commentCount: 0,\r\n            xRestrict: 0,\r\n            sl: null,\r\n        };\r\n        this.bindEvents();\r\n    }\r\n    // \r\n    getDLCount(pageCount) {\r\n        if (settings.firstFewImagesSwitch && settings.firstFewImages <= pageCount) {\r\n            return settings.firstFewImages;\r\n        }\r\n        return pageCount;\r\n    }\r\n    // \r\n    // \r\n    addResult(data) {\r\n        //  id \r\n        if (data.type === 3) {\r\n            if (data.idNum !== undefined) {\r\n                if (this.novelIDList.includes(data.idNum)) {\r\n                    return;\r\n                }\r\n                this.novelIDList.push(data.idNum);\r\n            }\r\n        }\r\n        else {\r\n            if (data.idNum !== undefined) {\r\n                if (this.artworkIDList.includes(data.idNum)) {\r\n                    return;\r\n                }\r\n                this.artworkIDList.push(data.idNum);\r\n            }\r\n        }\r\n        // \r\n        const workData = Object.assign({}, this.fileDataDefault, data);\r\n        //  Object.assign  result \r\n        // \r\n        if (workData.type === 0 || workData.type === 1) {\r\n            workData.dlCount = this.getDLCount(workData.pageCount);\r\n            workData.id = workData.idNum + `_p0`;\r\n        }\r\n        else {\r\n            workData.id = workData.idNum.toString();\r\n        }\r\n        this.resultMeta.push(workData);\r\n        EVT.fire('addResult', workData);\r\n        // \r\n        if (workData.type === 3) {\r\n            // \r\n            this.result.push(workData);\r\n        }\r\n        else {\r\n            // \r\n            if (workData.dlCount === 1) {\r\n                this.result.push(workData);\r\n            }\r\n            if (workData.dlCount > 1) {\r\n                for (let i = 0; i < workData.dlCount; i++) {\r\n                    const fileData = Object.assign({}, workData);\r\n                    fileData.id = fileData.id.replace('p0', 'p' + i);\r\n                    fileData.original = fileData.original.replace('p0', 'p' + i);\r\n                    fileData.regular = fileData.regular.replace('p0', 'p' + i);\r\n                    fileData.small = fileData.small.replace('p0', 'p' + i);\r\n                    fileData.thumb = fileData.thumb.replace('p0', 'p' + i);\r\n                    this.result.push(fileData);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    getRankList(index) {\r\n        return this.rankList[index];\r\n    }\r\n    setRankList(id, rank) {\r\n        this.rankList[id] = rank;\r\n    }\r\n    reset() {\r\n        this.resultMeta = [];\r\n        this.artworkIDList = [];\r\n        this.novelIDList = [];\r\n        this.result = [];\r\n        this.idList = [];\r\n        this.rankList = {};\r\n        this.tag = Tools.getTagFromURL();\r\n        this.title = Tools.getPageTitle();\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener(EVT.list.crawlStart, () => {\r\n            this.reset();\r\n        });\r\n        window.addEventListener(EVT.list.resume, () => {\r\n            this.tag = Tools.getTagFromURL();\r\n            this.title = Tools.getPageTitle();\r\n        });\r\n    }\r\n}\r\nconst store = new Store();\r\nexport { store };\r\n","//  csv \r\n// csv  https://www.jianshu.com/p/54b3afc06126\r\nconst example = [\r\n    ['titleA', 'titleB', 'titleC'],\r\n    ['a1', 'b1', 'c1'],\r\n    [[1, 2, 3], false, 456],\r\n    [undefined, 'b,b,b', 'c c c'],\r\n];\r\n// any String String\r\n// \r\n// \r\n//  Array1. 2. Symbol \r\nclass CreateCSV {\r\n    constructor() {\r\n        this.separate = ','; // \r\n        this.CRLF = '\\r\\n'; // \r\n        this.reg = / |\\\"|,|\\n/; // \r\n        this.utf8BOM = this.UTF8BOM();\r\n    }\r\n    // \r\n    // \r\n    // \r\n    format(arr) {\r\n        const rowData = [];\r\n        // \r\n        for (let i = 0; i < arr.length; i++) {\r\n            let colData = '';\r\n            const origin = arr[i];\r\n            const type = typeof origin;\r\n            // \r\n            switch (type) {\r\n                case 'string':\r\n                    colData = origin;\r\n                    break;\r\n                case 'bigint':\r\n                case 'number':\r\n                case 'boolean':\r\n                case 'function':\r\n                    colData = origin.toString();\r\n                    break;\r\n                case 'undefined':\r\n                    colData = '';\r\n                    break;\r\n                case 'symbol':\r\n                    colData = origin.description || '';\r\n                    break;\r\n                case 'object':\r\n                    if (origin === null) {\r\n                        colData = '';\r\n                    }\r\n                    else if (Array.isArray(origin)) {\r\n                        colData = origin.join(this.separate);\r\n                    }\r\n                    break;\r\n                default:\r\n                    throw new Error('Unkown data type');\r\n            }\r\n            // \r\n            colData = colData.replace(/\\\"/g, '\"\"');\r\n            // \r\n            if (this.reg.test(colData)) {\r\n                colData = this.addQuotation(colData);\r\n            }\r\n            rowData.push(colData);\r\n        }\r\n        return rowData;\r\n    }\r\n    create(data) {\r\n        // \r\n        const result = [];\r\n        //  utf8BOM\r\n        result.push(this.utf8BOM);\r\n        // \r\n        for (const row of data) {\r\n            result.push(this.format(row).join(this.separate));\r\n            result.push(this.CRLF);\r\n        }\r\n        const csvBlob = new Blob(result, {\r\n            type: 'text/csv',\r\n        });\r\n        return csvBlob;\r\n    }\r\n    UTF8BOM() {\r\n        const buff = new ArrayBuffer(3);\r\n        const data = new DataView(buff);\r\n        data.setInt8(0, 0xef);\r\n        data.setInt8(1, 0xbb);\r\n        data.setInt8(2, 0xbf);\r\n        return buff;\r\n    }\r\n    // \r\n    addQuotation(str) {\r\n        return '\"' + str + '\"';\r\n    }\r\n}\r\nconst createCSV = new CreateCSV();\r\n// createCSV.create(example)\r\nexport { createCSV };\r\n","// \r\nclass DateFormat {\r\n    // format \r\n    /*\r\n    YYYY\r\n    YY\r\n    MM\r\n    MMM\r\n    MMMM\r\n    DD\r\n    hh\r\n    mm\r\n    ss\r\n    */\r\n    // \r\n    // \r\n    // https://www.w3.org/TR/NOTE-datetime\r\n    // https://en.wikipedia.org/wiki/Date_format_by_country\r\n    static format(date, format = 'YYYY-MM-DD') {\r\n        // \r\n        const _date = new Date(date);\r\n        const YYYY = _date.getFullYear().toString();\r\n        const YY = YYYY.substring(YYYY.length - 2, YYYY.length);\r\n        const MM = (_date.getMonth() + 1).toString().padStart(2, '0');\r\n        const MMM = this.months[_date.getMonth()];\r\n        const MMMM = this.Months[_date.getMonth()];\r\n        const DD = _date.getDate().toString().padStart(2, '0');\r\n        const hh = _date.getHours().toString().padStart(2, '0');\r\n        const mm = _date.getMinutes().toString().padStart(2, '0');\r\n        const ss = _date.getSeconds().toString().padStart(2, '0');\r\n        // \r\n        let r = format;\r\n        r = r.replace('YYYY', YYYY);\r\n        r = r.replace('YY', YY);\r\n        r = r.replace('MMMM', MMMM);\r\n        r = r.replace('MMM', MMM);\r\n        r = r.replace('MM', MM);\r\n        r = r.replace('DD', DD);\r\n        r = r.replace('hh', hh);\r\n        r = r.replace('mm', mm);\r\n        r = r.replace('ss', ss);\r\n        return r;\r\n    }\r\n}\r\nDateFormat.months = [\r\n    'Jan',\r\n    'Feb',\r\n    'Mar',\r\n    'Apr',\r\n    'May',\r\n    'Jun',\r\n    'Jul',\r\n    'Aug',\r\n    'Sept',\r\n    'Oct',\r\n    'Nov',\r\n    'Dec',\r\n];\r\nDateFormat.Months = [\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December',\r\n];\r\nexport { DateFormat };\r\n","//  IndexedDB \r\nclass IndexedDB {\r\n    async open(DBName, DBVer, onUpgrade) {\r\n        return new Promise((resolve, reject) => {\r\n            const request = indexedDB.open(DBName, DBVer);\r\n            request.onupgradeneeded = (ev) => {\r\n                if (onUpgrade) {\r\n                    onUpgrade(request.result);\r\n                }\r\n            };\r\n            request.onsuccess = (ev) => {\r\n                this.db = request.result;\r\n                resolve(request.result);\r\n            };\r\n            request.onerror = (ev) => {\r\n                console.error('open indexDB failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    async add(storeNames, data) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const r = this.db\r\n                .transaction(storeNames, 'readwrite')\r\n                .objectStore(storeNames)\r\n                .add(data);\r\n            r.onsuccess = (ev) => {\r\n                resolve(ev);\r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('add failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    async put(storeNames, data) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const r = this.db\r\n                .transaction(storeNames, 'readwrite')\r\n                .objectStore(storeNames)\r\n                .put(data);\r\n            r.onsuccess = (ev) => {\r\n                resolve(ev);\r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('put failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    // \r\n    async batchAddData(storeName, dataList, key) {\r\n        return new Promise(async (resolve, reject) => {\r\n            var _a;\r\n            if (dataList.length === 0) {\r\n                resolve();\r\n            }\r\n            //  key\r\n            let existedKeys = (await this.getAllKeys(storeName));\r\n            // \r\n            const tr = (_a = this.db) === null || _a === void 0 ? void 0 : _a.transaction(storeName, 'readwrite');\r\n            if (!tr) {\r\n                throw new Error(`transaction ${storeName} is undefined`);\r\n            }\r\n            const store = tr.objectStore(storeName);\r\n            tr.oncomplete = () => {\r\n                resolve();\r\n            };\r\n            tr.onerror = (err) => {\r\n                console.error(err);\r\n                console.trace();\r\n                reject(err);\r\n            };\r\n            for (const data of dataList) {\r\n                await insert(data);\r\n            }\r\n            async function insert(data) {\r\n                return new Promise((resolve, reject) => {\r\n                    //  key  put\r\n                    const type = existedKeys.includes(data[key])\r\n                        ? 'put'\r\n                        : 'add';\r\n                    const request = store[type](data);\r\n                    request.onsuccess = () => {\r\n                        resolve();\r\n                    };\r\n                    request.onerror = (err) => {\r\n                        reject(err);\r\n                    };\r\n                });\r\n            }\r\n        });\r\n    }\r\n    //  null\r\n    async get(storeNames, key, index) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const store = this.db\r\n                .transaction(storeNames, 'readonly')\r\n                .objectStore(storeNames);\r\n            let r;\r\n            if (index !== undefined) {\r\n                const i = store.index(index);\r\n                r = i.get(key);\r\n            }\r\n            else {\r\n                r = store.get(key);\r\n            }\r\n            r.onsuccess = (ev) => {\r\n                const data = r.result;\r\n                resolve(data ? data : null);\r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('get failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    async getAll(storeNames) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const r = this.db\r\n                .transaction(storeNames, 'readwrite')\r\n                .objectStore(storeNames)\r\n                .getAll();\r\n            r.onsuccess = (ev) => {\r\n                const data = r.result;\r\n                if (data) {\r\n                    resolve(data);\r\n                }\r\n                resolve(data ? data : null);\r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('getAll failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    async getAllKeys(storeNames) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const r = this.db\r\n                .transaction(storeNames, 'readonly')\r\n                .objectStore(storeNames)\r\n                .getAllKeys();\r\n            r.onsuccess = (ev) => {\r\n                const data = r.result;\r\n                resolve(data ? data : null);\r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('getAllKeys failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    async delete(storeNames, key) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const r = this.db\r\n                .transaction(storeNames, 'readwrite')\r\n                .objectStore(storeNames)\r\n                .delete(key);\r\n            r.onsuccess = (ev) => {\r\n                resolve(ev);\r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('delete failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    async clear(storeNames) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const r = this.db\r\n                .transaction(storeNames, 'readwrite')\r\n                .objectStore(storeNames)\r\n                .clear();\r\n            r.onsuccess = (ev) => {\r\n                resolve();\r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('clear failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n    async openCursor(storeNames, CB) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.db === undefined) {\r\n                reject('Database is not defined');\r\n                return;\r\n            }\r\n            const r = this.db\r\n                .transaction(storeNames)\r\n                .objectStore(storeNames)\r\n                .openCursor();\r\n            r.onsuccess = (ev) => {\r\n                CB(r.result);\r\n                resolve(); //  resolve  cb \r\n            };\r\n            r.onerror = (ev) => {\r\n                console.error('openCursor failed');\r\n                console.trace();\r\n                reject(ev);\r\n            };\r\n        });\r\n    }\r\n}\r\nexport { IndexedDB };\r\n","// \r\nclass SecretSignal {\r\n    constructor() {\r\n        this.list = [];\r\n        // \r\n        // \"KeyX\"\r\n        // \"Digit9\"\r\n        // \"Numpad1\"\r\n        this.codePrefix = ['Key', 'Digit', 'Numpad'];\r\n        this.input = '';\r\n        this.bindEvents();\r\n    }\r\n    register(code, cb) {\r\n        this.list.push({\r\n            code,\r\n            cb,\r\n        });\r\n    }\r\n    bindEvents() {\r\n        window.addEventListener('keydown', (ev) => {\r\n            // \r\n            if (!ev.code ||\r\n                ev.altKey ||\r\n                ev.ctrlKey ||\r\n                ev.metaKey ||\r\n                ev.shiftKey ||\r\n                ev.isComposing) {\r\n                return;\r\n            }\r\n            // \r\n            for (const prefix of this.codePrefix) {\r\n                if (ev.code.startsWith(prefix) &&\r\n                    ev.code.length === prefix.length + 1) {\r\n                    const key = ev.code[ev.code.length - 1].toLowerCase();\r\n                    this.input += key;\r\n                    this.check();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    check() {\r\n        for (const item of this.list) {\r\n            if (this.input.endsWith(item.code)) {\r\n                item.cb();\r\n            }\r\n        }\r\n    }\r\n}\r\nconst secretSignal = new SecretSignal();\r\nexport { secretSignal };\r\n","class Utils {\r\n    static replaceUnsafeStr(str) {\r\n        // \r\n        str = str.replace(this.unsafeStr, '');\r\n        // \r\n        for (let index = 0; index < this.fullWidthDict.length; index++) {\r\n            const rule = this.fullWidthDict[index];\r\n            const reg = new RegExp(rule[0], 'g');\r\n            str = str.replace(reg, rule[1]);\r\n        }\r\n        return str;\r\n    }\r\n    /**  Windows \r\n     * \r\n     *  */\r\n    static handleWindowsReservedName(str, addStr) {\r\n        if (this.windowsReservedNames.includes(str)) {\r\n            if (addStr) {\r\n                return str + addStr;\r\n            }\r\n            else {\r\n                return '';\r\n            }\r\n        }\r\n        else {\r\n            return str;\r\n        }\r\n    }\r\n    // \r\n    static deepCopy(data) {\r\n        if (data === null || typeof data !== 'object') {\r\n            return data;\r\n        }\r\n        const result = (Array.isArray(data) ? [] : {});\r\n        for (const [key, value] of Object.entries(data)) {\r\n            result[key] =\r\n                data === null || typeof data !== 'object' ? value : this.deepCopy(value);\r\n        }\r\n        return result;\r\n    }\r\n    // \r\n    static string2array(str) {\r\n        str = str.replace(/\\n/g, ''); // textarea \r\n        const temp = str.trim().split(',');\r\n        const result = [];\r\n        for (const str of temp) {\r\n            if (str !== '') {\r\n                result.push(str.trim());\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    // \r\n    static sortByProperty(key, order = 'desc') {\r\n        return function (a, b) {\r\n            // \r\n            const value1 = typeof a[key] === 'number' ? a[key] : parseFloat(a[key]);\r\n            const value2 = typeof b[key] === 'number' ? b[key] : parseFloat(b[key]);\r\n            if (value2 < value1) {\r\n                return order === 'desc' ? -1 : 1;\r\n            }\r\n            else if (value2 > value1) {\r\n                return order === 'desc' ? 1 : -1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        };\r\n    }\r\n    //  input  json \r\n    static async loadJSONFile() {\r\n        return new Promise((resolve, reject) => {\r\n            const i = document.createElement('input');\r\n            i.setAttribute('type', 'file');\r\n            i.setAttribute('accept', 'application/json');\r\n            i.onchange = () => {\r\n                if (i.files && i.files.length > 0) {\r\n                    // \r\n                    const file = new FileReader();\r\n                    file.readAsText(i.files[0]);\r\n                    file.onload = () => {\r\n                        const str = file.result;\r\n                        let result;\r\n                        try {\r\n                            result = JSON.parse(str);\r\n                            // if((result as any).constructor !== Object){\r\n                            //  {}  []\r\n                            if (result === null || typeof result !== 'object') {\r\n                                const msg = 'Data is not an object!';\r\n                                return reject(new Error(msg));\r\n                            }\r\n                            return resolve(result);\r\n                        }\r\n                        catch (error) {\r\n                            const msg = 'JSON parse error!';\r\n                            return reject(new Error(msg));\r\n                        }\r\n                    };\r\n                }\r\n            };\r\n            i.click();\r\n        });\r\n    }\r\n    //  input \r\n    static async selectFile(accept) {\r\n        return new Promise((resolve, reject) => {\r\n            const i = document.createElement('input');\r\n            i.setAttribute('type', 'file');\r\n            if (accept) {\r\n                i.setAttribute('accept', accept);\r\n            }\r\n            i.onchange = () => {\r\n                if (i.files && i.files.length > 0) {\r\n                    return resolve(i.files);\r\n                }\r\n                else {\r\n                    return reject();\r\n                }\r\n            };\r\n            i.click();\r\n        });\r\n    }\r\n    //  a \r\n    static downloadFile(url, fileName) {\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = fileName;\r\n        a.click();\r\n    }\r\n    //  pixiv.net\r\n    static isPixiv() {\r\n        return window.location.host.endsWith('.pixiv.net');\r\n    }\r\n    //  url \r\n    //  encodeURIComponent \r\n    static getURLSearchField(url, query) {\r\n        const result = new URL(url).searchParams.get(query);\r\n        if (result !== null) {\r\n            return encodeURIComponent(result);\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    }\r\n    // \r\n    static getVisibleEl(selector) {\r\n        const list = document.querySelectorAll(selector);\r\n        return Array.from(list).filter((el) => {\r\n            return el.style.display !== 'none';\r\n        });\r\n    }\r\n    //  DOM  DOM \r\n    static removeEl(el) {\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (Reflect.has(el, 'length')) {\r\n            //  length \r\n            ;\r\n            el.forEach((el) => {\r\n                if (el.parentNode) {\r\n                    el.parentNode.removeChild(el);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            //  length querySelector  HTMLElement\r\n            const parent = el.parentNode;\r\n            if (parent) {\r\n                parent.removeChild(el);\r\n            }\r\n        }\r\n    }\r\n    //  DOM \r\n    //  display block\r\n    static toggleEl(el, showDisplay = 'block') {\r\n        el.style.display = el.style.display === showDisplay ? 'none' : showDisplay;\r\n    }\r\n    //  css \r\n    static addStyle(css) {\r\n        const e = document.createElement('style');\r\n        e.innerHTML = css;\r\n        document.body.append(e);\r\n    }\r\n    static async loadImg(url) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new Image();\r\n            img.src = url;\r\n            img.onload = function () {\r\n                resolve(img);\r\n            };\r\n            img.onerror = () => {\r\n                reject(new Error(`Load image error! url: ${url}`));\r\n            };\r\n        });\r\n    }\r\n    /** */\r\n    static json2Blob(data) {\r\n        const str = JSON.stringify(data, null, 2);\r\n        const blob = new Blob([str], { type: 'application/json' });\r\n        return blob;\r\n    }\r\n}\r\n// \r\nUtils.unsafeStr = new RegExp(/[\\u0001-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0605\\u061c\\u06dd\\u070f\\u08e2\\u180e\\u200b-\\u200f\\u202a-\\u202e\\u2060-\\u2064\\u2066-\\u206f\\ufdd0-\\ufdef\\ufeff\\ufff9-\\ufffb\\ufffe\\uffff]/g);\r\n// \r\nUtils.fullWidthDict = [\r\n    ['\\\\\\\\', ''],\r\n    ['/', ''],\r\n    [':', ''],\r\n    ['\\\\?', ''],\r\n    ['\"', ''],\r\n    ['<', ''],\r\n    ['>', ''],\r\n    ['\\\\*', ''],\r\n    ['\\\\|', ''],\r\n    ['~', ''],\r\n];\r\n/** Windows  */\r\n// \r\nUtils.windowsReservedNames = [\r\n    'CON',\r\n    'PRN',\r\n    'AUX',\r\n    'NUL',\r\n    'COM1',\r\n    'LPT1',\r\n    'LPT2',\r\n    'LPT3',\r\n    'COM2',\r\n    'COM3',\r\n    'COM4',\r\n    'con',\r\n    'prn',\r\n    'aux',\r\n    'nul',\r\n    'com1',\r\n    'lpt1',\r\n    'lpt2',\r\n    'lpt3',\r\n    'com2',\r\n    'com3',\r\n    'com4',\r\n];\r\nexport { Utils };\r\n","//  icon \r\n// icon  https://www.cnblogs.com/cswuyg/p/3603707.html\r\n// \r\n// source  url url\r\n// size \r\n// shape square circle fillet \r\n// bleed \r\n// \r\n//  icon  Blob \r\n//  icon \r\n//  icon  32  png \r\nclass ImageToIcon {\r\n    async convert(opt) {\r\n        return new Promise(async (resolve, reject) => {\r\n            // \r\n            const img = await this.loadImage(opt.source);\r\n            //  png \r\n            const pngDataArray = await this.createPngBuffer(img, opt.size, opt.shape, opt.bleed);\r\n            //  ico \r\n            const blob = this.createIcon(pngDataArray);\r\n            resolve(blob);\r\n        });\r\n    }\r\n    async convertImageURL(source) {\r\n        return new Promise(async (resolve, reject) => {\r\n            if (typeof source === 'string') {\r\n                //  BlobURL canvas \r\n                const res = await fetch(source, {\r\n                    method: 'get',\r\n                    credentials: 'same-origin',\r\n                });\r\n                const blob = await res.blob();\r\n                resolve(URL.createObjectURL(blob));\r\n            }\r\n            else if (source instanceof File) {\r\n                resolve(URL.createObjectURL(source));\r\n            }\r\n            else {\r\n                reject('Unrecognized opt.source');\r\n            }\r\n        });\r\n    }\r\n    async loadImage(source) {\r\n        return new Promise(async (resolve, reject) => {\r\n            let imgURL = await this.convertImageURL(source);\r\n            const i = document.createElement('img');\r\n            i.src = imgURL;\r\n            i.onload = function () {\r\n                resolve(i);\r\n            };\r\n        });\r\n    }\r\n    async createPngBuffer(img, size = [16, 48, 96, 256], shape = 'square', bleed = true) {\r\n        return new Promise(async (resolve, reject) => {\r\n            const buffer = [];\r\n            let length = size.length;\r\n            while (length > 0) {\r\n                const sizeNumber = size[size.length - length];\r\n                const canvas = this.createCanvas(sizeNumber, img);\r\n                // \r\n                this.drawImage(canvas, img, shape, bleed);\r\n                //  png \r\n                const pngBlob = await this.getPngBlob(canvas);\r\n                //  png  buffer\r\n                const buf = await pngBlob.arrayBuffer();\r\n                buffer.push({\r\n                    size: sizeNumber,\r\n                    buffer: buf,\r\n                });\r\n                length--;\r\n                if (length === 0) {\r\n                    resolve(buffer);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    createCanvas(size, img) {\r\n        const c = document.createElement('canvas');\r\n        c.width = size;\r\n        c.height = size;\r\n        return c;\r\n    }\r\n    drawImage(canvas, img, shape, bleed = true) {\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) {\r\n            console.error('draw error: ctx is null');\r\n            return;\r\n        }\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        // \r\n        let dw = 0;\r\n        let dh = 0;\r\n        // \r\n        if (img.naturalWidth < img.naturalHeight) {\r\n            dw = canvas.width;\r\n            dh = (dw / img.naturalWidth) * img.naturalHeight;\r\n        }\r\n        else {\r\n            // \r\n            dh = canvas.height;\r\n            dw = (dh / img.naturalHeight) * img.naturalWidth;\r\n        }\r\n        // \r\n        if (shape === 'square') {\r\n            ctx.drawImage(img, 0, 0, dw, dh);\r\n        }\r\n        // \r\n        if (shape === 'circle') {\r\n            let circle = {\r\n                x: canvas.width / 2,\r\n                y: canvas.width / 2,\r\n                r: canvas.width / 2,\r\n            };\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.arc(circle.x, circle.y, circle.r, 0, Math.PI * 2, false);\r\n            ctx.clip();\r\n            ctx.drawImage(img, 0, 0, dw, dh);\r\n            ctx.restore();\r\n        }\r\n        // \r\n        if (shape === 'fillet') {\r\n            let x = 0;\r\n            let y = 0;\r\n            //  16 \r\n            if (bleed && canvas.width > 16) {\r\n                let num = 10 / 256; //  256  10 px\r\n                x = Math.ceil(num * canvas.width);\r\n                y = Math.ceil(num * canvas.width);\r\n            }\r\n            // \r\n            const w = canvas.width - x * 2;\r\n            const h = canvas.height - y * 2;\r\n            //  1/8\r\n            const r = Math.floor(w / 8);\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + r, y);\r\n            ctx.arcTo(x + w, y, x + w, y + h, r);\r\n            ctx.arcTo(x + w, y + h, x, y + h, r);\r\n            ctx.arcTo(x, y + h, x, y, r);\r\n            ctx.arcTo(x, y, x + w, y, r);\r\n            ctx.closePath();\r\n            ctx.clip();\r\n            ctx.drawImage(img, 0, 0, dw, dh);\r\n        }\r\n        return ctx;\r\n    }\r\n    async getPngBlob(canvas) {\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob((blob) => {\r\n                if (!blob) {\r\n                    reject('blob is null');\r\n                }\r\n                else {\r\n                    resolve(blob);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    createIcon(pngData) {\r\n        const fileData = [];\r\n        const fileHeadSize = 6;\r\n        // icon \r\n        const fileHead = new ArrayBuffer(fileHeadSize);\r\n        const v1 = new DataView(fileHead);\r\n        v1.setInt16(0, 0, true); // idReserved\r\n        v1.setInt16(2, 1, true); // idType\r\n        v1.setInt16(4, pngData.length, true); // idCount\r\n        fileData.push(fileHead);\r\n        //  icon \r\n        const entrySize = 16;\r\n        const entryTotalSize = entrySize * pngData.length;\r\n        let fileOffset = fileHeadSize + entryTotalSize;\r\n        let fileLength = 0;\r\n        for (const d of pngData) {\r\n            fileOffset += fileLength;\r\n            const entry = new ArrayBuffer(entrySize);\r\n            const v2 = new DataView(entry);\r\n            v2.setInt8(0, d.size); // Width, in pixels, of the image\r\n            v2.setInt8(1, d.size); // Height, in pixels, of the image\r\n            v2.setInt8(2, 0); // Number of colors in image (0 if >=8bpp)\r\n            v2.setInt8(3, 0); // Reserved ( must be 0)\r\n            v2.setInt16(4, 1, true); // Color Planes\r\n            v2.setInt16(6, 32, true); // Bits per pixel\r\n            v2.setInt32(8, d.buffer.byteLength, true); // How many bytes in this resource?\r\n            v2.setInt32(12, fileOffset, true); // Where in the file is this image?\r\n            fileData.push(entry);\r\n            fileLength = d.buffer.byteLength;\r\n        }\r\n        //  png \r\n        for (const d of pngData) {\r\n            fileData.push(d.buffer);\r\n        }\r\n        //  blob \r\n        return new Blob(fileData, {\r\n            type: 'image/vnd.microsoft.icon',\r\n        });\r\n    }\r\n}\r\nconst img2ico = new ImageToIcon();\r\nexport { img2ico };\r\n"],"sourceRoot":""}